function cA(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var hA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bT={exports:{}},tf={},CT={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=Symbol.for("react.element"),fA=Symbol.for("react.portal"),pA=Symbol.for("react.fragment"),mA=Symbol.for("react.strict_mode"),gA=Symbol.for("react.profiler"),vA=Symbol.for("react.provider"),_A=Symbol.for("react.context"),yA=Symbol.for("react.forward_ref"),wA=Symbol.for("react.suspense"),EA=Symbol.for("react.memo"),TA=Symbol.for("react.lazy"),zy=Symbol.iterator;function SA(n){return n===null||typeof n!="object"?null:(n=zy&&n[zy]||n["@@iterator"],typeof n=="function"?n:null)}var PT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AT=Object.assign,kT={};function Qa(n,e,t){this.props=n,this.context=e,this.refs=kT,this.updater=t||PT}Qa.prototype.isReactComponent={};Qa.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Qa.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function xT(){}xT.prototype=Qa.prototype;function Wg(n,e,t){this.props=n,this.context=e,this.refs=kT,this.updater=t||PT}var Hg=Wg.prototype=new xT;Hg.constructor=Wg;AT(Hg,Qa.prototype);Hg.isPureReactComponent=!0;var Wy=Array.isArray,RT=Object.prototype.hasOwnProperty,qg={current:null},NT={key:!0,ref:!0,__self:!0,__source:!0};function DT(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)RT.call(e,i)&&!NT.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:tc,type:n,key:r,ref:o,props:s,_owner:qg.current}}function IA(n,e){return{$$typeof:tc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Yg(n){return typeof n=="object"&&n!==null&&n.$$typeof===tc}function bA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Hy=/\/+/g;function vp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?bA(""+n.key):e.toString(36)}function Lh(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case tc:case fA:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+vp(o,0):i,Wy(s)?(t="",n!=null&&(t=n.replace(Hy,"$&/")+"/"),Lh(s,e,t,"",function(c){return c})):s!=null&&(Yg(s)&&(s=IA(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Hy,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",Wy(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+vp(r,a);o+=Lh(r,e,t,l,s)}else if(l=SA(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+vp(r,a++),o+=Lh(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function oh(n,e,t){if(n==null)return n;var i=[],s=0;return Lh(n,i,"","",function(r){return e.call(t,r,s++)}),i}function CA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var pn={current:null},Vh={transition:null},PA={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Vh,ReactCurrentOwner:qg};function MT(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:oh,forEach:function(n,e,t){oh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return oh(n,function(){e++}),e},toArray:function(n){return oh(n,function(e){return e})||[]},only:function(n){if(!Yg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};we.Component=Qa;we.Fragment=pA;we.Profiler=gA;we.PureComponent=Wg;we.StrictMode=mA;we.Suspense=wA;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PA;we.act=MT;we.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=AT({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=qg.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)RT.call(e,l)&&!NT.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:tc,type:n.type,key:s,ref:r,props:i,_owner:o}};we.createContext=function(n){return n={$$typeof:_A,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:vA,_context:n},n.Consumer=n};we.createElement=DT;we.createFactory=function(n){var e=DT.bind(null,n);return e.type=n,e};we.createRef=function(){return{current:null}};we.forwardRef=function(n){return{$$typeof:yA,render:n}};we.isValidElement=Yg;we.lazy=function(n){return{$$typeof:TA,_payload:{_status:-1,_result:n},_init:CA}};we.memo=function(n,e){return{$$typeof:EA,type:n,compare:e===void 0?null:e}};we.startTransition=function(n){var e=Vh.transition;Vh.transition={};try{n()}finally{Vh.transition=e}};we.unstable_act=MT;we.useCallback=function(n,e){return pn.current.useCallback(n,e)};we.useContext=function(n){return pn.current.useContext(n)};we.useDebugValue=function(){};we.useDeferredValue=function(n){return pn.current.useDeferredValue(n)};we.useEffect=function(n,e){return pn.current.useEffect(n,e)};we.useId=function(){return pn.current.useId()};we.useImperativeHandle=function(n,e,t){return pn.current.useImperativeHandle(n,e,t)};we.useInsertionEffect=function(n,e){return pn.current.useInsertionEffect(n,e)};we.useLayoutEffect=function(n,e){return pn.current.useLayoutEffect(n,e)};we.useMemo=function(n,e){return pn.current.useMemo(n,e)};we.useReducer=function(n,e,t){return pn.current.useReducer(n,e,t)};we.useRef=function(n){return pn.current.useRef(n)};we.useState=function(n){return pn.current.useState(n)};we.useSyncExternalStore=function(n,e,t){return pn.current.useSyncExternalStore(n,e,t)};we.useTransition=function(){return pn.current.useTransition()};we.version="18.3.1";CT.exports=we;var z=CT.exports;const OT=dA(z),AA=cA({__proto__:null,default:OT},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA=z,xA=Symbol.for("react.element"),RA=Symbol.for("react.fragment"),NA=Object.prototype.hasOwnProperty,DA=kA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MA={key:!0,ref:!0,__self:!0,__source:!0};function LT(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)NA.call(e,i)&&!MA.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:xA,type:n,key:r,ref:o,props:s,_owner:DA.current}}tf.Fragment=RA;tf.jsx=LT;tf.jsxs=LT;bT.exports=tf;var I=bT.exports,VT={exports:{}},Vn={},FT={exports:{}},jT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Z,le){var U=Z.length;Z.push(le);e:for(;0<U;){var Fe=U-1>>>1,Re=Z[Fe];if(0<s(Re,le))Z[Fe]=le,Z[U]=Re,U=Fe;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var le=Z[0],U=Z.pop();if(U!==le){Z[0]=U;e:for(var Fe=0,Re=Z.length,He=Re>>>1;Fe<He;){var pt=2*(Fe+1)-1,tn=Z[pt],it=pt+1,bn=Z[it];if(0>s(tn,U))it<Re&&0>s(bn,tn)?(Z[Fe]=bn,Z[it]=U,Fe=it):(Z[Fe]=tn,Z[pt]=U,Fe=pt);else if(it<Re&&0>s(bn,U))Z[Fe]=bn,Z[it]=U,Fe=it;else break e}}return le}function s(Z,le){var U=Z.sortIndex-le.sortIndex;return U!==0?U:Z.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,g=3,y=!1,b=!1,P=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(Z){for(var le=t(c);le!==null;){if(le.callback===null)i(c);else if(le.startTime<=Z)i(c),le.sortIndex=le.expirationTime,e(l,le);else break;le=t(c)}}function M(Z){if(P=!1,x(Z),!b)if(t(l)!==null)b=!0,Jn(W);else{var le=t(c);le!==null&&ft(M,le.startTime-Z)}}function W(Z,le){b=!1,P&&(P=!1,E(C),C=-1),y=!0;var U=g;try{for(x(le),p=t(l);p!==null&&(!(p.expirationTime>le)||Z&&!O());){var Fe=p.callback;if(typeof Fe=="function"){p.callback=null,g=p.priorityLevel;var Re=Fe(p.expirationTime<=le);le=n.unstable_now(),typeof Re=="function"?p.callback=Re:p===t(l)&&i(l),x(le)}else i(l);p=t(l)}if(p!==null)var He=!0;else{var pt=t(c);pt!==null&&ft(M,pt.startTime-le),He=!1}return He}finally{p=null,g=U,y=!1}}var Y=!1,R=null,C=-1,k=5,N=-1;function O(){return!(n.unstable_now()-N<k)}function F(){if(R!==null){var Z=n.unstable_now();N=Z;var le=!0;try{le=R(!0,Z)}finally{le?D():(Y=!1,R=null)}}else Y=!1}var D;if(typeof w=="function")D=function(){w(F)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,en=Et.port2;Et.port1.onmessage=F,D=function(){en.postMessage(null)}}else D=function(){A(F,0)};function Jn(Z){R=Z,Y||(Y=!0,D())}function ft(Z,le){C=A(function(){Z(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){b||y||(b=!0,Jn(W))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var le=3;break;default:le=g}var U=g;g=le;try{return Z()}finally{g=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var U=g;g=Z;try{return le()}finally{g=U}},n.unstable_scheduleCallback=function(Z,le,U){var Fe=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Fe+U:Fe):U=Fe,Z){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=U+Re,Z={id:d++,callback:le,priorityLevel:Z,startTime:U,expirationTime:Re,sortIndex:-1},U>Fe?(Z.sortIndex=U,e(c,Z),t(l)===null&&Z===t(c)&&(P?(E(C),C=-1):P=!0,ft(M,U-Fe))):(Z.sortIndex=Re,e(l,Z),b||y||(b=!0,Jn(W))),Z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Z){var le=g;return function(){var U=g;g=le;try{return Z.apply(this,arguments)}finally{g=U}}}})(jT);FT.exports=jT;var OA=FT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=z,Ln=OA;function Q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UT=new Set,Iu={};function So(n,e){Na(n,e),Na(n+"Capture",e)}function Na(n,e){for(Iu[n]=e,n=0;n<e.length;n++)UT.add(e[n])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ym=Object.prototype.hasOwnProperty,VA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qy={},Yy={};function FA(n){return ym.call(Yy,n)?!0:ym.call(qy,n)?!1:VA.test(n)?Yy[n]=!0:(qy[n]=!0,!1)}function jA(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function UA(n,e,t,i){if(e===null||typeof e>"u"||jA(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Bt[n]=new mn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Bt[e]=new mn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Bt[n]=new mn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Bt[n]=new mn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Bt[n]=new mn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Bt[n]=new mn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Bt[n]=new mn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Bt[n]=new mn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Bt[n]=new mn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Kg=/[\-:]([a-z])/g;function Qg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Kg,Qg);Bt[e]=new mn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Kg,Qg);Bt[e]=new mn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Kg,Qg);Bt[e]=new mn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Bt[n]=new mn(n,1,!1,n.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Bt[n]=new mn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Gg(n,e,t,i){var s=Bt.hasOwnProperty(e)?Bt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UA(e,t,s,i)&&(t=null),i||s===null?FA(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ts=LA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ah=Symbol.for("react.element"),oa=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),Xg=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),$T=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),Em=Symbol.for("react.suspense"),Tm=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),zT=Symbol.for("react.offscreen"),Ky=Symbol.iterator;function Ll(n){return n===null||typeof n!="object"?null:(n=Ky&&n[Ky]||n["@@iterator"],typeof n=="function"?n:null)}var Je=Object.assign,_p;function Ql(n){if(_p===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_p=e&&e[1]||""}return`
`+_p+n}var yp=!1;function wp(n,e){if(!n||yp)return"";yp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{yp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ql(n):""}function BA(n){switch(n.tag){case 5:return Ql(n.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return n=wp(n.type,!1),n;case 11:return n=wp(n.type.render,!1),n;case 1:return n=wp(n.type,!0),n;default:return""}}function Sm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case aa:return"Fragment";case oa:return"Portal";case wm:return"Profiler";case Xg:return"StrictMode";case Em:return"Suspense";case Tm:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case $T:return(n.displayName||"Context")+".Consumer";case BT:return(n._context.displayName||"Context")+".Provider";case Jg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Zg:return e=n.displayName||null,e!==null?e:Sm(n.type)||"Memo";case Ws:e=n._payload,n=n._init;try{return Sm(n(e))}catch{}}return null}function $A(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sm(e);case 8:return e===Xg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function WT(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zA(n){var e=WT(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function lh(n){n._valueTracker||(n._valueTracker=zA(n))}function HT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=WT(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function rd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Im(n,e){var t=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Qy(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=mr(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qT(n,e){e=e.checked,e!=null&&Gg(n,"checked",e,!1)}function bm(n,e){qT(n,e);var t=mr(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Cm(n,e.type,t):e.hasOwnProperty("defaultValue")&&Cm(n,e.type,mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Gy(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Cm(n,e,t){(e!=="number"||rd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Gl=Array.isArray;function Ea(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+mr(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Pm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xy(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Q(92));if(Gl(t)){if(1<t.length)throw Error(Q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:mr(t)}}function YT(n,e){var t=mr(e.value),i=mr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Jy(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function KT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Am(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?KT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var uh,QT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(uh=uh||document.createElement("div"),uh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function bu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WA=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(n){WA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ru[e]=ru[n]})});function GT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ru.hasOwnProperty(n)&&ru[n]?(""+e).trim():e+"px"}function XT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=GT(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var HA=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function km(n,e){if(e){if(HA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function xm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rm=null;function ev(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nm=null,Ta=null,Sa=null;function Zy(n){if(n=sc(n)){if(typeof Nm!="function")throw Error(Q(280));var e=n.stateNode;e&&(e=af(e),Nm(n.stateNode,n.type,e))}}function JT(n){Ta?Sa?Sa.push(n):Sa=[n]:Ta=n}function ZT(){if(Ta){var n=Ta,e=Sa;if(Sa=Ta=null,Zy(n),e)for(n=0;n<e.length;n++)Zy(e[n])}}function eS(n,e){return n(e)}function tS(){}var Ep=!1;function nS(n,e,t){if(Ep)return n(e,t);Ep=!0;try{return eS(n,e,t)}finally{Ep=!1,(Ta!==null||Sa!==null)&&(tS(),ZT())}}function Cu(n,e){var t=n.stateNode;if(t===null)return null;var i=af(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Q(231,e,typeof t));return t}var Dm=!1;if(fs)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){Dm=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{Dm=!1}function qA(n,e,t,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var ou=!1,od=null,ad=!1,Mm=null,YA={onError:function(n){ou=!0,od=n}};function KA(n,e,t,i,s,r,o,a,l){ou=!1,od=null,qA.apply(YA,arguments)}function QA(n,e,t,i,s,r,o,a,l){if(KA.apply(this,arguments),ou){if(ou){var c=od;ou=!1,od=null}else throw Error(Q(198));ad||(ad=!0,Mm=c)}}function Io(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function iS(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function ew(n){if(Io(n)!==n)throw Error(Q(188))}function GA(n){var e=n.alternate;if(!e){if(e=Io(n),e===null)throw Error(Q(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return ew(s),n;if(r===i)return ew(s),e;r=r.sibling}throw Error(Q(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(t.alternate!==i)throw Error(Q(190))}if(t.tag!==3)throw Error(Q(188));return t.stateNode.current===t?n:e}function sS(n){return n=GA(n),n!==null?rS(n):null}function rS(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=rS(n);if(e!==null)return e;n=n.sibling}return null}var oS=Ln.unstable_scheduleCallback,tw=Ln.unstable_cancelCallback,XA=Ln.unstable_shouldYield,JA=Ln.unstable_requestPaint,at=Ln.unstable_now,ZA=Ln.unstable_getCurrentPriorityLevel,tv=Ln.unstable_ImmediatePriority,aS=Ln.unstable_UserBlockingPriority,ld=Ln.unstable_NormalPriority,ek=Ln.unstable_LowPriority,lS=Ln.unstable_IdlePriority,nf=null,xi=null;function tk(n){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(nf,n,void 0,(n.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:sk,nk=Math.log,ik=Math.LN2;function sk(n){return n>>>=0,n===0?32:31-(nk(n)/ik|0)|0}var ch=64,hh=4194304;function Xl(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ud(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=Xl(a):(r&=o,r!==0&&(i=Xl(r)))}else o=t&~s,o!==0?i=Xl(o):r!==0&&(i=Xl(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ci(e),s=1<<t,i|=n[t],e&=~s;return i}function rk(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ok(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-ci(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&i)&&(s[o]=rk(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function Om(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function uS(){var n=ch;return ch<<=1,!(ch&4194240)&&(ch=64),n}function Tp(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function nc(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ci(e),n[e]=t}function ak(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-ci(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function nv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ci(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Oe=0;function cS(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var hS,iv,dS,fS,pS,Lm=!1,dh=[],ir=null,sr=null,rr=null,Pu=new Map,Au=new Map,qs=[],lk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nw(n,e){switch(n){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(e.pointerId)}}function Fl(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=sc(e),e!==null&&iv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function uk(n,e,t,i,s){switch(e){case"focusin":return ir=Fl(ir,n,e,t,i,s),!0;case"dragenter":return sr=Fl(sr,n,e,t,i,s),!0;case"mouseover":return rr=Fl(rr,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Pu.set(r,Fl(Pu.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Au.set(r,Fl(Au.get(r)||null,n,e,t,i,s)),!0}return!1}function mS(n){var e=Xr(n.target);if(e!==null){var t=Io(e);if(t!==null){if(e=t.tag,e===13){if(e=iS(t),e!==null){n.blockedOn=e,pS(n.priority,function(){dS(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Vm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Rm=i,t.target.dispatchEvent(i),Rm=null}else return e=sc(t),e!==null&&iv(e),n.blockedOn=t,!1;e.shift()}return!0}function iw(n,e,t){Fh(n)&&t.delete(e)}function ck(){Lm=!1,ir!==null&&Fh(ir)&&(ir=null),sr!==null&&Fh(sr)&&(sr=null),rr!==null&&Fh(rr)&&(rr=null),Pu.forEach(iw),Au.forEach(iw)}function jl(n,e){n.blockedOn===e&&(n.blockedOn=null,Lm||(Lm=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,ck)))}function ku(n){function e(s){return jl(s,n)}if(0<dh.length){jl(dh[0],n);for(var t=1;t<dh.length;t++){var i=dh[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ir!==null&&jl(ir,n),sr!==null&&jl(sr,n),rr!==null&&jl(rr,n),Pu.forEach(e),Au.forEach(e),t=0;t<qs.length;t++)i=qs[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<qs.length&&(t=qs[0],t.blockedOn===null);)mS(t),t.blockedOn===null&&qs.shift()}var Ia=Ts.ReactCurrentBatchConfig,cd=!0;function hk(n,e,t,i){var s=Oe,r=Ia.transition;Ia.transition=null;try{Oe=1,sv(n,e,t,i)}finally{Oe=s,Ia.transition=r}}function dk(n,e,t,i){var s=Oe,r=Ia.transition;Ia.transition=null;try{Oe=4,sv(n,e,t,i)}finally{Oe=s,Ia.transition=r}}function sv(n,e,t,i){if(cd){var s=Vm(n,e,t,i);if(s===null)Np(n,e,i,hd,t),nw(n,i);else if(uk(s,n,e,t,i))i.stopPropagation();else if(nw(n,i),e&4&&-1<lk.indexOf(n)){for(;s!==null;){var r=sc(s);if(r!==null&&hS(r),r=Vm(n,e,t,i),r===null&&Np(n,e,i,hd,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else Np(n,e,i,null,t)}}var hd=null;function Vm(n,e,t,i){if(hd=null,n=ev(i),n=Xr(n),n!==null)if(e=Io(n),e===null)n=null;else if(t=e.tag,t===13){if(n=iS(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return hd=n,null}function gS(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZA()){case tv:return 1;case aS:return 4;case ld:case ek:return 16;case lS:return 536870912;default:return 16}default:return 16}}var Js=null,rv=null,jh=null;function vS(){if(jh)return jh;var n,e=rv,t=e.length,i,s="value"in Js?Js.value:Js.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return jh=s.slice(n,1<i?1-i:void 0)}function Uh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function fh(){return!0}function sw(){return!1}function Fn(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?fh:sw,this.isPropagationStopped=sw,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=fh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=fh)},persist:function(){},isPersistent:fh}),e}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ov=Fn(Ga),ic=Je({},Ga,{view:0,detail:0}),fk=Fn(ic),Sp,Ip,Ul,sf=Je({},ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:av,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ul&&(Ul&&n.type==="mousemove"?(Sp=n.screenX-Ul.screenX,Ip=n.screenY-Ul.screenY):Ip=Sp=0,Ul=n),Sp)},movementY:function(n){return"movementY"in n?n.movementY:Ip}}),rw=Fn(sf),pk=Je({},sf,{dataTransfer:0}),mk=Fn(pk),gk=Je({},ic,{relatedTarget:0}),bp=Fn(gk),vk=Je({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),_k=Fn(vk),yk=Je({},Ga,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wk=Fn(yk),Ek=Je({},Ga,{data:0}),ow=Fn(Ek),Tk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Ik[n])?!!e[n]:!1}function av(){return bk}var Ck=Je({},ic,{key:function(n){if(n.key){var e=Tk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Uh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Sk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:av,charCode:function(n){return n.type==="keypress"?Uh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Uh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Pk=Fn(Ck),Ak=Je({},sf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aw=Fn(Ak),kk=Je({},ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:av}),xk=Fn(kk),Rk=Je({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nk=Fn(Rk),Dk=Je({},sf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=Fn(Dk),Ok=[9,13,27,32],lv=fs&&"CompositionEvent"in window,au=null;fs&&"documentMode"in document&&(au=document.documentMode);var Lk=fs&&"TextEvent"in window&&!au,_S=fs&&(!lv||au&&8<au&&11>=au),lw=" ",uw=!1;function yS(n,e){switch(n){case"keyup":return Ok.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wS(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var la=!1;function Vk(n,e){switch(n){case"compositionend":return wS(e);case"keypress":return e.which!==32?null:(uw=!0,lw);case"textInput":return n=e.data,n===lw&&uw?null:n;default:return null}}function Fk(n,e){if(la)return n==="compositionend"||!lv&&yS(n,e)?(n=vS(),jh=rv=Js=null,la=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _S&&e.locale!=="ko"?null:e.data;default:return null}}var jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!jk[n.type]:e==="textarea"}function ES(n,e,t,i){JT(i),e=dd(e,"onChange"),0<e.length&&(t=new ov("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var lu=null,xu=null;function Uk(n){NS(n,0)}function rf(n){var e=ha(n);if(HT(e))return n}function Bk(n,e){if(n==="change")return e}var TS=!1;if(fs){var Cp;if(fs){var Pp="oninput"in document;if(!Pp){var hw=document.createElement("div");hw.setAttribute("oninput","return;"),Pp=typeof hw.oninput=="function"}Cp=Pp}else Cp=!1;TS=Cp&&(!document.documentMode||9<document.documentMode)}function dw(){lu&&(lu.detachEvent("onpropertychange",SS),xu=lu=null)}function SS(n){if(n.propertyName==="value"&&rf(xu)){var e=[];ES(e,xu,n,ev(n)),nS(Uk,e)}}function $k(n,e,t){n==="focusin"?(dw(),lu=e,xu=t,lu.attachEvent("onpropertychange",SS)):n==="focusout"&&dw()}function zk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return rf(xu)}function Wk(n,e){if(n==="click")return rf(e)}function Hk(n,e){if(n==="input"||n==="change")return rf(e)}function qk(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var di=typeof Object.is=="function"?Object.is:qk;function Ru(n,e){if(di(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!ym.call(e,s)||!di(n[s],e[s]))return!1}return!0}function fw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pw(n,e){var t=fw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=fw(t)}}function IS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?IS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function bS(){for(var n=window,e=rd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=rd(n.document)}return e}function uv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Yk(n){var e=bS(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&IS(t.ownerDocument.documentElement,t)){if(i!==null&&uv(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=pw(t,r);var o=pw(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Kk=fs&&"documentMode"in document&&11>=document.documentMode,ua=null,Fm=null,uu=null,jm=!1;function mw(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;jm||ua==null||ua!==rd(i)||(i=ua,"selectionStart"in i&&uv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),uu&&Ru(uu,i)||(uu=i,i=dd(Fm,"onSelect"),0<i.length&&(e=new ov("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=ua)))}function ph(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ca={animationend:ph("Animation","AnimationEnd"),animationiteration:ph("Animation","AnimationIteration"),animationstart:ph("Animation","AnimationStart"),transitionend:ph("Transition","TransitionEnd")},Ap={},CS={};fs&&(CS=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function of(n){if(Ap[n])return Ap[n];if(!ca[n])return n;var e=ca[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in CS)return Ap[n]=e[t];return n}var PS=of("animationend"),AS=of("animationiteration"),kS=of("animationstart"),xS=of("transitionend"),RS=new Map,gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(n,e){RS.set(n,e),So(e,[n])}for(var kp=0;kp<gw.length;kp++){var xp=gw[kp],Qk=xp.toLowerCase(),Gk=xp[0].toUpperCase()+xp.slice(1);Er(Qk,"on"+Gk)}Er(PS,"onAnimationEnd");Er(AS,"onAnimationIteration");Er(kS,"onAnimationStart");Er("dblclick","onDoubleClick");Er("focusin","onFocus");Er("focusout","onBlur");Er(xS,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));So("onBeforeInput",["compositionend","keypress","textInput","paste"]);So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function vw(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,QA(i,e,void 0,n),n.currentTarget=null}function NS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;vw(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;vw(s,a,c),r=l}}}if(ad)throw n=Mm,ad=!1,Mm=null,n}function qe(n,e){var t=e[Wm];t===void 0&&(t=e[Wm]=new Set);var i=n+"__bubble";t.has(i)||(DS(e,n,2,!1),t.add(i))}function Rp(n,e,t){var i=0;e&&(i|=4),DS(t,n,i,e)}var mh="_reactListening"+Math.random().toString(36).slice(2);function Nu(n){if(!n[mh]){n[mh]=!0,UT.forEach(function(t){t!=="selectionchange"&&(Xk.has(t)||Rp(t,!1,n),Rp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[mh]||(e[mh]=!0,Rp("selectionchange",!1,e))}}function DS(n,e,t,i){switch(gS(e)){case 1:var s=hk;break;case 4:s=dk;break;default:s=sv}t=s.bind(null,e,t,n),s=void 0,!Dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Np(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Xr(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}nS(function(){var c=r,d=ev(t),p=[];e:{var g=RS.get(n);if(g!==void 0){var y=ov,b=n;switch(n){case"keypress":if(Uh(t)===0)break e;case"keydown":case"keyup":y=Pk;break;case"focusin":b="focus",y=bp;break;case"focusout":b="blur",y=bp;break;case"beforeblur":case"afterblur":y=bp;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=mk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=xk;break;case PS:case AS:case kS:y=_k;break;case xS:y=Nk;break;case"scroll":y=fk;break;case"wheel":y=Mk;break;case"copy":case"cut":case"paste":y=wk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=aw}var P=(e&4)!==0,A=!P&&n==="scroll",E=P?g!==null?g+"Capture":null:g;P=[];for(var w=c,x;w!==null;){x=w;var M=x.stateNode;if(x.tag===5&&M!==null&&(x=M,E!==null&&(M=Cu(w,E),M!=null&&P.push(Du(w,M,x)))),A)break;w=w.return}0<P.length&&(g=new y(g,b,null,t,d),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",g&&t!==Rm&&(b=t.relatedTarget||t.fromElement)&&(Xr(b)||b[ps]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(b=t.relatedTarget||t.toElement,y=c,b=b?Xr(b):null,b!==null&&(A=Io(b),b!==A||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=c),y!==b)){if(P=rw,M="onMouseLeave",E="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(P=aw,M="onPointerLeave",E="onPointerEnter",w="pointer"),A=y==null?g:ha(y),x=b==null?g:ha(b),g=new P(M,w+"leave",y,t,d),g.target=A,g.relatedTarget=x,M=null,Xr(d)===c&&(P=new P(E,w+"enter",b,t,d),P.target=x,P.relatedTarget=A,M=P),A=M,y&&b)t:{for(P=y,E=b,w=0,x=P;x;x=ta(x))w++;for(x=0,M=E;M;M=ta(M))x++;for(;0<w-x;)P=ta(P),w--;for(;0<x-w;)E=ta(E),x--;for(;w--;){if(P===E||E!==null&&P===E.alternate)break t;P=ta(P),E=ta(E)}P=null}else P=null;y!==null&&_w(p,g,y,P,!1),b!==null&&A!==null&&_w(p,A,b,P,!0)}}e:{if(g=c?ha(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var W=Bk;else if(cw(g))if(TS)W=Hk;else{W=zk;var Y=$k}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(W=Wk);if(W&&(W=W(n,c))){ES(p,W,t,d);break e}Y&&Y(n,g,c),n==="focusout"&&(Y=g._wrapperState)&&Y.controlled&&g.type==="number"&&Cm(g,"number",g.value)}switch(Y=c?ha(c):window,n){case"focusin":(cw(Y)||Y.contentEditable==="true")&&(ua=Y,Fm=c,uu=null);break;case"focusout":uu=Fm=ua=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,mw(p,t,d);break;case"selectionchange":if(Kk)break;case"keydown":case"keyup":mw(p,t,d)}var R;if(lv)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else la?yS(n,t)&&(C="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(C="onCompositionStart");C&&(_S&&t.locale!=="ko"&&(la||C!=="onCompositionStart"?C==="onCompositionEnd"&&la&&(R=vS()):(Js=d,rv="value"in Js?Js.value:Js.textContent,la=!0)),Y=dd(c,C),0<Y.length&&(C=new ow(C,n,null,t,d),p.push({event:C,listeners:Y}),R?C.data=R:(R=wS(t),R!==null&&(C.data=R)))),(R=Lk?Vk(n,t):Fk(n,t))&&(c=dd(c,"onBeforeInput"),0<c.length&&(d=new ow("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:c}),d.data=R))}NS(p,e)})}function Du(n,e,t){return{instance:n,listener:e,currentTarget:t}}function dd(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Cu(n,t),r!=null&&i.unshift(Du(n,r,s)),r=Cu(n,e),r!=null&&i.push(Du(n,r,s))),n=n.return}return i}function ta(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _w(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=Cu(t,r),l!=null&&o.unshift(Du(t,l,a))):s||(l=Cu(t,r),l!=null&&o.push(Du(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Jk=/\r\n?/g,Zk=/\u0000|\uFFFD/g;function yw(n){return(typeof n=="string"?n:""+n).replace(Jk,`
`).replace(Zk,"")}function gh(n,e,t){if(e=yw(e),yw(n)!==e&&t)throw Error(Q(425))}function fd(){}var Um=null,Bm=null;function $m(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,ex=typeof clearTimeout=="function"?clearTimeout:void 0,ww=typeof Promise=="function"?Promise:void 0,tx=typeof queueMicrotask=="function"?queueMicrotask:typeof ww<"u"?function(n){return ww.resolve(null).then(n).catch(nx)}:zm;function nx(n){setTimeout(function(){throw n})}function Dp(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),ku(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);ku(e)}function or(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Ew(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),Ai="__reactFiber$"+Xa,Mu="__reactProps$"+Xa,ps="__reactContainer$"+Xa,Wm="__reactEvents$"+Xa,ix="__reactListeners$"+Xa,sx="__reactHandles$"+Xa;function Xr(n){var e=n[Ai];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ps]||t[Ai]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Ew(n);n!==null;){if(t=n[Ai])return t;n=Ew(n)}return e}n=t,t=n.parentNode}return null}function sc(n){return n=n[Ai]||n[ps],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ha(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Q(33))}function af(n){return n[Mu]||null}var Hm=[],da=-1;function Tr(n){return{current:n}}function Ye(n){0>da||(n.current=Hm[da],Hm[da]=null,da--)}function We(n,e){da++,Hm[da]=n.current,n.current=e}var gr={},Xt=Tr(gr),wn=Tr(!1),ro=gr;function Da(n,e){var t=n.type.contextTypes;if(!t)return gr;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function En(n){return n=n.childContextTypes,n!=null}function pd(){Ye(wn),Ye(Xt)}function Tw(n,e,t){if(Xt.current!==gr)throw Error(Q(168));We(Xt,e),We(wn,t)}function MS(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Q(108,$A(n)||"Unknown",s));return Je({},t,i)}function md(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||gr,ro=Xt.current,We(Xt,n),We(wn,wn.current),!0}function Sw(n,e,t){var i=n.stateNode;if(!i)throw Error(Q(169));t?(n=MS(n,e,ro),i.__reactInternalMemoizedMergedChildContext=n,Ye(wn),Ye(Xt),We(Xt,n)):Ye(wn),We(wn,t)}var is=null,lf=!1,Mp=!1;function OS(n){is===null?is=[n]:is.push(n)}function rx(n){lf=!0,OS(n)}function Sr(){if(!Mp&&is!==null){Mp=!0;var n=0,e=Oe;try{var t=is;for(Oe=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}is=null,lf=!1}catch(s){throw is!==null&&(is=is.slice(n+1)),oS(tv,Sr),s}finally{Oe=e,Mp=!1}}return null}var fa=[],pa=0,gd=null,vd=0,qn=[],Yn=0,oo=null,ss=1,rs="";function Kr(n,e){fa[pa++]=vd,fa[pa++]=gd,gd=n,vd=e}function LS(n,e,t){qn[Yn++]=ss,qn[Yn++]=rs,qn[Yn++]=oo,oo=n;var i=ss;n=rs;var s=32-ci(i)-1;i&=~(1<<s),t+=1;var r=32-ci(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ss=1<<32-ci(e)+s|t<<s|i,rs=r+n}else ss=1<<r|t<<s|i,rs=n}function cv(n){n.return!==null&&(Kr(n,1),LS(n,1,0))}function hv(n){for(;n===gd;)gd=fa[--pa],fa[pa]=null,vd=fa[--pa],fa[pa]=null;for(;n===oo;)oo=qn[--Yn],qn[Yn]=null,rs=qn[--Yn],qn[Yn]=null,ss=qn[--Yn],qn[Yn]=null}var Dn=null,Rn=null,Qe=!1,li=null;function VS(n,e){var t=Kn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Iw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Dn=n,Rn=or(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Dn=n,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=oo!==null?{id:ss,overflow:rs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Kn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Dn=n,Rn=null,!0):!1;default:return!1}}function qm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ym(n){if(Qe){var e=Rn;if(e){var t=e;if(!Iw(n,e)){if(qm(n))throw Error(Q(418));e=or(t.nextSibling);var i=Dn;e&&Iw(n,e)?VS(i,t):(n.flags=n.flags&-4097|2,Qe=!1,Dn=n)}}else{if(qm(n))throw Error(Q(418));n.flags=n.flags&-4097|2,Qe=!1,Dn=n}}}function bw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Dn=n}function vh(n){if(n!==Dn)return!1;if(!Qe)return bw(n),Qe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!$m(n.type,n.memoizedProps)),e&&(e=Rn)){if(qm(n))throw FS(),Error(Q(418));for(;e;)VS(n,e),e=or(e.nextSibling)}if(bw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Rn=or(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Rn=null}}else Rn=Dn?or(n.stateNode.nextSibling):null;return!0}function FS(){for(var n=Rn;n;)n=or(n.nextSibling)}function Ma(){Rn=Dn=null,Qe=!1}function dv(n){li===null?li=[n]:li.push(n)}var ox=Ts.ReactCurrentBatchConfig;function Bl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Q(309));var i=t.stateNode}if(!i)throw Error(Q(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(Q(284));if(!t._owner)throw Error(Q(290,n))}return n}function _h(n,e){throw n=Object.prototype.toString.call(e),Error(Q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Cw(n){var e=n._init;return e(n._payload)}function jS(n){function e(E,w){if(n){var x=E.deletions;x===null?(E.deletions=[w],E.flags|=16):x.push(w)}}function t(E,w){if(!n)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function i(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=cr(E,w),E.index=0,E.sibling=null,E}function r(E,w,x){return E.index=x,n?(x=E.alternate,x!==null?(x=x.index,x<w?(E.flags|=2,w):x):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return n&&E.alternate===null&&(E.flags|=2),E}function a(E,w,x,M){return w===null||w.tag!==6?(w=Bp(x,E.mode,M),w.return=E,w):(w=s(w,x),w.return=E,w)}function l(E,w,x,M){var W=x.type;return W===aa?d(E,w,x.props.children,M,x.key):w!==null&&(w.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ws&&Cw(W)===w.type)?(M=s(w,x.props),M.ref=Bl(E,w,x),M.return=E,M):(M=Yh(x.type,x.key,x.props,null,E.mode,M),M.ref=Bl(E,w,x),M.return=E,M)}function c(E,w,x,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=$p(x,E.mode,M),w.return=E,w):(w=s(w,x.children||[]),w.return=E,w)}function d(E,w,x,M,W){return w===null||w.tag!==7?(w=no(x,E.mode,M,W),w.return=E,w):(w=s(w,x),w.return=E,w)}function p(E,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Bp(""+w,E.mode,x),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ah:return x=Yh(w.type,w.key,w.props,null,E.mode,x),x.ref=Bl(E,null,w),x.return=E,x;case oa:return w=$p(w,E.mode,x),w.return=E,w;case Ws:var M=w._init;return p(E,M(w._payload),x)}if(Gl(w)||Ll(w))return w=no(w,E.mode,x,null),w.return=E,w;_h(E,w)}return null}function g(E,w,x,M){var W=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return W!==null?null:a(E,w,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ah:return x.key===W?l(E,w,x,M):null;case oa:return x.key===W?c(E,w,x,M):null;case Ws:return W=x._init,g(E,w,W(x._payload),M)}if(Gl(x)||Ll(x))return W!==null?null:d(E,w,x,M,null);_h(E,x)}return null}function y(E,w,x,M,W){if(typeof M=="string"&&M!==""||typeof M=="number")return E=E.get(x)||null,a(w,E,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ah:return E=E.get(M.key===null?x:M.key)||null,l(w,E,M,W);case oa:return E=E.get(M.key===null?x:M.key)||null,c(w,E,M,W);case Ws:var Y=M._init;return y(E,w,x,Y(M._payload),W)}if(Gl(M)||Ll(M))return E=E.get(x)||null,d(w,E,M,W,null);_h(w,M)}return null}function b(E,w,x,M){for(var W=null,Y=null,R=w,C=w=0,k=null;R!==null&&C<x.length;C++){R.index>C?(k=R,R=null):k=R.sibling;var N=g(E,R,x[C],M);if(N===null){R===null&&(R=k);break}n&&R&&N.alternate===null&&e(E,R),w=r(N,w,C),Y===null?W=N:Y.sibling=N,Y=N,R=k}if(C===x.length)return t(E,R),Qe&&Kr(E,C),W;if(R===null){for(;C<x.length;C++)R=p(E,x[C],M),R!==null&&(w=r(R,w,C),Y===null?W=R:Y.sibling=R,Y=R);return Qe&&Kr(E,C),W}for(R=i(E,R);C<x.length;C++)k=y(R,E,C,x[C],M),k!==null&&(n&&k.alternate!==null&&R.delete(k.key===null?C:k.key),w=r(k,w,C),Y===null?W=k:Y.sibling=k,Y=k);return n&&R.forEach(function(O){return e(E,O)}),Qe&&Kr(E,C),W}function P(E,w,x,M){var W=Ll(x);if(typeof W!="function")throw Error(Q(150));if(x=W.call(x),x==null)throw Error(Q(151));for(var Y=W=null,R=w,C=w=0,k=null,N=x.next();R!==null&&!N.done;C++,N=x.next()){R.index>C?(k=R,R=null):k=R.sibling;var O=g(E,R,N.value,M);if(O===null){R===null&&(R=k);break}n&&R&&O.alternate===null&&e(E,R),w=r(O,w,C),Y===null?W=O:Y.sibling=O,Y=O,R=k}if(N.done)return t(E,R),Qe&&Kr(E,C),W;if(R===null){for(;!N.done;C++,N=x.next())N=p(E,N.value,M),N!==null&&(w=r(N,w,C),Y===null?W=N:Y.sibling=N,Y=N);return Qe&&Kr(E,C),W}for(R=i(E,R);!N.done;C++,N=x.next())N=y(R,E,C,N.value,M),N!==null&&(n&&N.alternate!==null&&R.delete(N.key===null?C:N.key),w=r(N,w,C),Y===null?W=N:Y.sibling=N,Y=N);return n&&R.forEach(function(F){return e(E,F)}),Qe&&Kr(E,C),W}function A(E,w,x,M){if(typeof x=="object"&&x!==null&&x.type===aa&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ah:e:{for(var W=x.key,Y=w;Y!==null;){if(Y.key===W){if(W=x.type,W===aa){if(Y.tag===7){t(E,Y.sibling),w=s(Y,x.props.children),w.return=E,E=w;break e}}else if(Y.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ws&&Cw(W)===Y.type){t(E,Y.sibling),w=s(Y,x.props),w.ref=Bl(E,Y,x),w.return=E,E=w;break e}t(E,Y);break}else e(E,Y);Y=Y.sibling}x.type===aa?(w=no(x.props.children,E.mode,M,x.key),w.return=E,E=w):(M=Yh(x.type,x.key,x.props,null,E.mode,M),M.ref=Bl(E,w,x),M.return=E,E=M)}return o(E);case oa:e:{for(Y=x.key;w!==null;){if(w.key===Y)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){t(E,w.sibling),w=s(w,x.children||[]),w.return=E,E=w;break e}else{t(E,w);break}else e(E,w);w=w.sibling}w=$p(x,E.mode,M),w.return=E,E=w}return o(E);case Ws:return Y=x._init,A(E,w,Y(x._payload),M)}if(Gl(x))return b(E,w,x,M);if(Ll(x))return P(E,w,x,M);_h(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(t(E,w.sibling),w=s(w,x),w.return=E,E=w):(t(E,w),w=Bp(x,E.mode,M),w.return=E,E=w),o(E)):t(E,w)}return A}var Oa=jS(!0),US=jS(!1),_d=Tr(null),yd=null,ma=null,fv=null;function pv(){fv=ma=yd=null}function mv(n){var e=_d.current;Ye(_d),n._currentValue=e}function Km(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function ba(n,e){yd=n,fv=ma=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(yn=!0),n.firstContext=null)}function Gn(n){var e=n._currentValue;if(fv!==n)if(n={context:n,memoizedValue:e,next:null},ma===null){if(yd===null)throw Error(Q(308));ma=n,yd.dependencies={lanes:0,firstContext:n}}else ma=ma.next=n;return e}var Jr=null;function gv(n){Jr===null?Jr=[n]:Jr.push(n)}function BS(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,gv(e)):(t.next=s.next,s.next=t),e.interleaved=t,ms(n,i)}function ms(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Hs=!1;function vv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $S(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ar(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Pe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ms(n,t)}return s=i.interleaved,s===null?(e.next=e,gv(i)):(e.next=s.next,s.next=e),i.interleaved=e,ms(n,t)}function Bh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,nv(n,t)}}function Pw(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function wd(n,e,t,i){var s=n.updateQueue;Hs=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(r!==null){var p=s.baseState;o=0,d=c=l=null,a=r;do{var g=a.lane,y=a.eventTime;if((i&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=n,P=a;switch(g=e,y=t,P.tag){case 1:if(b=P.payload,typeof b=="function"){p=b.call(y,p,g);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=P.payload,g=typeof b=="function"?b.call(y,p,g):b,g==null)break e;p=Je({},p,g);break e;case 2:Hs=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=p):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);lo|=o,n.lanes=o,n.memoizedState=p}}function Aw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(Q(191,s));s.call(i)}}}var rc={},Ri=Tr(rc),Ou=Tr(rc),Lu=Tr(rc);function Zr(n){if(n===rc)throw Error(Q(174));return n}function _v(n,e){switch(We(Lu,e),We(Ou,n),We(Ri,rc),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Am(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Am(e,n)}Ye(Ri),We(Ri,e)}function La(){Ye(Ri),Ye(Ou),Ye(Lu)}function zS(n){Zr(Lu.current);var e=Zr(Ri.current),t=Am(e,n.type);e!==t&&(We(Ou,n),We(Ri,t))}function yv(n){Ou.current===n&&(Ye(Ri),Ye(Ou))}var Ge=Tr(0);function Ed(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Op=[];function wv(){for(var n=0;n<Op.length;n++)Op[n]._workInProgressVersionPrimary=null;Op.length=0}var $h=Ts.ReactCurrentDispatcher,Lp=Ts.ReactCurrentBatchConfig,ao=0,Xe=null,_t=null,At=null,Td=!1,cu=!1,Vu=0,ax=0;function Ht(){throw Error(Q(321))}function Ev(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!di(n[t],e[t]))return!1;return!0}function Tv(n,e,t,i,s,r){if(ao=r,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$h.current=n===null||n.memoizedState===null?hx:dx,n=t(i,s),cu){r=0;do{if(cu=!1,Vu=0,25<=r)throw Error(Q(301));r+=1,At=_t=null,e.updateQueue=null,$h.current=fx,n=t(i,s)}while(cu)}if($h.current=Sd,e=_t!==null&&_t.next!==null,ao=0,At=_t=Xe=null,Td=!1,e)throw Error(Q(300));return n}function Sv(){var n=Vu!==0;return Vu=0,n}function Pi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Xe.memoizedState=At=n:At=At.next=n,At}function Xn(){if(_t===null){var n=Xe.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var e=At===null?Xe.memoizedState:At.next;if(e!==null)At=e,_t=n;else{if(n===null)throw Error(Q(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},At===null?Xe.memoizedState=At=n:At=At.next=n}return At}function Fu(n,e){return typeof e=="function"?e(n):e}function Vp(n){var e=Xn(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var i=_t,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var d=c.lane;if((ao&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=i):l=l.next=p,Xe.lanes|=d,lo|=d}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,di(i,e.memoizedState)||(yn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Xe.lanes|=r,lo|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Fp(n){var e=Xn(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);di(r,e.memoizedState)||(yn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function WS(){}function HS(n,e){var t=Xe,i=Xn(),s=e(),r=!di(i.memoizedState,s);if(r&&(i.memoizedState=s,yn=!0),i=i.queue,Iv(KS.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||At!==null&&At.memoizedState.tag&1){if(t.flags|=2048,ju(9,YS.bind(null,t,i,s,e),void 0,null),xt===null)throw Error(Q(349));ao&30||qS(t,e,s)}return s}function qS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function YS(n,e,t,i){e.value=t,e.getSnapshot=i,QS(e)&&GS(n)}function KS(n,e,t){return t(function(){QS(e)&&GS(n)})}function QS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!di(n,t)}catch{return!0}}function GS(n){var e=ms(n,1);e!==null&&hi(e,n,1,-1)}function kw(n){var e=Pi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:n},e.queue=n,n=n.dispatch=cx.bind(null,Xe,n),[e.memoizedState,n]}function ju(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function XS(){return Xn().memoizedState}function zh(n,e,t,i){var s=Pi();Xe.flags|=n,s.memoizedState=ju(1|e,t,void 0,i===void 0?null:i)}function uf(n,e,t,i){var s=Xn();i=i===void 0?null:i;var r=void 0;if(_t!==null){var o=_t.memoizedState;if(r=o.destroy,i!==null&&Ev(i,o.deps)){s.memoizedState=ju(e,t,r,i);return}}Xe.flags|=n,s.memoizedState=ju(1|e,t,r,i)}function xw(n,e){return zh(8390656,8,n,e)}function Iv(n,e){return uf(2048,8,n,e)}function JS(n,e){return uf(4,2,n,e)}function ZS(n,e){return uf(4,4,n,e)}function eI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function tI(n,e,t){return t=t!=null?t.concat([n]):null,uf(4,4,eI.bind(null,e,n),t)}function bv(){}function nI(n,e){var t=Xn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Ev(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function iI(n,e){var t=Xn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Ev(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function sI(n,e,t){return ao&21?(di(t,e)||(t=uS(),Xe.lanes|=t,lo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,yn=!0),n.memoizedState=t)}function lx(n,e){var t=Oe;Oe=t!==0&&4>t?t:4,n(!0);var i=Lp.transition;Lp.transition={};try{n(!1),e()}finally{Oe=t,Lp.transition=i}}function rI(){return Xn().memoizedState}function ux(n,e,t){var i=ur(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},oI(n))aI(e,t);else if(t=BS(n,e,t,i),t!==null){var s=dn();hi(t,n,i,s),lI(t,e,i)}}function cx(n,e,t){var i=ur(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(oI(n))aI(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,di(a,o)){var l=e.interleaved;l===null?(s.next=s,gv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=BS(n,e,s,i),t!==null&&(s=dn(),hi(t,n,i,s),lI(t,e,i))}}function oI(n){var e=n.alternate;return n===Xe||e!==null&&e===Xe}function aI(n,e){cu=Td=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function lI(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,nv(n,t)}}var Sd={readContext:Gn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},hx={readContext:Gn,useCallback:function(n,e){return Pi().memoizedState=[n,e===void 0?null:e],n},useContext:Gn,useEffect:xw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,zh(4194308,4,eI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return zh(4194308,4,n,e)},useInsertionEffect:function(n,e){return zh(4,2,n,e)},useMemo:function(n,e){var t=Pi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Pi();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=ux.bind(null,Xe,n),[i.memoizedState,n]},useRef:function(n){var e=Pi();return n={current:n},e.memoizedState=n},useState:kw,useDebugValue:bv,useDeferredValue:function(n){return Pi().memoizedState=n},useTransition:function(){var n=kw(!1),e=n[0];return n=lx.bind(null,n[1]),Pi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Xe,s=Pi();if(Qe){if(t===void 0)throw Error(Q(407));t=t()}else{if(t=e(),xt===null)throw Error(Q(349));ao&30||qS(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,xw(KS.bind(null,i,r,n),[n]),i.flags|=2048,ju(9,YS.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=Pi(),e=xt.identifierPrefix;if(Qe){var t=rs,i=ss;t=(i&~(1<<32-ci(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Vu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=ax++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},dx={readContext:Gn,useCallback:nI,useContext:Gn,useEffect:Iv,useImperativeHandle:tI,useInsertionEffect:JS,useLayoutEffect:ZS,useMemo:iI,useReducer:Vp,useRef:XS,useState:function(){return Vp(Fu)},useDebugValue:bv,useDeferredValue:function(n){var e=Xn();return sI(e,_t.memoizedState,n)},useTransition:function(){var n=Vp(Fu)[0],e=Xn().memoizedState;return[n,e]},useMutableSource:WS,useSyncExternalStore:HS,useId:rI,unstable_isNewReconciler:!1},fx={readContext:Gn,useCallback:nI,useContext:Gn,useEffect:Iv,useImperativeHandle:tI,useInsertionEffect:JS,useLayoutEffect:ZS,useMemo:iI,useReducer:Fp,useRef:XS,useState:function(){return Fp(Fu)},useDebugValue:bv,useDeferredValue:function(n){var e=Xn();return _t===null?e.memoizedState=n:sI(e,_t.memoizedState,n)},useTransition:function(){var n=Fp(Fu)[0],e=Xn().memoizedState;return[n,e]},useMutableSource:WS,useSyncExternalStore:HS,useId:rI,unstable_isNewReconciler:!1};function ri(n,e){if(n&&n.defaultProps){e=Je({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Qm(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Je({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var cf={isMounted:function(n){return(n=n._reactInternals)?Io(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=dn(),s=ur(n),r=hs(i,s);r.payload=e,t!=null&&(r.callback=t),e=ar(n,r,s),e!==null&&(hi(e,n,s,i),Bh(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=dn(),s=ur(n),r=hs(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=ar(n,r,s),e!==null&&(hi(e,n,s,i),Bh(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=dn(),i=ur(n),s=hs(t,i);s.tag=2,e!=null&&(s.callback=e),e=ar(n,s,i),e!==null&&(hi(e,n,i,t),Bh(e,n,i))}};function Rw(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Ru(t,i)||!Ru(s,r):!0}function uI(n,e,t){var i=!1,s=gr,r=e.contextType;return typeof r=="object"&&r!==null?r=Gn(r):(s=En(e)?ro:Xt.current,i=e.contextTypes,r=(i=i!=null)?Da(n,s):gr),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cf,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function Nw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&cf.enqueueReplaceState(e,e.state,null)}function Gm(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},vv(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Gn(r):(r=En(e)?ro:Xt.current,s.context=Da(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Qm(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cf.enqueueReplaceState(s,s.state,null),wd(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Va(n,e){try{var t="",i=e;do t+=BA(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function jp(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Xm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var px=typeof WeakMap=="function"?WeakMap:Map;function cI(n,e,t){t=hs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){bd||(bd=!0,ag=i),Xm(n,e)},t}function hI(n,e,t){t=hs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){Xm(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Xm(n,e),typeof i!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Dw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new px;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=Ax.bind(null,n,e,t),e.then(n,n))}function Mw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Ow(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=hs(-1,1),e.tag=2,ar(t,e,1))),t.lanes|=1),n)}var mx=Ts.ReactCurrentOwner,yn=!1;function cn(n,e,t,i){e.child=n===null?US(e,null,t,i):Oa(e,n.child,t,i)}function Lw(n,e,t,i,s){t=t.render;var r=e.ref;return ba(e,s),i=Tv(n,e,t,i,r,s),t=Sv(),n!==null&&!yn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,gs(n,e,s)):(Qe&&t&&cv(e),e.flags|=1,cn(n,e,i,s),e.child)}function Vw(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!Dv(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,dI(n,e,r,i,s)):(n=Yh(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Ru,t(o,i)&&n.ref===e.ref)return gs(n,e,s)}return e.flags|=1,n=cr(r,i),n.ref=e.ref,n.return=e,e.child=n}function dI(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Ru(r,i)&&n.ref===e.ref)if(yn=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(yn=!0);else return e.lanes=n.lanes,gs(n,e,s)}return Jm(n,e,t,i,s)}function fI(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(va,xn),xn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,We(va,xn),xn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,We(va,xn),xn|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,We(va,xn),xn|=i;return cn(n,e,s,t),e.child}function pI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Jm(n,e,t,i,s){var r=En(t)?ro:Xt.current;return r=Da(e,r),ba(e,s),t=Tv(n,e,t,i,r,s),i=Sv(),n!==null&&!yn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,gs(n,e,s)):(Qe&&i&&cv(e),e.flags|=1,cn(n,e,t,s),e.child)}function Fw(n,e,t,i,s){if(En(t)){var r=!0;md(e)}else r=!1;if(ba(e,s),e.stateNode===null)Wh(n,e),uI(e,t,i),Gm(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Gn(c):(c=En(t)?ro:Xt.current,c=Da(e,c));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Nw(e,o,i,c),Hs=!1;var g=e.memoizedState;o.state=g,wd(e,i,o,s),l=e.memoizedState,a!==i||g!==l||wn.current||Hs?(typeof d=="function"&&(Qm(e,t,d,i),l=e.memoizedState),(a=Hs||Rw(e,t,a,i,g,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,$S(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:ri(e.type,a),o.props=c,p=e.pendingProps,g=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Gn(l):(l=En(t)?ro:Xt.current,l=Da(e,l));var y=t.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==l)&&Nw(e,o,i,l),Hs=!1,g=e.memoizedState,o.state=g,wd(e,i,o,s);var b=e.memoizedState;a!==p||g!==b||wn.current||Hs?(typeof y=="function"&&(Qm(e,t,y,i),b=e.memoizedState),(c=Hs||Rw(e,t,c,i,g,b,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),o.props=i,o.state=b,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),i=!1)}return Zm(n,e,t,i,r,s)}function Zm(n,e,t,i,s,r){pI(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&Sw(e,t,!1),gs(n,e,r);i=e.stateNode,mx.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Oa(e,n.child,null,r),e.child=Oa(e,null,a,r)):cn(n,e,a,r),e.memoizedState=i.state,s&&Sw(e,t,!0),e.child}function mI(n){var e=n.stateNode;e.pendingContext?Tw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Tw(n,e.context,!1),_v(n,e.containerInfo)}function jw(n,e,t,i,s){return Ma(),dv(s),e.flags|=256,cn(n,e,t,i),e.child}var eg={dehydrated:null,treeContext:null,retryLane:0};function tg(n){return{baseLanes:n,cachePool:null,transitions:null}}function gI(n,e,t){var i=e.pendingProps,s=Ge.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),We(Ge,s&1),n===null)return Ym(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=ff(o,i,0,null),n=no(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=tg(t),e.memoizedState=eg,n):Cv(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return gx(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=cr(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=cr(a,r):(r=no(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?tg(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=eg,i}return r=n.child,n=r.sibling,i=cr(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Cv(n,e){return e=ff({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function yh(n,e,t,i){return i!==null&&dv(i),Oa(e,n.child,null,t),n=Cv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function gx(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=jp(Error(Q(422))),yh(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=ff({mode:"visible",children:i.children},s,0,null),r=no(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Oa(e,n.child,null,o),e.child.memoizedState=tg(o),e.memoizedState=eg,r);if(!(e.mode&1))return yh(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(Q(419)),i=jp(r,i,void 0),yh(n,e,o,i)}if(a=(o&n.childLanes)!==0,yn||a){if(i=xt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,ms(n,s),hi(i,n,s,-1))}return Nv(),i=jp(Error(Q(421))),yh(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=kx.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,Rn=or(s.nextSibling),Dn=e,Qe=!0,li=null,n!==null&&(qn[Yn++]=ss,qn[Yn++]=rs,qn[Yn++]=oo,ss=n.id,rs=n.overflow,oo=e),e=Cv(e,i.children),e.flags|=4096,e)}function Uw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Km(n.return,e,t)}function Up(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function vI(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(cn(n,e,i.children,t),i=Ge.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Uw(n,t,e);else if(n.tag===19)Uw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(We(Ge,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Ed(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Up(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Ed(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Up(e,!0,t,null,r);break;case"together":Up(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function gs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),lo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Q(153));if(e.child!==null){for(n=e.child,t=cr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=cr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function vx(n,e,t){switch(e.tag){case 3:mI(e),Ma();break;case 5:zS(e);break;case 1:En(e.type)&&md(e);break;case 4:_v(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;We(_d,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(We(Ge,Ge.current&1),e.flags|=128,null):t&e.child.childLanes?gI(n,e,t):(We(Ge,Ge.current&1),n=gs(n,e,t),n!==null?n.sibling:null);We(Ge,Ge.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return vI(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),We(Ge,Ge.current),i)break;return null;case 22:case 23:return e.lanes=0,fI(n,e,t)}return gs(n,e,t)}var _I,ng,yI,wI;_I=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ng=function(){};yI=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Zr(Ri.current);var r=null;switch(t){case"input":s=Im(n,s),i=Im(n,i),r=[];break;case"select":s=Je({},s,{value:void 0}),i=Je({},i,{value:void 0}),r=[];break;case"textarea":s=Pm(n,s),i=Pm(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=fd)}km(t,i);var o;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Iu.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Iu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};wI=function(n,e,t,i){t!==i&&(e.flags|=4)};function $l(n,e){if(!Qe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function qt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function _x(n,e,t){var i=e.pendingProps;switch(hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return En(e.type)&&pd(),qt(e),null;case 3:return i=e.stateNode,La(),Ye(wn),Ye(Xt),wv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(vh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,li!==null&&(cg(li),li=null))),ng(n,e),qt(e),null;case 5:yv(e);var s=Zr(Lu.current);if(t=e.type,n!==null&&e.stateNode!=null)yI(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return qt(e),null}if(n=Zr(Ri.current),vh(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Ai]=e,i[Mu]=r,n=(e.mode&1)!==0,t){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(s=0;s<Jl.length;s++)qe(Jl[s],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":Qy(i,r),qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},qe("invalid",i);break;case"textarea":Xy(i,r),qe("invalid",i)}km(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&gh(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&gh(i.textContent,a,n),s=["children",""+a]):Iu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",i)}switch(t){case"input":lh(i),Gy(i,r,!0);break;case"textarea":lh(i),Jy(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=fd)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=KT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ai]=e,n[Mu]=i,_I(n,e,!1,!1),e.stateNode=n;e:{switch(o=xm(t,i),t){case"dialog":qe("cancel",n),qe("close",n),s=i;break;case"iframe":case"object":case"embed":qe("load",n),s=i;break;case"video":case"audio":for(s=0;s<Jl.length;s++)qe(Jl[s],n);s=i;break;case"source":qe("error",n),s=i;break;case"img":case"image":case"link":qe("error",n),qe("load",n),s=i;break;case"details":qe("toggle",n),s=i;break;case"input":Qy(n,i),s=Im(n,i),qe("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Je({},i,{value:void 0}),qe("invalid",n);break;case"textarea":Xy(n,i),s=Pm(n,i),qe("invalid",n);break;default:s=i}km(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?XT(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QT(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&bu(n,l):typeof l=="number"&&bu(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Iu.hasOwnProperty(r)?l!=null&&r==="onScroll"&&qe("scroll",n):l!=null&&Gg(n,r,l,o))}switch(t){case"input":lh(n),Gy(n,i,!1);break;case"textarea":lh(n),Jy(n);break;case"option":i.value!=null&&n.setAttribute("value",""+mr(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?Ea(n,!!i.multiple,r,!1):i.defaultValue!=null&&Ea(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=fd)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(n&&e.stateNode!=null)wI(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(t=Zr(Lu.current),Zr(Ri.current),vh(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ai]=e,(r=i.nodeValue!==t)&&(n=Dn,n!==null))switch(n.tag){case 3:gh(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gh(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ai]=e,e.stateNode=i}return qt(e),null;case 13:if(Ye(Ge),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qe&&Rn!==null&&e.mode&1&&!(e.flags&128))FS(),Ma(),e.flags|=98560,r=!1;else if(r=vh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(Q(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Q(317));r[Ai]=e}else Ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),r=!1}else li!==null&&(cg(li),li=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ge.current&1?yt===0&&(yt=3):Nv())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return La(),ng(n,e),n===null&&Nu(e.stateNode.containerInfo),qt(e),null;case 10:return mv(e.type._context),qt(e),null;case 17:return En(e.type)&&pd(),qt(e),null;case 19:if(Ye(Ge),r=e.memoizedState,r===null)return qt(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)$l(r,!1);else{if(yt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Ed(n),o!==null){for(e.flags|=128,$l(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return We(Ge,Ge.current&1|2),e.child}n=n.sibling}r.tail!==null&&at()>Fa&&(e.flags|=128,i=!0,$l(r,!1),e.lanes=4194304)}else{if(!i)if(n=Ed(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),$l(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Qe)return qt(e),null}else 2*at()-r.renderingStartTime>Fa&&t!==1073741824&&(e.flags|=128,i=!0,$l(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=at(),e.sibling=null,t=Ge.current,We(Ge,i?t&1|2:t&1),e):(qt(e),null);case 22:case 23:return Rv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?xn&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function yx(n,e){switch(hv(e),e.tag){case 1:return En(e.type)&&pd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return La(),Ye(wn),Ye(Xt),wv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return yv(e),null;case 13:if(Ye(Ge),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ma()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ye(Ge),null;case 4:return La(),null;case 10:return mv(e.type._context),null;case 22:case 23:return Rv(),null;case 24:return null;default:return null}}var wh=!1,Qt=!1,wx=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ga(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){nt(n,e,i)}else t.current=null}function ig(n,e,t){try{t()}catch(i){nt(n,e,i)}}var Bw=!1;function Ex(n,e){if(Um=cd,n=bS(),uv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=n,g=null;t:for(;;){for(var y;p!==t||s!==0&&p.nodeType!==3||(a=o+s),p!==r||i!==0&&p.nodeType!==3||(l=o+i),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===n)break t;if(g===t&&++c===s&&(a=o),g===r&&++d===i&&(l=o),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Bm={focusedElem:n,selectionRange:t},cd=!1,ie=e;ie!==null;)if(e=ie,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ie=n;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var P=b.memoizedProps,A=b.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:ri(e.type,P),A);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(M){nt(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}return b=Bw,Bw=!1,b}function hu(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&ig(e,t,r)}s=s.next}while(s!==i)}}function hf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function sg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function EI(n){var e=n.alternate;e!==null&&(n.alternate=null,EI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ai],delete e[Mu],delete e[Wm],delete e[ix],delete e[sx])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function TI(n){return n.tag===5||n.tag===3||n.tag===4}function $w(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||TI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=fd));else if(i!==4&&(n=n.child,n!==null))for(rg(n,e,t),n=n.sibling;n!==null;)rg(n,e,t),n=n.sibling}function og(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(og(n,e,t),n=n.sibling;n!==null;)og(n,e,t),n=n.sibling}var Dt=null,oi=!1;function Bs(n,e,t){for(t=t.child;t!==null;)SI(n,e,t),t=t.sibling}function SI(n,e,t){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(nf,t)}catch{}switch(t.tag){case 5:Qt||ga(t,e);case 6:var i=Dt,s=oi;Dt=null,Bs(n,e,t),Dt=i,oi=s,Dt!==null&&(oi?(n=Dt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Dt.removeChild(t.stateNode));break;case 18:Dt!==null&&(oi?(n=Dt,t=t.stateNode,n.nodeType===8?Dp(n.parentNode,t):n.nodeType===1&&Dp(n,t),ku(n)):Dp(Dt,t.stateNode));break;case 4:i=Dt,s=oi,Dt=t.stateNode.containerInfo,oi=!0,Bs(n,e,t),Dt=i,oi=s;break;case 0:case 11:case 14:case 15:if(!Qt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ig(t,e,o),s=s.next}while(s!==i)}Bs(n,e,t);break;case 1:if(!Qt&&(ga(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){nt(t,e,a)}Bs(n,e,t);break;case 21:Bs(n,e,t);break;case 22:t.mode&1?(Qt=(i=Qt)||t.memoizedState!==null,Bs(n,e,t),Qt=i):Bs(n,e,t);break;default:Bs(n,e,t)}}function zw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new wx),e.forEach(function(i){var s=xx.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function si(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dt=a.stateNode,oi=!1;break e;case 3:Dt=a.stateNode.containerInfo,oi=!0;break e;case 4:Dt=a.stateNode.containerInfo,oi=!0;break e}a=a.return}if(Dt===null)throw Error(Q(160));SI(r,o,s),Dt=null,oi=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){nt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)II(e,n),e=e.sibling}function II(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(si(e,n),Ii(n),i&4){try{hu(3,n,n.return),hf(3,n)}catch(P){nt(n,n.return,P)}try{hu(5,n,n.return)}catch(P){nt(n,n.return,P)}}break;case 1:si(e,n),Ii(n),i&512&&t!==null&&ga(t,t.return);break;case 5:if(si(e,n),Ii(n),i&512&&t!==null&&ga(t,t.return),n.flags&32){var s=n.stateNode;try{bu(s,"")}catch(P){nt(n,n.return,P)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&qT(s,r),xm(a,o);var c=xm(a,r);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?XT(s,p):d==="dangerouslySetInnerHTML"?QT(s,p):d==="children"?bu(s,p):Gg(s,d,p,c)}switch(a){case"input":bm(s,r);break;case"textarea":YT(s,r);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var y=r.value;y!=null?Ea(s,!!r.multiple,y,!1):g!==!!r.multiple&&(r.defaultValue!=null?Ea(s,!!r.multiple,r.defaultValue,!0):Ea(s,!!r.multiple,r.multiple?[]:"",!1))}s[Mu]=r}catch(P){nt(n,n.return,P)}}break;case 6:if(si(e,n),Ii(n),i&4){if(n.stateNode===null)throw Error(Q(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(P){nt(n,n.return,P)}}break;case 3:if(si(e,n),Ii(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{ku(e.containerInfo)}catch(P){nt(n,n.return,P)}break;case 4:si(e,n),Ii(n);break;case 13:si(e,n),Ii(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(kv=at())),i&4&&zw(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Qt=(c=Qt)||d,si(e,n),Qt=c):si(e,n),Ii(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(ie=n,d=n.child;d!==null;){for(p=ie=d;ie!==null;){switch(g=ie,y=g.child,g.tag){case 0:case 11:case 14:case 15:hu(4,g,g.return);break;case 1:ga(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){i=g,t=g.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(P){nt(i,t,P)}}break;case 5:ga(g,g.return);break;case 22:if(g.memoizedState!==null){Hw(p);continue}}y!==null?(y.return=g,ie=y):Hw(p)}d=d.sibling}e:for(d=null,p=n;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GT("display",o))}catch(P){nt(n,n.return,P)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(P){nt(n,n.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:si(e,n),Ii(n),i&4&&zw(n);break;case 21:break;default:si(e,n),Ii(n)}}function Ii(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(TI(t)){var i=t;break e}t=t.return}throw Error(Q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(bu(s,""),i.flags&=-33);var r=$w(n);og(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=$w(n);rg(n,a,o);break;default:throw Error(Q(161))}}catch(l){nt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Tx(n,e,t){ie=n,bI(n)}function bI(n,e,t){for(var i=(n.mode&1)!==0;ie!==null;){var s=ie,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||wh;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Qt;a=wh;var c=Qt;if(wh=o,(Qt=l)&&!c)for(ie=s;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?qw(s):l!==null?(l.return=o,ie=l):qw(s);for(;r!==null;)ie=r,bI(r),r=r.sibling;ie=s,wh=a,Qt=c}Ww(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,ie=r):Ww(n)}}function Ww(n){for(;ie!==null;){var e=ie;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||hf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Qt)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ri(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Aw(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Aw(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&ku(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Qt||e.flags&512&&sg(e)}catch(g){nt(e,e.return,g)}}if(e===n){ie=null;break}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}}function Hw(n){for(;ie!==null;){var e=ie;if(e===n){ie=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ie=t;break}ie=e.return}}function qw(n){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hf(4,e)}catch(l){nt(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){nt(e,s,l)}}var r=e.return;try{sg(e)}catch(l){nt(e,r,l)}break;case 5:var o=e.return;try{sg(e)}catch(l){nt(e,o,l)}}}catch(l){nt(e,e.return,l)}if(e===n){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var Sx=Math.ceil,Id=Ts.ReactCurrentDispatcher,Pv=Ts.ReactCurrentOwner,Qn=Ts.ReactCurrentBatchConfig,Pe=0,xt=null,ht=null,Ft=0,xn=0,va=Tr(0),yt=0,Uu=null,lo=0,df=0,Av=0,du=null,_n=null,kv=0,Fa=1/0,ns=null,bd=!1,ag=null,lr=null,Eh=!1,Zs=null,Cd=0,fu=0,lg=null,Hh=-1,qh=0;function dn(){return Pe&6?at():Hh!==-1?Hh:Hh=at()}function ur(n){return n.mode&1?Pe&2&&Ft!==0?Ft&-Ft:ox.transition!==null?(qh===0&&(qh=uS()),qh):(n=Oe,n!==0||(n=window.event,n=n===void 0?16:gS(n.type)),n):1}function hi(n,e,t,i){if(50<fu)throw fu=0,lg=null,Error(Q(185));nc(n,t,i),(!(Pe&2)||n!==xt)&&(n===xt&&(!(Pe&2)&&(df|=t),yt===4&&Ys(n,Ft)),Tn(n,i),t===1&&Pe===0&&!(e.mode&1)&&(Fa=at()+500,lf&&Sr()))}function Tn(n,e){var t=n.callbackNode;ok(n,e);var i=ud(n,n===xt?Ft:0);if(i===0)t!==null&&tw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&tw(t),e===1)n.tag===0?rx(Yw.bind(null,n)):OS(Yw.bind(null,n)),tx(function(){!(Pe&6)&&Sr()}),t=null;else{switch(cS(i)){case 1:t=tv;break;case 4:t=aS;break;case 16:t=ld;break;case 536870912:t=lS;break;default:t=ld}t=DI(t,CI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function CI(n,e){if(Hh=-1,qh=0,Pe&6)throw Error(Q(327));var t=n.callbackNode;if(Ca()&&n.callbackNode!==t)return null;var i=ud(n,n===xt?Ft:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Pd(n,i);else{e=i;var s=Pe;Pe|=2;var r=AI();(xt!==n||Ft!==e)&&(ns=null,Fa=at()+500,to(n,e));do try{Cx();break}catch(a){PI(n,a)}while(!0);pv(),Id.current=r,Pe=s,ht!==null?e=0:(xt=null,Ft=0,e=yt)}if(e!==0){if(e===2&&(s=Om(n),s!==0&&(i=s,e=ug(n,s))),e===1)throw t=Uu,to(n,0),Ys(n,i),Tn(n,at()),t;if(e===6)Ys(n,i);else{if(s=n.current.alternate,!(i&30)&&!Ix(s)&&(e=Pd(n,i),e===2&&(r=Om(n),r!==0&&(i=r,e=ug(n,r))),e===1))throw t=Uu,to(n,0),Ys(n,i),Tn(n,at()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:Qr(n,_n,ns);break;case 3:if(Ys(n,i),(i&130023424)===i&&(e=kv+500-at(),10<e)){if(ud(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){dn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=zm(Qr.bind(null,n,_n,ns),e);break}Qr(n,_n,ns);break;case 4:if(Ys(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-ci(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=at()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sx(i/1960))-i,10<i){n.timeoutHandle=zm(Qr.bind(null,n,_n,ns),i);break}Qr(n,_n,ns);break;case 5:Qr(n,_n,ns);break;default:throw Error(Q(329))}}}return Tn(n,at()),n.callbackNode===t?CI.bind(null,n):null}function ug(n,e){var t=du;return n.current.memoizedState.isDehydrated&&(to(n,e).flags|=256),n=Pd(n,e),n!==2&&(e=_n,_n=t,e!==null&&cg(e)),n}function cg(n){_n===null?_n=n:_n.push.apply(_n,n)}function Ix(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!di(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ys(n,e){for(e&=~Av,e&=~df,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ci(e),i=1<<t;n[t]=-1,e&=~i}}function Yw(n){if(Pe&6)throw Error(Q(327));Ca();var e=ud(n,0);if(!(e&1))return Tn(n,at()),null;var t=Pd(n,e);if(n.tag!==0&&t===2){var i=Om(n);i!==0&&(e=i,t=ug(n,i))}if(t===1)throw t=Uu,to(n,0),Ys(n,e),Tn(n,at()),t;if(t===6)throw Error(Q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Qr(n,_n,ns),Tn(n,at()),null}function xv(n,e){var t=Pe;Pe|=1;try{return n(e)}finally{Pe=t,Pe===0&&(Fa=at()+500,lf&&Sr())}}function uo(n){Zs!==null&&Zs.tag===0&&!(Pe&6)&&Ca();var e=Pe;Pe|=1;var t=Qn.transition,i=Oe;try{if(Qn.transition=null,Oe=1,n)return n()}finally{Oe=i,Qn.transition=t,Pe=e,!(Pe&6)&&Sr()}}function Rv(){xn=va.current,Ye(va)}function to(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,ex(t)),ht!==null)for(t=ht.return;t!==null;){var i=t;switch(hv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&pd();break;case 3:La(),Ye(wn),Ye(Xt),wv();break;case 5:yv(i);break;case 4:La();break;case 13:Ye(Ge);break;case 19:Ye(Ge);break;case 10:mv(i.type._context);break;case 22:case 23:Rv()}t=t.return}if(xt=n,ht=n=cr(n.current,null),Ft=xn=e,yt=0,Uu=null,Av=df=lo=0,_n=du=null,Jr!==null){for(e=0;e<Jr.length;e++)if(t=Jr[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Jr=null}return n}function PI(n,e){do{var t=ht;try{if(pv(),$h.current=Sd,Td){for(var i=Xe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Td=!1}if(ao=0,At=_t=Xe=null,cu=!1,Vu=0,Pv.current=null,t===null||t.return===null){yt=1,Uu=e,ht=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=Ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Mw(o);if(y!==null){y.flags&=-257,Ow(y,o,a,r,e),y.mode&1&&Dw(r,c,e),e=y,l=c;var b=e.updateQueue;if(b===null){var P=new Set;P.add(l),e.updateQueue=P}else b.add(l);break e}else{if(!(e&1)){Dw(r,c,e),Nv();break e}l=Error(Q(426))}}else if(Qe&&a.mode&1){var A=Mw(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ow(A,o,a,r,e),dv(Va(l,a));break e}}r=l=Va(l,a),yt!==4&&(yt=2),du===null?du=[r]:du.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var E=cI(r,l,e);Pw(r,E);break e;case 1:a=l;var w=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(lr===null||!lr.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var M=hI(r,a,e);Pw(r,M);break e}}r=r.return}while(r!==null)}xI(t)}catch(W){e=W,ht===t&&t!==null&&(ht=t=t.return);continue}break}while(!0)}function AI(){var n=Id.current;return Id.current=Sd,n===null?Sd:n}function Nv(){(yt===0||yt===3||yt===2)&&(yt=4),xt===null||!(lo&268435455)&&!(df&268435455)||Ys(xt,Ft)}function Pd(n,e){var t=Pe;Pe|=2;var i=AI();(xt!==n||Ft!==e)&&(ns=null,to(n,e));do try{bx();break}catch(s){PI(n,s)}while(!0);if(pv(),Pe=t,Id.current=i,ht!==null)throw Error(Q(261));return xt=null,Ft=0,yt}function bx(){for(;ht!==null;)kI(ht)}function Cx(){for(;ht!==null&&!XA();)kI(ht)}function kI(n){var e=NI(n.alternate,n,xn);n.memoizedProps=n.pendingProps,e===null?xI(n):ht=e,Pv.current=null}function xI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=yx(t,e),t!==null){t.flags&=32767,ht=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yt=6,ht=null;return}}else if(t=_x(t,e,xn),t!==null){ht=t;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=n}while(e!==null);yt===0&&(yt=5)}function Qr(n,e,t){var i=Oe,s=Qn.transition;try{Qn.transition=null,Oe=1,Px(n,e,t,i)}finally{Qn.transition=s,Oe=i}return null}function Px(n,e,t,i){do Ca();while(Zs!==null);if(Pe&6)throw Error(Q(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Q(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(ak(n,r),n===xt&&(ht=xt=null,Ft=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Eh||(Eh=!0,DI(ld,function(){return Ca(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Qn.transition,Qn.transition=null;var o=Oe;Oe=1;var a=Pe;Pe|=4,Pv.current=null,Ex(n,t),II(t,n),Yk(Bm),cd=!!Um,Bm=Um=null,n.current=t,Tx(t),JA(),Pe=a,Oe=o,Qn.transition=r}else n.current=t;if(Eh&&(Eh=!1,Zs=n,Cd=s),r=n.pendingLanes,r===0&&(lr=null),tk(t.stateNode),Tn(n,at()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(bd)throw bd=!1,n=ag,ag=null,n;return Cd&1&&n.tag!==0&&Ca(),r=n.pendingLanes,r&1?n===lg?fu++:(fu=0,lg=n):fu=0,Sr(),null}function Ca(){if(Zs!==null){var n=cS(Cd),e=Qn.transition,t=Oe;try{if(Qn.transition=null,Oe=16>n?16:n,Zs===null)var i=!1;else{if(n=Zs,Zs=null,Cd=0,Pe&6)throw Error(Q(331));var s=Pe;for(Pe|=4,ie=n.current;ie!==null;){var r=ie,o=r.child;if(ie.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:hu(8,d,r)}var p=d.child;if(p!==null)p.return=d,ie=p;else for(;ie!==null;){d=ie;var g=d.sibling,y=d.return;if(EI(d),d===c){ie=null;break}if(g!==null){g.return=y,ie=g;break}ie=y}}}var b=r.alternate;if(b!==null){var P=b.child;if(P!==null){b.child=null;do{var A=P.sibling;P.sibling=null,P=A}while(P!==null)}}ie=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,ie=o;else e:for(;ie!==null;){if(r=ie,r.flags&2048)switch(r.tag){case 0:case 11:case 15:hu(9,r,r.return)}var E=r.sibling;if(E!==null){E.return=r.return,ie=E;break e}ie=r.return}}var w=n.current;for(ie=w;ie!==null;){o=ie;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ie=x;else e:for(o=w;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hf(9,a)}}catch(W){nt(a,a.return,W)}if(a===o){ie=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,ie=M;break e}ie=a.return}}if(Pe=s,Sr(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(nf,n)}catch{}i=!0}return i}finally{Oe=t,Qn.transition=e}}return!1}function Kw(n,e,t){e=Va(t,e),e=cI(n,e,1),n=ar(n,e,1),e=dn(),n!==null&&(nc(n,1,e),Tn(n,e))}function nt(n,e,t){if(n.tag===3)Kw(n,n,t);else for(;e!==null;){if(e.tag===3){Kw(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lr===null||!lr.has(i))){n=Va(t,n),n=hI(e,n,1),e=ar(e,n,1),n=dn(),e!==null&&(nc(e,1,n),Tn(e,n));break}}e=e.return}}function Ax(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=dn(),n.pingedLanes|=n.suspendedLanes&t,xt===n&&(Ft&t)===t&&(yt===4||yt===3&&(Ft&130023424)===Ft&&500>at()-kv?to(n,0):Av|=t),Tn(n,e)}function RI(n,e){e===0&&(n.mode&1?(e=hh,hh<<=1,!(hh&130023424)&&(hh=4194304)):e=1);var t=dn();n=ms(n,e),n!==null&&(nc(n,e,t),Tn(n,t))}function kx(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),RI(n,t)}function xx(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),RI(n,t)}var NI;NI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||wn.current)yn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return yn=!1,vx(n,e,t);yn=!!(n.flags&131072)}else yn=!1,Qe&&e.flags&1048576&&LS(e,vd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Wh(n,e),n=e.pendingProps;var s=Da(e,Xt.current);ba(e,t),s=Tv(null,e,i,n,s,t);var r=Sv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(i)?(r=!0,md(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vv(e),s.updater=cf,e.stateNode=s,s._reactInternals=e,Gm(e,i,n,t),e=Zm(null,e,i,!0,r,t)):(e.tag=0,Qe&&r&&cv(e),cn(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Wh(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Nx(i),n=ri(i,n),s){case 0:e=Jm(null,e,i,n,t);break e;case 1:e=Fw(null,e,i,n,t);break e;case 11:e=Lw(null,e,i,n,t);break e;case 14:e=Vw(null,e,i,ri(i.type,n),t);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ri(i,s),Jm(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ri(i,s),Fw(n,e,i,s,t);case 3:e:{if(mI(e),n===null)throw Error(Q(387));i=e.pendingProps,r=e.memoizedState,s=r.element,$S(n,e),wd(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Va(Error(Q(423)),e),e=jw(n,e,i,t,s);break e}else if(i!==s){s=Va(Error(Q(424)),e),e=jw(n,e,i,t,s);break e}else for(Rn=or(e.stateNode.containerInfo.firstChild),Dn=e,Qe=!0,li=null,t=US(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ma(),i===s){e=gs(n,e,t);break e}cn(n,e,i,t)}e=e.child}return e;case 5:return zS(e),n===null&&Ym(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,$m(i,s)?o=null:r!==null&&$m(i,r)&&(e.flags|=32),pI(n,e),cn(n,e,o,t),e.child;case 6:return n===null&&Ym(e),null;case 13:return gI(n,e,t);case 4:return _v(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Oa(e,null,i,t):cn(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ri(i,s),Lw(n,e,i,s,t);case 7:return cn(n,e,e.pendingProps,t),e.child;case 8:return cn(n,e,e.pendingProps.children,t),e.child;case 12:return cn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,We(_d,i._currentValue),i._currentValue=o,r!==null)if(di(r.value,o)){if(r.children===s.children&&!wn.current){e=gs(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=hs(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),Km(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(Q(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Km(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}cn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ba(e,t),s=Gn(s),i=i(s),e.flags|=1,cn(n,e,i,t),e.child;case 14:return i=e.type,s=ri(i,e.pendingProps),s=ri(i.type,s),Vw(n,e,i,s,t);case 15:return dI(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ri(i,s),Wh(n,e),e.tag=1,En(i)?(n=!0,md(e)):n=!1,ba(e,t),uI(e,i,s),Gm(e,i,s,t),Zm(null,e,i,!0,n,t);case 19:return vI(n,e,t);case 22:return fI(n,e,t)}throw Error(Q(156,e.tag))};function DI(n,e){return oS(n,e)}function Rx(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(n,e,t,i){return new Rx(n,e,t,i)}function Dv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Nx(n){if(typeof n=="function")return Dv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Jg)return 11;if(n===Zg)return 14}return 2}function cr(n,e){var t=n.alternate;return t===null?(t=Kn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Yh(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")Dv(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case aa:return no(t.children,s,r,e);case Xg:o=8,s|=8;break;case wm:return n=Kn(12,t,e,s|2),n.elementType=wm,n.lanes=r,n;case Em:return n=Kn(13,t,e,s),n.elementType=Em,n.lanes=r,n;case Tm:return n=Kn(19,t,e,s),n.elementType=Tm,n.lanes=r,n;case zT:return ff(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case BT:o=10;break e;case $T:o=9;break e;case Jg:o=11;break e;case Zg:o=14;break e;case Ws:o=16,i=null;break e}throw Error(Q(130,n==null?n:typeof n,""))}return e=Kn(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function no(n,e,t,i){return n=Kn(7,n,i,e),n.lanes=t,n}function ff(n,e,t,i){return n=Kn(22,n,i,e),n.elementType=zT,n.lanes=t,n.stateNode={isHidden:!1},n}function Bp(n,e,t){return n=Kn(6,n,null,e),n.lanes=t,n}function $p(n,e,t){return e=Kn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Dx(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mv(n,e,t,i,s,r,o,a,l){return n=new Dx(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Kn(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},vv(r),n}function Mx(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oa,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function MI(n){if(!n)return gr;n=n._reactInternals;e:{if(Io(n)!==n||n.tag!==1)throw Error(Q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(n.tag===1){var t=n.type;if(En(t))return MS(n,t,e)}return e}function OI(n,e,t,i,s,r,o,a,l){return n=Mv(t,i,!0,n,s,r,o,a,l),n.context=MI(null),t=n.current,i=dn(),s=ur(t),r=hs(i,s),r.callback=e??null,ar(t,r,s),n.current.lanes=s,nc(n,s,i),Tn(n,i),n}function pf(n,e,t,i){var s=e.current,r=dn(),o=ur(s);return t=MI(t),e.context===null?e.context=t:e.pendingContext=t,e=hs(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=ar(s,e,o),n!==null&&(hi(n,s,o,r),Bh(n,s,o)),o}function Ad(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Qw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ov(n,e){Qw(n,e),(n=n.alternate)&&Qw(n,e)}function Ox(){return null}var LI=typeof reportError=="function"?reportError:function(n){console.error(n)};function Lv(n){this._internalRoot=n}mf.prototype.render=Lv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Q(409));pf(n,e,null,null)};mf.prototype.unmount=Lv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;uo(function(){pf(null,n,null,null)}),e[ps]=null}};function mf(n){this._internalRoot=n}mf.prototype.unstable_scheduleHydration=function(n){if(n){var e=fS();n={blockedOn:null,target:n,priority:e};for(var t=0;t<qs.length&&e!==0&&e<qs[t].priority;t++);qs.splice(t,0,n),t===0&&mS(n)}};function Vv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Gw(){}function Lx(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Ad(o);r.call(c)}}var o=OI(e,i,n,0,null,!1,!1,"",Gw);return n._reactRootContainer=o,n[ps]=o.current,Nu(n.nodeType===8?n.parentNode:n),uo(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Ad(l);a.call(c)}}var l=Mv(n,0,!1,null,null,!1,!1,"",Gw);return n._reactRootContainer=l,n[ps]=l.current,Nu(n.nodeType===8?n.parentNode:n),uo(function(){pf(e,l,t,i)}),l}function vf(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Ad(o);a.call(l)}}pf(e,o,n,s)}else o=Lx(t,e,n,s,i);return Ad(o)}hS=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Xl(e.pendingLanes);t!==0&&(nv(e,t|1),Tn(e,at()),!(Pe&6)&&(Fa=at()+500,Sr()))}break;case 13:uo(function(){var i=ms(n,1);if(i!==null){var s=dn();hi(i,n,1,s)}}),Ov(n,1)}};iv=function(n){if(n.tag===13){var e=ms(n,134217728);if(e!==null){var t=dn();hi(e,n,134217728,t)}Ov(n,134217728)}};dS=function(n){if(n.tag===13){var e=ur(n),t=ms(n,e);if(t!==null){var i=dn();hi(t,n,e,i)}Ov(n,e)}};fS=function(){return Oe};pS=function(n,e){var t=Oe;try{return Oe=n,e()}finally{Oe=t}};Nm=function(n,e,t){switch(e){case"input":if(bm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=af(i);if(!s)throw Error(Q(90));HT(i),bm(i,s)}}}break;case"textarea":YT(n,t);break;case"select":e=t.value,e!=null&&Ea(n,!!t.multiple,e,!1)}};eS=xv;tS=uo;var Vx={usingClientEntryPoint:!1,Events:[sc,ha,af,JT,ZT,xv]},zl={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fx={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sS(n),n===null?null:n.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||Ox,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{nf=Th.inject(Fx),xi=Th}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vx;Vn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(e))throw Error(Q(200));return Mx(n,e,null,t)};Vn.createRoot=function(n,e){if(!Vv(n))throw Error(Q(299));var t=!1,i="",s=LI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mv(n,1,!1,null,null,t,!1,i,s),n[ps]=e.current,Nu(n.nodeType===8?n.parentNode:n),new Lv(e)};Vn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Q(188)):(n=Object.keys(n).join(","),Error(Q(268,n)));return n=sS(e),n=n===null?null:n.stateNode,n};Vn.flushSync=function(n){return uo(n)};Vn.hydrate=function(n,e,t){if(!gf(e))throw Error(Q(200));return vf(null,n,e,!0,t)};Vn.hydrateRoot=function(n,e,t){if(!Vv(n))throw Error(Q(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=LI;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=OI(e,null,n,1,t??null,s,!1,r,o),n[ps]=e.current,Nu(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new mf(e)};Vn.render=function(n,e,t){if(!gf(e))throw Error(Q(200));return vf(null,n,e,!1,t)};Vn.unmountComponentAtNode=function(n){if(!gf(n))throw Error(Q(40));return n._reactRootContainer?(uo(function(){vf(null,null,n,!1,function(){n._reactRootContainer=null,n[ps]=null})}),!0):!1};Vn.unstable_batchedUpdates=xv;Vn.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!gf(t))throw Error(Q(200));if(n==null||n._reactInternals===void 0)throw Error(Q(38));return vf(n,e,t,!1,i)};Vn.version="18.3.1-next-f1338f8080-20240426";function VI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VI)}catch(n){console.error(n)}}VI(),VT.exports=Vn;var jx=VT.exports,FI,Xw=jx;FI=Xw.createRoot,Xw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Bu.apply(this,arguments)}var er;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(er||(er={}));const Jw="popstate";function Ux(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return hg("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:kd(s)}return $x(e,t,null,n)}function lt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Bx(){return Math.random().toString(36).substr(2,8)}function Zw(n,e){return{usr:n.state,key:n.key,idx:e}}function hg(n,e,t,i){return t===void 0&&(t=null),Bu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ja(e):e,{state:t,key:e&&e.key||i||Bx()})}function kd(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ja(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function $x(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=er.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Bu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=er.Pop;let A=d(),E=A==null?null:A-c;c=A,l&&l({action:a,location:P.location,delta:E})}function g(A,E){a=er.Push;let w=hg(P.location,A,E);c=d()+1;let x=Zw(w,c),M=P.createHref(w);try{o.pushState(x,"",M)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;s.location.assign(M)}r&&l&&l({action:a,location:P.location,delta:1})}function y(A,E){a=er.Replace;let w=hg(P.location,A,E);c=d();let x=Zw(w,c),M=P.createHref(w);o.replaceState(x,"",M),r&&l&&l({action:a,location:P.location,delta:0})}function b(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof A=="string"?A:kd(A);return w=w.replace(/ $/,"%20"),lt(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let P={get action(){return a},get location(){return n(s,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Jw,p),l=A,()=>{s.removeEventListener(Jw,p),l=null}},createHref(A){return e(s,A)},createURL:b,encodeLocation(A){let E=b(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:y,go(A){return o.go(A)}};return P}var e0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(e0||(e0={}));function zx(n,e,t){return t===void 0&&(t="/"),Wx(n,e,t)}function Wx(n,e,t,i){let s=typeof e=="string"?Ja(e):e,r=Fv(s.pathname||"/",t);if(r==null)return null;let o=UI(n);Hx(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=iR(r);a=eR(o[l],c)}return a}function UI(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(lt(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=hr([i,l.relativePath]),d=t.concat(l);r.children&&r.children.length>0&&(lt(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),UI(r.children,e,d,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:Jx(c,r.index),routesMeta:d})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of BI(r.path))s(r,o,l)}),e}function BI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=BI(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function Hx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Zx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const qx=/^:[\w-]+$/,Yx=3,Kx=2,Qx=1,Gx=10,Xx=-2,t0=n=>n==="*";function Jx(n,e){let t=n.split("/"),i=t.length;return t.some(t0)&&(i+=Xx),e&&(i+=Kx),t.filter(s=>!t0(s)).reduce((s,r)=>s+(qx.test(r)?Yx:r===""?Qx:Gx),i)}function Zx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function eR(n,e,t){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,d=r==="/"?e:e.slice(r.length)||"/",p=tR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:hr([r,p.pathname]),pathnameBase:aR(hr([r,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(r=hr([r,p.pathnameBase]))}return o}function tR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=nR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,d,p)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let P=a[p]||"";o=r.slice(0,r.length-P.length).replace(/(.)\/+$/,"$1")}const b=a[p];return y&&!b?c[g]=void 0:c[g]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function nR(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),jI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function iR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Fv(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function sR(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Ja(n):n;return{pathname:t?t.startsWith("/")?t:rR(t,e):e,search:lR(i),hash:uR(s)}}function rR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function zp(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jv(n,e){let t=oR(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Uv(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Ja(n):(s=Bu({},n),lt(!s.pathname||!s.pathname.includes("?"),zp("?","pathname","search",s)),lt(!s.pathname||!s.pathname.includes("#"),zp("#","pathname","hash",s)),lt(!s.search||!s.search.includes("#"),zp("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!i&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=sR(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const hr=n=>n.join("/").replace(/\/\/+/g,"/"),aR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,uR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const $I=["post","put","patch","delete"];new Set($I);const hR=["get",...$I];new Set(hR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $u(){return $u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$u.apply(this,arguments)}const Bv=z.createContext(null),dR=z.createContext(null),Ir=z.createContext(null),_f=z.createContext(null),Ss=z.createContext({outlet:null,matches:[],isDataRoute:!1}),zI=z.createContext(null);function fR(n,e){let{relative:t}=e===void 0?{}:e;Za()||lt(!1);let{basename:i,navigator:s}=z.useContext(Ir),{hash:r,pathname:o,search:a}=HI(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:hr([i,o])),s.createHref({pathname:l,search:a,hash:r})}function Za(){return z.useContext(_f)!=null}function oc(){return Za()||lt(!1),z.useContext(_f).location}function WI(n){z.useContext(Ir).static||z.useLayoutEffect(n)}function yf(){let{isDataRoute:n}=z.useContext(Ss);return n?PR():pR()}function pR(){Za()||lt(!1);let n=z.useContext(Bv),{basename:e,future:t,navigator:i}=z.useContext(Ir),{matches:s}=z.useContext(Ss),{pathname:r}=oc(),o=JSON.stringify(jv(s,t.v7_relativeSplatPath)),a=z.useRef(!1);return WI(()=>{a.current=!0}),z.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let p=Uv(c,JSON.parse(o),r,d.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:hr([e,p.pathname])),(d.replace?i.replace:i.push)(p,d.state,d)},[e,i,o,r,n])}function mR(){let{matches:n}=z.useContext(Ss),e=n[n.length-1];return e?e.params:{}}function HI(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=z.useContext(Ir),{matches:s}=z.useContext(Ss),{pathname:r}=oc(),o=JSON.stringify(jv(s,i.v7_relativeSplatPath));return z.useMemo(()=>Uv(n,JSON.parse(o),r,t==="path"),[n,o,r,t])}function gR(n,e){return vR(n,e)}function vR(n,e,t,i){Za()||lt(!1);let{navigator:s}=z.useContext(Ir),{matches:r}=z.useContext(Ss),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=oc(),d;if(e){var p;let A=typeof e=="string"?Ja(e):e;l==="/"||(p=A.pathname)!=null&&p.startsWith(l)||lt(!1),d=A}else d=c;let g=d.pathname||"/",y=g;if(l!=="/"){let A=l.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(A.length).join("/")}let b=zx(n,{pathname:y}),P=TR(b&&b.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:hr([l,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:hr([l,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),r,t,i);return e&&P?z.createElement(_f.Provider,{value:{location:$u({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:er.Pop}},P):P}function _R(){let n=CR(),e=cR(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:s},t):null,null)}const yR=z.createElement(_R,null);class wR extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(Ss.Provider,{value:this.props.routeContext},z.createElement(zI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ER(n){let{routeContext:e,match:t,children:i}=n,s=z.useContext(Bv);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(Ss.Provider,{value:e},i)}function TR(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||lt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:y}=t,b=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,p,g)=>{let y,b=!1,P=null,A=null;t&&(y=a&&p.route.id?a[p.route.id]:void 0,P=p.route.errorElement||yR,l&&(c<0&&g===0?(AR("route-fallback"),b=!0,A=null):c===g&&(b=!0,A=p.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),w=()=>{let x;return y?x=P:b?x=A:p.route.Component?x=z.createElement(p.route.Component,null):p.route.element?x=p.route.element:x=d,z.createElement(ER,{match:p,routeContext:{outlet:d,matches:E,isDataRoute:t!=null},children:x})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?z.createElement(wR,{location:t.location,revalidation:t.revalidation,component:P,error:y,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var qI=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(qI||{}),YI=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(YI||{});function SR(n){let e=z.useContext(Bv);return e||lt(!1),e}function IR(n){let e=z.useContext(dR);return e||lt(!1),e}function bR(n){let e=z.useContext(Ss);return e||lt(!1),e}function KI(n){let e=bR(),t=e.matches[e.matches.length-1];return t.route.id||lt(!1),t.route.id}function CR(){var n;let e=z.useContext(zI),t=IR(),i=KI();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function PR(){let{router:n}=SR(qI.UseNavigateStable),e=KI(YI.UseNavigateStable),t=z.useRef(!1);return WI(()=>{t.current=!0}),z.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,$u({fromRouteId:e},r)))},[n,e])}const n0={};function AR(n,e,t){n0[n]||(n0[n]=!0)}function kR(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function xR(n){let{to:e,replace:t,state:i,relative:s}=n;Za()||lt(!1);let{future:r,static:o}=z.useContext(Ir),{matches:a}=z.useContext(Ss),{pathname:l}=oc(),c=yf(),d=Uv(e,jv(a,r.v7_relativeSplatPath),l,s==="path"),p=JSON.stringify(d);return z.useEffect(()=>c(JSON.parse(p),{replace:t,state:i,relative:s}),[c,p,s,t,i]),null}function Ci(n){lt(!1)}function RR(n){let{basename:e="/",children:t=null,location:i,navigationType:s=er.Pop,navigator:r,static:o=!1,future:a}=n;Za()&&lt(!1);let l=e.replace(/^\/*/,"/"),c=z.useMemo(()=>({basename:l,navigator:r,static:o,future:$u({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=Ja(i));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:b="default"}=i,P=z.useMemo(()=>{let A=Fv(d,l);return A==null?null:{location:{pathname:A,search:p,hash:g,state:y,key:b},navigationType:s}},[l,d,p,g,y,b,s]);return P==null?null:z.createElement(Ir.Provider,{value:c},z.createElement(_f.Provider,{children:t,value:P}))}function NR(n){let{children:e,location:t}=n;return gR(dg(e),t)}new Promise(()=>{});function dg(n,e){e===void 0&&(e=[]);let t=[];return z.Children.forEach(n,(i,s)=>{if(!z.isValidElement(i))return;let r=[...e,s];if(i.type===z.Fragment){t.push.apply(t,dg(i.props.children,r));return}i.type!==Ci&&lt(!1),!i.props.index||!i.props.children||lt(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=dg(i.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fg(){return fg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},fg.apply(this,arguments)}function DR(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function MR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function OR(n,e){return n.button===0&&(!e||e==="_self")&&!MR(n)}const LR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VR="6";try{window.__reactRouterVersion=VR}catch{}const FR="startTransition",i0=AA[FR];function jR(n){let{basename:e,children:t,future:i,window:s}=n,r=z.useRef();r.current==null&&(r.current=Ux({window:s,v5Compat:!0}));let o=r.current,[a,l]=z.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},d=z.useCallback(p=>{c&&i0?i0(()=>l(p)):l(p)},[l,c]);return z.useLayoutEffect(()=>o.listen(d),[o,d]),z.useEffect(()=>kR(i),[i]),z.createElement(RR,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const UR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ai=z.forwardRef(function(e,t){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:p}=e,g=DR(e,LR),{basename:y}=z.useContext(Ir),b,P=!1;if(typeof c=="string"&&BR.test(c)&&(b=c,UR))try{let x=new URL(window.location.href),M=c.startsWith("//")?new URL(x.protocol+c):new URL(c),W=Fv(M.pathname,y);M.origin===x.origin&&W!=null?c=W+M.search+M.hash:P=!0}catch{}let A=fR(c,{relative:s}),E=$R(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:p});function w(x){i&&i(x),x.defaultPrevented||E(x)}return z.createElement("a",fg({},g,{href:b||A,onClick:P||r?i:w,ref:t,target:l}))});var s0;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(s0||(s0={}));var r0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(r0||(r0={}));function $R(n,e){let{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=yf(),c=oc(),d=HI(n,{relative:o});return z.useCallback(p=>{if(OR(p,t)){p.preventDefault();let g=i!==void 0?i:kd(c)===kd(d);l(n,{replace:g,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,d,i,s,t,n,r,o,a])}var o0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},zR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},GI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,d=r>>2,p=(r&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(g=64)),i.push(t[d],t[p],t[g],t[y])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||a==null||c==null||p==null)throw new WR;const g=r<<2|a>>4;if(i.push(g),c!==64){const y=a<<4&240|c>>2;if(i.push(y),p!==64){const b=c<<6&192|p;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HR=function(n){const e=QI(n);return GI.encodeByteArray(e,!0)},xd=function(n){return HR(n).replace(/\./g,"")},XI=function(n){try{return GI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=()=>qR().__FIREBASE_DEFAULTS__,KR=()=>{if(typeof process>"u"||typeof o0>"u")return;const n=o0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&XI(n[1]);return e&&JSON.parse(e)},wf=()=>{try{return YR()||KR()||QR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JI=n=>{var e,t;return(t=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ZI=n=>{const e=JI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},eb=()=>{var n;return(n=wf())===null||n===void 0?void 0:n.config},tb=n=>{var e;return(e=wf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xd(JSON.stringify(t)),xd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function JR(){var n;const e=(n=wf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function tN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nN(){const n=Jt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iN(){return!JR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sN(){try{return typeof indexedDB=="object"}catch{return!1}}function rN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="FirebaseError";class ji extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=oN,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ac.prototype.create)}}class ac{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?aN(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ji(s,a,i)}}function aN(n,e){return n.replace(lN,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const lN=/\{\$([^}]+)}/g;function uN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rd(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(a0(r)&&a0(o)){if(!Rd(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function a0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function eu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cN(n,e){const t=new hN(n,e);return t.subscribe.bind(t)}class hN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");dN(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Wp),s.error===void 0&&(s.error=Wp),s.complete===void 0&&(s.complete=Wp);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(n){return n&&n._delegate?n._delegate:n}class vr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new GR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mN(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pN(n){return n===Gr?void 0:n}function mN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Se||(Se={}));const vN={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},_N=Se.INFO,yN={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},wN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=yN[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $v{constructor(e){this.name=e,this._logLevel=_N,this._logHandler=wN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const EN=(n,e)=>e.some(t=>n instanceof t);let l0,u0;function TN(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SN(){return u0||(u0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,pg=new WeakMap,sb=new WeakMap,Hp=new WeakMap,zv=new WeakMap;function IN(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(dr(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&ib.set(t,n)}).catch(()=>{}),zv.set(e,n),e}function bN(n){if(pg.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});pg.set(n,e)}let mg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return dr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CN(n){mg=n(mg)}function PN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(qp(this),e,...t);return sb.set(i,e.sort?e.sort():[e]),dr(i)}:SN().includes(n)?function(...e){return n.apply(qp(this),e),dr(ib.get(this))}:function(...e){return dr(n.apply(qp(this),e))}}function AN(n){return typeof n=="function"?PN(n):(n instanceof IDBTransaction&&bN(n),EN(n,TN())?new Proxy(n,mg):n)}function dr(n){if(n instanceof IDBRequest)return IN(n);if(Hp.has(n))return Hp.get(n);const e=AN(n);return e!==n&&(Hp.set(n,e),zv.set(e,n)),e}const qp=n=>zv.get(n);function kN(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),a=dr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(dr(o.result),l.oldVersion,l.newVersion,dr(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const xN=["get","getKey","getAll","getAllKeys","count"],RN=["put","add","delete","clear"],Yp=new Map;function c0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=RN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||xN.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return Yp.set(e,r),r}CN(n=>({...n,get:(e,t,i)=>c0(e,t)||n.get(e,t,i),has:(e,t)=>!!c0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function DN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gg="@firebase/app",h0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new $v("@firebase/app"),MN="@firebase/app-compat",ON="@firebase/analytics-compat",LN="@firebase/analytics",VN="@firebase/app-check-compat",FN="@firebase/app-check",jN="@firebase/auth",UN="@firebase/auth-compat",BN="@firebase/database",$N="@firebase/data-connect",zN="@firebase/database-compat",WN="@firebase/functions",HN="@firebase/functions-compat",qN="@firebase/installations",YN="@firebase/installations-compat",KN="@firebase/messaging",QN="@firebase/messaging-compat",GN="@firebase/performance",XN="@firebase/performance-compat",JN="@firebase/remote-config",ZN="@firebase/remote-config-compat",eD="@firebase/storage",tD="@firebase/storage-compat",nD="@firebase/firestore",iD="@firebase/vertexai-preview",sD="@firebase/firestore-compat",rD="firebase",oD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="[DEFAULT]",aD={[gg]:"fire-core",[MN]:"fire-core-compat",[LN]:"fire-analytics",[ON]:"fire-analytics-compat",[FN]:"fire-app-check",[VN]:"fire-app-check-compat",[jN]:"fire-auth",[UN]:"fire-auth-compat",[BN]:"fire-rtdb",[$N]:"fire-data-connect",[zN]:"fire-rtdb-compat",[WN]:"fire-fn",[HN]:"fire-fn-compat",[qN]:"fire-iid",[YN]:"fire-iid-compat",[KN]:"fire-fcm",[QN]:"fire-fcm-compat",[GN]:"fire-perf",[XN]:"fire-perf-compat",[JN]:"fire-rc",[ZN]:"fire-rc-compat",[eD]:"fire-gcs",[tD]:"fire-gcs-compat",[nD]:"fire-fst",[sD]:"fire-fst-compat",[iD]:"fire-vertex","fire-js":"fire-js",[rD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,lD=new Map,_g=new Map;function d0(n,e){try{n.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function co(n){const e=n.name;if(_g.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;_g.set(e,n);for(const t of Nd.values())d0(t,n);for(const t of lD.values())d0(t,n);return!0}function Ef(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ki(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new ac("app","Firebase",uD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=oD;function rb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw fr.create("bad-app-name",{appName:String(s)});if(t||(t=eb()),!t)throw fr.create("no-options");const r=Nd.get(s);if(r){if(Rd(t,r.options)&&Rd(i,r.config))return r;throw fr.create("duplicate-app",{appName:s})}const o=new gN(s);for(const l of _g.values())o.addComponent(l);const a=new cD(t,i,o);return Nd.set(s,a),a}function Wv(n=vg){const e=Nd.get(n);if(!e&&n===vg&&eb())return rb();if(!e)throw fr.create("no-app",{appName:n});return e}function Ni(n,e,t){var i;let s=(i=aD[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(a.join(" "));return}co(new vr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="firebase-heartbeat-database",dD=1,zu="firebase-heartbeat-store";let Kp=null;function ob(){return Kp||(Kp=kN(hD,dD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zu)}catch(t){console.warn(t)}}}}).catch(n=>{throw fr.create("idb-open",{originalErrorMessage:n.message})})),Kp}async function fD(n){try{const t=(await ob()).transaction(zu),i=await t.objectStore(zu).get(ab(n));return await t.done,i}catch(e){if(e instanceof ji)vs.warn(e.message);else{const t=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(t.message)}}}async function f0(n,e){try{const i=(await ob()).transaction(zu,"readwrite");await i.objectStore(zu).put(e,ab(n)),await i.done}catch(t){if(t instanceof ji)vs.warn(t.message);else{const i=fr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vs.warn(i.message)}}}function ab(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=1024,mD=30*24*60*60*1e3;class gD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _D(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=p0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=mD}),this._storage.overwrite(this._heartbeatsCache))}catch(i){vs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=p0(),{heartbeatsToSend:i,unsentEntries:s}=vD(this._heartbeatsCache.heartbeats),r=xd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return vs.warn(t),""}}}function p0(){return new Date().toISOString().substring(0,10)}function vD(n,e=pD){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),m0(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),m0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class _D{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sN()?rN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return f0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return f0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function m0(n){return xd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n){co(new vr("platform-logger",e=>new NN(e),"PRIVATE")),co(new vr("heartbeat",e=>new gD(e),"PRIVATE")),Ni(gg,h0,n),Ni(gg,h0,"esm2017"),Ni("fire-js","")}yD("");function Hv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function lb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wD=lb,ub=new ac("auth","Firebase",lb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=new $v("@firebase/auth");function ED(n,...e){Dd.logLevel<=Se.WARN&&Dd.warn(`Auth (${bo}): ${n}`,...e)}function Kh(n,...e){Dd.logLevel<=Se.ERROR&&Dd.error(`Auth (${bo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(n,...e){throw qv(n,...e)}function Di(n,...e){return qv(n,...e)}function cb(n,e,t){const i=Object.assign(Object.assign({},wD()),{[e]:t});return new ac("auth","Firebase",i).create(e,{appName:n.name})}function ds(n){return cb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ub.create(n,...e)}function de(n,e,...t){if(!n)throw qv(e,...t)}function os(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kh(e),new Error(e)}function _s(n,e){n||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function TD(){return g0()==="http:"||g0()==="https:"}function g0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TD()||eN()||"connection"in navigator)?navigator.onLine:!0}function ID(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.shortDelay=e,this.longDelay=t,_s(t>e,"Short delay should be less than long delay!"),this.isMobile=XR()||tN()}get(){return SD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(n,e){_s(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new uc(3e4,6e4);function br(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ui(n,e,t,i,s={}){return db(n,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=lc(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},r);return ZR()||(c.referrerPolicy="no-referrer"),hb.fetch()(fb(n,n.config.apiHost,t,a),c)})}async function db(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},bD),e);try{const s=new AD(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Sh(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Sh(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Sh(n,"user-disabled",o);const d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw cb(n,d,c);fi(n,d)}}catch(s){if(s instanceof ji)throw s;fi(n,"network-request-failed",{message:String(s)})}}async function cc(n,e,t,i,s={}){const r=await Ui(n,e,t,i,s);return"mfaPendingCredential"in r&&fi(n,"multi-factor-auth-required",{_serverResponse:r}),r}function fb(n,e,t,i){const s=`${e}${t}?${i}`;return n.config.emulator?Yv(n.config,s):`${n.config.apiScheme}://${s}`}function PD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),CD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sh(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Di(n,e,i);return s.customData._tokenResponse=t,s}function v0(n){return n!==void 0&&n.enterprise!==void 0}class kD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function xD(n,e){return Ui(n,"GET","/v2/recaptchaConfig",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(n,e){return Ui(n,"POST","/v1/accounts:delete",e)}async function pb(n,e){return Ui(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ND(n,e=!1){const t=Ke(n),i=await t.getIdToken(e),s=Kv(i);de(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:pu(Qp(s.auth_time)),issuedAtTime:pu(Qp(s.iat)),expirationTime:pu(Qp(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Qp(n){return Number(n)*1e3}function Kv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const s=XI(t);return s?JSON.parse(s):(Kh("Failed to decode base64 JWT payload"),null)}catch(s){return Kh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _0(n){const e=Kv(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ji&&DD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function DD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(n){var e;const t=n.auth,i=await n.getIdToken(),s=await ho(n,pb(t,{idToken:i}));de(s==null?void 0:s.users.length,t,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?mb(r.providerUserInfo):[],a=LD(n.providerData,o),l=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new wg(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function OD(n){const e=Ke(n);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LD(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function mb(n){return n.map(e=>{var{providerId:t}=e,i=Hv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(n,e){const t=await db(n,{},async()=>{const i=lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=fb(n,s,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hb.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FD(n,e){return Ui(n,"POST","/v2/accounts:revokeToken",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");const t=_0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await VD(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,o=new Pa;return i&&(de(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(de(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pa,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,e){de(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class as{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,r=Hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new wg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await ho(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ND(this,e)}reload(){return OD(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new as(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Md(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ki(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await ho(this,RD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,r,o,a,l,c,d;const p=(i=t.displayName)!==null&&i!==void 0?i:void 0,g=(s=t.email)!==null&&s!==void 0?s:void 0,y=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,b=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,A=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=t.createdAt)!==null&&c!==void 0?c:void 0,w=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:x,emailVerified:M,isAnonymous:W,providerData:Y,stsTokenManager:R}=t;de(x&&R,e,"internal-error");const C=Pa.fromJSON(this.name,R);de(typeof x=="string",e,"internal-error"),$s(p,e.name),$s(g,e.name),de(typeof M=="boolean",e,"internal-error"),de(typeof W=="boolean",e,"internal-error"),$s(y,e.name),$s(b,e.name),$s(P,e.name),$s(A,e.name),$s(E,e.name),$s(w,e.name);const k=new as({uid:x,auth:e,email:g,emailVerified:M,displayName:p,isAnonymous:W,photoURL:b,phoneNumber:y,tenantId:P,stsTokenManager:C,createdAt:E,lastLoginAt:w});return Y&&Array.isArray(Y)&&(k.providerData=Y.map(N=>Object.assign({},N))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,t,i=!1){const s=new Pa;s.updateFromServerResponse(t);const r=new as({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Md(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];de(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?mb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new Pa;a.updateFromIdToken(i);const l=new as({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new wg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;function ls(n){_s(n instanceof Function,"Expected a class definition");let e=y0.get(n);return e?(_s(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,y0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gb.type="NONE";const w0=gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n,e,t){return`firebase:${n}:${e}:${t}`}class Aa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Qh(this.userKey,s.apiKey,r),this.fullPersistenceKey=Qh("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?as._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Aa(ls(w0),e,i);const s=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||ls(w0);const o=Qh(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){const p=as._fromJSON(e,d);c!==r&&(a=p),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Aa(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Aa(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tb(e))return"Blackberry";if(Sb(e))return"Webos";if(_b(e))return"Safari";if((e.includes("chrome/")||yb(e))&&!e.includes("edge/"))return"Chrome";if(Eb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function vb(n=Jt()){return/firefox\//i.test(n)}function _b(n=Jt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yb(n=Jt()){return/crios\//i.test(n)}function wb(n=Jt()){return/iemobile/i.test(n)}function Eb(n=Jt()){return/android/i.test(n)}function Tb(n=Jt()){return/blackberry/i.test(n)}function Sb(n=Jt()){return/webos/i.test(n)}function Qv(n=Jt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jD(n=Jt()){var e;return Qv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UD(){return nN()&&document.documentMode===10}function Ib(n=Jt()){return Qv(n)||Eb(n)||Sb(n)||Tb(n)||/windows phone/i.test(n)||wb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(n,e=[]){let t;switch(n){case"Browser":t=E0(Jt());break;case"Worker":t=`${E0(Jt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(n,e={}){return Ui(n,"GET","/v2/passwordPolicy",br(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=6;class WD{constructor(e){var t,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:zD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T0(this),this.idTokenSubscription=new T0(this),this.beforeStateQueue=new BD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ub,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pb(this,{idToken:e}),i=await as._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ki(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ID()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ki(this.app))return Promise.reject(ds(this));const t=e?Ke(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ki(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ki(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $D(this),t=new WD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ac("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await FD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ls(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ED(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Co(n){return Ke(n)}class T0{constructor(e){this.auth=e,this.observer=null,this.addObserver=cN(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qD(n){Tf=n}function Cb(n){return Tf.loadJS(n)}function YD(){return Tf.recaptchaEnterpriseScript}function KD(){return Tf.gapiScript}function QD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const GD="recaptcha-enterprise",XD="NO_RECAPTCHA";class JD{constructor(e){this.type=GD,this.auth=Co(e)}async verify(e="verify",t=!1){async function i(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{xD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new kD(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;v0(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(XD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{i(this.auth).then(a=>{if(!t&&v0(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YD();l.length!==0&&(l+=a),Cb(l).then(()=>{s(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function S0(n,e,t,i=!1){const s=new JD(n);let r;try{r=await s.verify(t)}catch{r=await s.verify(t,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Eg(n,e,t,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await S0(n,e,t,t==="getOobCode");return i(n,r)}else return i(n,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await S0(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n,e){const t=Ef(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(Rd(r,e??{}))return s;fi(s,"already-initialized")}return t.initialize({options:e})}function eM(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ls);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tM(n,e,t){const i=Co(n);de(i._canInitEmulator,i,"emulator-config-failed"),de(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=Pb(e),{host:o,port:a}=nM(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),iM()}function Pb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function nM(n){const e=Pb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:I0(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:I0(o)}}}function I0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function iM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,t){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function sM(n,e){return Ui(n,"POST","/v1/accounts:update",e)}async function rM(n,e){return Ui(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(n,e){return cc(n,"POST","/v1/accounts:signInWithPassword",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}async function lM(n,e){return cc(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Gv{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Wu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Wu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eg(e,t,"signInWithPassword",oM);case"emailLink":return aM(e,{email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eg(e,i,"signUpPassword",rM);case"emailLink":return lM(e,{idToken:t,email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,e){return cc(n,"POST","/v1/accounts:signInWithIdp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="http://localhost";class fo extends Gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,r=Hv(t,["providerId","signInMethod"]);if(!i||!s)return null;const o=new fo(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ka(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ka(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ka(e,t)}buildRequest(){const e={requestUri:uM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hM(n){const e=Zl(eu(n)).link,t=e?Zl(eu(e)).deep_link_id:null,i=Zl(eu(n)).deep_link_id;return(i?Zl(eu(i)).link:null)||i||t||e||n}class Xv{constructor(e){var t,i,s,r,o,a;const l=Zl(eu(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,d=(i=l.oobCode)!==null&&i!==void 0?i:null,p=cM((s=l.mode)!==null&&s!==void 0?s:null);de(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=hM(e);try{return new Xv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,t){return Wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Xv.parseLink(t);return de(i,"argument-error"),Wu._fromEmailAndCode(e,i.code,i.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Ab{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends hc{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fo._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Qs.credential(t,i)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends hc{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends hc{constructor(){super("twitter.com")}static credential(e,t){return fo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Xs.credential(t,i)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(n,e){return cc(n,"POST","/v1/accounts:signUp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await as._fromIdTokenResponse(e,i,s),o=b0(i);return new po({user:r,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=b0(i);return new po({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function b0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends ji{constructor(e,t,i,s){var r;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Od(e,t,i,s)}}function kb(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(n,r,e,i):r})}async function fM(n,e,t=!1){const i=await ho(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return po._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(n,e,t=!1){const{auth:i}=n;if(ki(i.app))return Promise.reject(ds(i));const s="reauthenticate";try{const r=await ho(n,kb(i,s,e,n),t);de(r.idToken,i,"internal-error");const o=Kv(r.idToken);de(o,i,"internal-error");const{sub:a}=o;return de(n.uid===a,i,"user-mismatch"),po._forOperation(n,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&fi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(n,e,t=!1){if(ki(n.app))return Promise.reject(ds(n));const i="signIn",s=await kb(n,i,e),r=await po._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}async function pM(n,e){return Rb(Co(n),e)}async function mM(n,e){return xb(Ke(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gM(n,e,t){if(ki(n.app))return Promise.reject(ds(n));const i=Co(n),o=await Eg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Nb(n),l}),a=await po._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function vM(n,e,t){return ki(n.app)?Promise.reject(ds(n)):pM(Ke(n),Po.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Nb(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(n,e){return Ui(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tg(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Ke(n),r={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await ho(i,_M(i.auth,r));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function C0(n,e){return yM(Ke(n),null,e)}async function yM(n,e,t){const{auth:i}=n,r={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(r.password=t);const o=await ho(n,sM(i,r));await n._updateTokensIfNecessary(o,!0)}function wM(n,e,t,i){return Ke(n).onIdTokenChanged(e,t,i)}function EM(n,e,t){return Ke(n).beforeAuthStateChanged(e,t)}function TM(n,e,t,i){return Ke(n).onAuthStateChanged(e,t,i)}function SM(n){return Ke(n).signOut()}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=1e3,bM=10;class Mb extends Db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ib(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);UD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bM):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},IM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mb.type="LOCAL";const CM=Mb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends Db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ob.type="SESSION";const Lb=Ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Sf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(t.origin,r)),l=await PM(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Jv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(g.data.response);break;default:clearTimeout(d),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function kM(n){Mi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function xM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function NM(){return Vb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="firebaseLocalStorageDb",DM=1,Vd="firebaseLocalStorage",jb="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function If(n,e){return n.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function MM(){const n=indexedDB.deleteDatabase(Fb);return new dc(n).toPromise()}function Sg(){const n=indexedDB.open(Fb,DM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vd,{keyPath:jb})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vd)?e(i):(i.close(),await MM(),e(await Sg()))})})}async function P0(n,e,t){const i=If(n,!0).put({[jb]:e,value:t});return new dc(i).toPromise()}async function OM(n,e){const t=If(n,!1).get(e),i=await new dc(t).toPromise();return i===void 0?null:i.value}function A0(n,e){const t=If(n,!0).delete(e);return new dc(t).toPromise()}const LM=800,VM=3;class Ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>VM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(NM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await xM(),!this.activeServiceWorker)return;this.sender=new AM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sg();return await P0(e,Ld,"1"),await A0(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>P0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>OM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>A0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=If(s,!1).getAll();return new dc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ub.type="LOCAL";const FM=Ub;new uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(n,e){return e?ls(e):(de(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends Gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UM(n){return Rb(n.auth,new Zv(n),n.bypassAuthState)}function BM(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),xb(t,new Zv(n),n.bypassAuthState)}async function $M(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),fM(t,new Zv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UM;case"linkViaPopup":case"linkViaRedirect":return $M;case"reauthViaPopup":case"reauthViaRedirect":return BM;default:fi(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=new uc(2e3,1e4);class _a extends Bb{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=Jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zM.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="pendingRedirect",Gh=new Map;class HM extends Bb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Gh.get(this.auth._key());if(!e){try{const i=await qM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qM(n,e){const t=QM(e),i=KM(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function YM(n,e){Gh.set(n._key(),e)}function KM(n){return ls(n._redirectPersistence)}function QM(n){return Qh(WM,n.config.apiKey,n.name)}async function GM(n,e,t=!1){if(ki(n.app))return Promise.reject(ds(n));const i=Co(n),s=jM(i,e),o=await new HM(i,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=10*60*1e3;class JM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!$b(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XM&&this.cachedEventUids.clear(),this.cachedEventUids.has(k0(e))}saveEventToCache(e){this.cachedEventUids.add(k0(e)),this.lastProcessedEventTime=Date.now()}}function k0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $b({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $b(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(n,e={}){return Ui(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n2=/^https?/;async function i2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await e2(n);for(const t of e)try{if(s2(t))return}catch{}fi(n,"unauthorized-domain")}function s2(n){const e=yg(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!n2.test(t))return!1;if(t2.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new uc(3e4,6e4);function x0(){const n=Mi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function o2(n){return new Promise((e,t)=>{var i,s,r;function o(){x0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x0(),t(Di(n,"network-request-failed"))},timeout:r2.get()})}if(!((s=(i=Mi().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=Mi().gapi)===null||r===void 0)&&r.load)o();else{const a=QD("iframefcb");return Mi()[a]=()=>{gapi.load?o():t(Di(n,"network-request-failed"))},Cb(`${KD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Xh=null,e})}let Xh=null;function a2(n){return Xh=Xh||o2(n),Xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new uc(5e3,15e3),u2="__/auth/iframe",c2="emulator/auth/iframe",h2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f2(n){const e=n.config;de(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Yv(e,c2):`https://${n.config.authDomain}/${u2}`,i={apiKey:e.apiKey,appName:n.name,v:bo},s=d2.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${lc(i).slice(1)}`}async function p2(n){const e=await a2(n),t=Mi().gapi;return de(t,n,"internal-error"),e.open({where:document.body,url:f2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h2,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Di(n,"network-request-failed"),a=Mi().setTimeout(()=>{r(o)},l2.get());function l(){Mi().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g2=500,v2=600,_2="_blank",y2="http://localhost";class R0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w2(n,e,t,i=g2,s=v2){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},m2),{width:i.toString(),height:s.toString(),top:r,left:o}),c=Jt().toLowerCase();t&&(a=yb(c)?_2:t),vb(c)&&(e=e||y2,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[y,b])=>`${g}${y}=${b},`,"");if(jD(c)&&a!=="_self")return E2(e||"",a),new R0(null);const p=window.open(e||"",a,d);de(p,n,"popup-blocked");try{p.focus()}catch{}return new R0(p)}function E2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="__/auth/handler",S2="emulator/auth/handler",I2=encodeURIComponent("fac");async function N0(n,e,t,i,s,r){de(n.config.authDomain,n,"auth-domain-config-required"),de(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:bo,eventId:s};if(e instanceof Ab){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",uN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof hc){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${I2}=${encodeURIComponent(l)}`:"";return`${b2(n)}?${lc(a).slice(1)}${c}`}function b2({config:n}){return n.emulator?Yv(n,S2):`https://${n.authDomain}/${T2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class C2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lb,this._completeRedirectFn=GM,this._overrideRedirectResult=YM}async _openPopup(e,t,i,s){var r;_s((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await N0(e,t,i,yg(),s);return w2(e,o,Jv())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await N0(e,t,i,yg(),s);return kM(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(_s(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await p2(e),i=new JM(e);return t.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gp,{type:Gp},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[Gp];o!==void 0&&t(!!o),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=i2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ib()||_b()||Qv()}}const P2=C2;var D0="@firebase/auth",M0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x2(n){co(new vr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bb(n)},c=new HD(i,s,r,l);return eM(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),co(new vr("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(i=>new A2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(D0,M0,k2(n)),Ni(D0,M0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=5*60,N2=tb("authIdTokenMaxAge")||R2;let O0=null;const D2=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>N2)return;const s=t==null?void 0:t.token;O0!==s&&(O0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function e_(n=Wv()){const e=Ef(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ZD(n,{popupRedirectResolver:P2,persistence:[FM,CM,Lb]}),i=tb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=D2(r.toString());EM(t,o,()=>o(t.currentUser)),wM(t,a=>o(a))}}const s=JI("auth");return s&&tM(t,`http://${s}`),t}function M2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}qD({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=Di("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",M2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x2("Browser");var O2="firebase",L2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(O2,L2,"app");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,zb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function k(){}k.prototype=C.prototype,R.D=C.prototype,R.prototype=new k,R.prototype.constructor=R,R.C=function(N,O,F){for(var D=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)D[Et-2]=arguments[Et];return C.prototype[O].apply(N,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,C,k){k||(k=0);var N=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)N[O]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(O=0;16>O;++O)N[O]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=R.g[0],k=R.g[1],O=R.g[2];var F=R.g[3],D=C+(F^k&(O^F))+N[0]+3614090360&4294967295;C=k+(D<<7&4294967295|D>>>25),D=F+(O^C&(k^O))+N[1]+3905402710&4294967295,F=C+(D<<12&4294967295|D>>>20),D=O+(k^F&(C^k))+N[2]+606105819&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(C^O&(F^C))+N[3]+3250441966&4294967295,k=O+(D<<22&4294967295|D>>>10),D=C+(F^k&(O^F))+N[4]+4118548399&4294967295,C=k+(D<<7&4294967295|D>>>25),D=F+(O^C&(k^O))+N[5]+1200080426&4294967295,F=C+(D<<12&4294967295|D>>>20),D=O+(k^F&(C^k))+N[6]+2821735955&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(C^O&(F^C))+N[7]+4249261313&4294967295,k=O+(D<<22&4294967295|D>>>10),D=C+(F^k&(O^F))+N[8]+1770035416&4294967295,C=k+(D<<7&4294967295|D>>>25),D=F+(O^C&(k^O))+N[9]+2336552879&4294967295,F=C+(D<<12&4294967295|D>>>20),D=O+(k^F&(C^k))+N[10]+4294925233&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(C^O&(F^C))+N[11]+2304563134&4294967295,k=O+(D<<22&4294967295|D>>>10),D=C+(F^k&(O^F))+N[12]+1804603682&4294967295,C=k+(D<<7&4294967295|D>>>25),D=F+(O^C&(k^O))+N[13]+4254626195&4294967295,F=C+(D<<12&4294967295|D>>>20),D=O+(k^F&(C^k))+N[14]+2792965006&4294967295,O=F+(D<<17&4294967295|D>>>15),D=k+(C^O&(F^C))+N[15]+1236535329&4294967295,k=O+(D<<22&4294967295|D>>>10),D=C+(O^F&(k^O))+N[1]+4129170786&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(C^k))+N[6]+3225465664&4294967295,F=C+(D<<9&4294967295|D>>>23),D=O+(C^k&(F^C))+N[11]+643717713&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(O^F))+N[0]+3921069994&4294967295,k=O+(D<<20&4294967295|D>>>12),D=C+(O^F&(k^O))+N[5]+3593408605&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(C^k))+N[10]+38016083&4294967295,F=C+(D<<9&4294967295|D>>>23),D=O+(C^k&(F^C))+N[15]+3634488961&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(O^F))+N[4]+3889429448&4294967295,k=O+(D<<20&4294967295|D>>>12),D=C+(O^F&(k^O))+N[9]+568446438&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(C^k))+N[14]+3275163606&4294967295,F=C+(D<<9&4294967295|D>>>23),D=O+(C^k&(F^C))+N[3]+4107603335&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(O^F))+N[8]+1163531501&4294967295,k=O+(D<<20&4294967295|D>>>12),D=C+(O^F&(k^O))+N[13]+2850285829&4294967295,C=k+(D<<5&4294967295|D>>>27),D=F+(k^O&(C^k))+N[2]+4243563512&4294967295,F=C+(D<<9&4294967295|D>>>23),D=O+(C^k&(F^C))+N[7]+1735328473&4294967295,O=F+(D<<14&4294967295|D>>>18),D=k+(F^C&(O^F))+N[12]+2368359562&4294967295,k=O+(D<<20&4294967295|D>>>12),D=C+(k^O^F)+N[5]+4294588738&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^O)+N[8]+2272392833&4294967295,F=C+(D<<11&4294967295|D>>>21),D=O+(F^C^k)+N[11]+1839030562&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^C)+N[14]+4259657740&4294967295,k=O+(D<<23&4294967295|D>>>9),D=C+(k^O^F)+N[1]+2763975236&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^O)+N[4]+1272893353&4294967295,F=C+(D<<11&4294967295|D>>>21),D=O+(F^C^k)+N[7]+4139469664&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^C)+N[10]+3200236656&4294967295,k=O+(D<<23&4294967295|D>>>9),D=C+(k^O^F)+N[13]+681279174&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^O)+N[0]+3936430074&4294967295,F=C+(D<<11&4294967295|D>>>21),D=O+(F^C^k)+N[3]+3572445317&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^C)+N[6]+76029189&4294967295,k=O+(D<<23&4294967295|D>>>9),D=C+(k^O^F)+N[9]+3654602809&4294967295,C=k+(D<<4&4294967295|D>>>28),D=F+(C^k^O)+N[12]+3873151461&4294967295,F=C+(D<<11&4294967295|D>>>21),D=O+(F^C^k)+N[15]+530742520&4294967295,O=F+(D<<16&4294967295|D>>>16),D=k+(O^F^C)+N[2]+3299628645&4294967295,k=O+(D<<23&4294967295|D>>>9),D=C+(O^(k|~F))+N[0]+4096336452&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~O))+N[7]+1126891415&4294967295,F=C+(D<<10&4294967295|D>>>22),D=O+(C^(F|~k))+N[14]+2878612391&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~C))+N[5]+4237533241&4294967295,k=O+(D<<21&4294967295|D>>>11),D=C+(O^(k|~F))+N[12]+1700485571&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~O))+N[3]+2399980690&4294967295,F=C+(D<<10&4294967295|D>>>22),D=O+(C^(F|~k))+N[10]+4293915773&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~C))+N[1]+2240044497&4294967295,k=O+(D<<21&4294967295|D>>>11),D=C+(O^(k|~F))+N[8]+1873313359&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~O))+N[15]+4264355552&4294967295,F=C+(D<<10&4294967295|D>>>22),D=O+(C^(F|~k))+N[6]+2734768916&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~C))+N[13]+1309151649&4294967295,k=O+(D<<21&4294967295|D>>>11),D=C+(O^(k|~F))+N[4]+4149444226&4294967295,C=k+(D<<6&4294967295|D>>>26),D=F+(k^(C|~O))+N[11]+3174756917&4294967295,F=C+(D<<10&4294967295|D>>>22),D=O+(C^(F|~k))+N[2]+718787259&4294967295,O=F+(D<<15&4294967295|D>>>17),D=k+(F^(O|~C))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+F&4294967295}i.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var k=C-this.blockSize,N=this.B,O=this.h,F=0;F<C;){if(O==0)for(;F<=k;)s(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<C;)if(N[O++]=R.charCodeAt(F++),O==this.blockSize){s(this,N),O=0;break}}else for(;F<C;)if(N[O++]=R[F++],O==this.blockSize){s(this,N),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var k=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=k&255,k/=256;for(this.u(R),R=Array(16),C=k=0;4>C;++C)for(var N=0;32>N;N+=8)R[k++]=this.g[C]>>>N&255;return R};function r(R,C){var k=a;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=C(R)}function o(R,C){this.h=C;for(var k=[],N=!0,O=R.length-1;0<=O;O--){var F=R[O]|0;N&&F==C||(k[O]=F,N=!1)}this.g=k}var a={};function l(R){return-128<=R&&128>R?r(R,function(C){return new o([C|0],0>C?-1:0)}):new o([R|0],0>R?-1:0)}function c(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return A(c(-R));for(var C=[],k=1,N=0;R>=k;N++)C[N]=R/k|0,k*=4294967296;return new o(C,0)}function d(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return A(d(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(C,8)),N=p,O=0;O<R.length;O+=8){var F=Math.min(8,R.length-O),D=parseInt(R.substring(O,O+F),C);8>F?(F=c(Math.pow(C,F)),N=N.j(F).add(c(D))):(N=N.j(k),N=N.add(c(D)))}return N}var p=l(0),g=l(1),y=l(16777216);n=o.prototype,n.m=function(){if(P(this))return-A(this).m();for(var R=0,C=1,k=0;k<this.g.length;k++){var N=this.i(k);R+=(0<=N?N:4294967296+N)*C,C*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(P(this))return"-"+A(this).toString(R);for(var C=c(Math.pow(R,6)),k=this,N="";;){var O=M(k,C).g;k=E(k,O.j(C));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(R);if(k=O,b(k))return F+N;for(;6>F.length;)F="0"+F;N=F+N}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function P(R){return R.h==-1}n.l=function(R){return R=E(this,R),P(R)?-1:b(R)?0:1};function A(R){for(var C=R.g.length,k=[],N=0;N<C;N++)k[N]=~R.g[N];return new o(k,~R.h).add(g)}n.abs=function(){return P(this)?A(this):this},n.add=function(R){for(var C=Math.max(this.g.length,R.g.length),k=[],N=0,O=0;O<=C;O++){var F=N+(this.i(O)&65535)+(R.i(O)&65535),D=(F>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);N=D>>>16,F&=65535,D&=65535,k[O]=D<<16|F}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(R,C){return R.add(A(C))}n.j=function(R){if(b(this)||b(R))return p;if(P(this))return P(R)?A(this).j(A(R)):A(A(this).j(R));if(P(R))return A(this.j(A(R)));if(0>this.l(y)&&0>R.l(y))return c(this.m()*R.m());for(var C=this.g.length+R.g.length,k=[],N=0;N<2*C;N++)k[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<R.g.length;O++){var F=this.i(N)>>>16,D=this.i(N)&65535,Et=R.i(O)>>>16,en=R.i(O)&65535;k[2*N+2*O]+=D*en,w(k,2*N+2*O),k[2*N+2*O+1]+=F*en,w(k,2*N+2*O+1),k[2*N+2*O+1]+=D*Et,w(k,2*N+2*O+1),k[2*N+2*O+2]+=F*Et,w(k,2*N+2*O+2)}for(N=0;N<C;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=C;N<2*C;N++)k[N]=0;return new o(k,0)};function w(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function x(R,C){this.g=R,this.h=C}function M(R,C){if(b(C))throw Error("division by zero");if(b(R))return new x(p,p);if(P(R))return C=M(A(R),C),new x(A(C.g),A(C.h));if(P(C))return C=M(R,A(C)),new x(A(C.g),C.h);if(30<R.g.length){if(P(R)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var k=g,N=C;0>=N.l(R);)k=W(k),N=W(N);var O=Y(k,1),F=Y(N,1);for(N=Y(N,2),k=Y(k,2);!b(N);){var D=F.add(N);0>=D.l(R)&&(O=O.add(k),F=D),N=Y(N,1),k=Y(k,1)}return C=E(R,O.j(C)),new x(O,C)}for(O=p;0<=R.l(C);){for(k=Math.max(1,Math.floor(R.m()/C.m())),N=Math.ceil(Math.log(k)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),F=c(k),D=F.j(C);P(D)||0<D.l(R);)k-=N,F=c(k),D=F.j(C);b(F)&&(F=g),O=O.add(F),R=E(R,D)}return new x(O,R)}n.A=function(R){return M(this,R).h},n.and=function(R){for(var C=Math.max(this.g.length,R.g.length),k=[],N=0;N<C;N++)k[N]=this.i(N)&R.i(N);return new o(k,this.h&R.h)},n.or=function(R){for(var C=Math.max(this.g.length,R.g.length),k=[],N=0;N<C;N++)k[N]=this.i(N)|R.i(N);return new o(k,this.h|R.h)},n.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),k=[],N=0;N<C;N++)k[N]=this.i(N)^R.i(N);return new o(k,this.h^R.h)};function W(R){for(var C=R.g.length+1,k=[],N=0;N<C;N++)k[N]=R.i(N)<<1|R.i(N-1)>>>31;return new o(k,R.h)}function Y(R,C){var k=C>>5;C%=32;for(var N=R.g.length-k,O=[],F=0;F<N;F++)O[F]=0<C?R.i(F+k)>>>C|R.i(F+k+1)<<32-C:R.i(F+k);return new o(O,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,zb=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,io=o}).apply(typeof L0<"u"?L0:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wb,tu,Hb,Jh,Ig,qb,Yb,Kb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,v){return u==Array.prototype||u==Object.prototype||(u[f]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var f=0;f<u.length;++f){var v=u[f];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function s(u,f){if(f)e:{var v=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var j=u[S];if(!(j in v))break e;v=v[j]}u=u[u.length-1],S=v[u],f=f(S),f!=S&&f!=null&&e(v,u,{configurable:!0,writable:!0,value:f})}}function r(u,f){u instanceof String&&(u+="");var v=0,S=!1,j={next:function(){if(!S&&v<u.length){var B=v++;return{value:f(B,u[B]),done:!1}}return S=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(u){return u||function(){return r(this,function(f,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,v){return u.call.apply(u.bind,arguments)}function p(u,f,v){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,S),u.apply(f,j)}}return function(){return u.apply(f,arguments)}}function g(u,f,v){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function y(u,f){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function b(u,f){function v(){}v.prototype=f.prototype,u.aa=f.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(S,j,B){for(var X=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)X[Ne-2]=arguments[Ne];return f.prototype[j].apply(S,X)}}function P(u){const f=u.length;if(0<f){const v=Array(f);for(let S=0;S<f;S++)v[S]=u[S];return v}return[]}function A(u,f){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(l(S)){const j=u.length||0,B=S.length||0;u.length=j+B;for(let X=0;X<B;X++)u[j+X]=S[X]}else u.push(S)}}class E{constructor(f,v){this.i=f,this.j=v,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function M(u){return M[" "](u),u}M[" "]=function(){};var W=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function Y(u,f,v){for(const S in u)f.call(v,u[S],S,u)}function R(u,f){for(const v in u)f.call(void 0,u[v],v,u)}function C(u){const f={};for(const v in u)f[v]=u[v];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,f){let v,S;for(let j=1;j<arguments.length;j++){S=arguments[j];for(v in S)u[v]=S[v];for(let B=0;B<k.length;B++)v=k[B],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function O(u){var f=1;u=u.split(":");const v=[];for(;0<f&&u.length;)v.push(u.shift()),f--;return u.length&&v.push(u.join(":")),v}function F(u){a.setTimeout(()=>{throw u},0)}function D(){var u=le;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Et{constructor(){this.h=this.g=null}add(f,v){const S=en.get();S.set(f,v),this.h?this.h.next=S:this.g=S,this.h=S}}var en=new E(()=>new Jn,u=>u.reset());class Jn{constructor(){this.next=this.g=this.h=null}set(f,v){this.h=f,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,Z=!1,le=new Et,U=()=>{const u=a.Promise.resolve(void 0);ft=()=>{u.then(Fe)}};var Fe=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(v){F(v)}var f=en;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Z=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};a.addEventListener("test",v,f),a.removeEventListener("test",v,f)}catch{}return u}();function tn(u,f){if(He.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(W){e:{try{M(f.nodeName);var j=!0;break e}catch{}j=!1}j||(f=null)}}else v=="mouseover"?f=u.fromElement:v=="mouseout"&&(f=u.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:it[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&tn.aa.h.call(this)}}b(tn,He);var it={2:"touch",3:"pen",4:"mouse"};tn.prototype.h=function(){tn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var bn="closure_listenable_"+(1e6*Math.random()|0),oe=0;function Ro(u,f,v,S,j){this.listener=u,this.proxy=null,this.src=f,this.type=v,this.capture=!!S,this.ha=j,this.key=++oe,this.da=this.fa=!1}function Pr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function No(u){this.src=u,this.g={},this.h=0}No.prototype.add=function(u,f,v,S,j){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var X=$i(u,f,S,j);return-1<X?(f=u[X],v||(f.fa=!1)):(f=new Ro(f,this.src,B,!!S,j),f.fa=v,u.push(f)),f};function rl(u,f){var v=f.type;if(v in u.g){var S=u.g[v],j=Array.prototype.indexOf.call(S,f,void 0),B;(B=0<=j)&&Array.prototype.splice.call(S,j,1),B&&(Pr(f),u.g[v].length==0&&(delete u.g[v],u.h--))}}function $i(u,f,v,S){for(var j=0;j<u.length;++j){var B=u[j];if(!B.da&&B.listener==f&&B.capture==!!v&&B.ha==S)return j}return-1}var Do="closure_lm_"+(1e6*Math.random()|0),zi={};function Wi(u,f,v,S,j){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Wi(u,f[B],v,S,j);return null}return v=Zn(v),u&&u[bn]?u.K(f,v,c(S)?!!S.capture:!1,j):Yf(u,f,v,!1,S,j)}function Yf(u,f,v,S,j,B){if(!f)throw Error("Invalid event type");var X=c(j)?!!j.capture:!!j,Ne=al(u);if(Ne||(u[Do]=Ne=new No(u)),v=Ne.add(f,v,S,X,B),v.proxy)return v;if(S=Kf(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)pt||(j=X),j===void 0&&(j=!1),u.addEventListener(f.toString(),S,j);else if(u.attachEvent)u.attachEvent(kc(f.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Kf(){function u(v){return f.call(u.src,u.listener,v)}const f=Qf;return u}function Ac(u,f,v,S,j){if(Array.isArray(f))for(var B=0;B<f.length;B++)Ac(u,f[B],v,S,j);else S=c(S)?!!S.capture:!!S,v=Zn(v),u&&u[bn]?(u=u.i,f=String(f).toString(),f in u.g&&(B=u.g[f],v=$i(B,v,S,j),-1<v&&(Pr(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete u.g[f],u.h--)))):u&&(u=al(u))&&(f=u.g[f.toString()],u=-1,f&&(u=$i(f,v,S,j)),(v=-1<u?f[u]:null)&&ol(v))}function ol(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[bn])rl(f.i,u);else{var v=u.type,S=u.proxy;f.removeEventListener?f.removeEventListener(v,S,u.capture):f.detachEvent?f.detachEvent(kc(v),S):f.addListener&&f.removeListener&&f.removeListener(S),(v=al(f))?(rl(v,u),v.h==0&&(v.src=null,f[Do]=null)):Pr(u)}}}function kc(u){return u in zi?zi[u]:zi[u]="on"+u}function Qf(u,f){if(u.da)u=!0;else{f=new tn(f,this);var v=u.listener,S=u.ha||u.src;u.fa&&ol(u),u=v.call(S,f)}return u}function al(u){return u=u[Do],u instanceof No?u:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zn(u){return typeof u=="function"?u:(u[bs]||(u[bs]=function(f){return u.handleEvent(f)}),u[bs])}function mt(){Re.call(this),this.i=new No(this),this.M=this,this.F=null}b(mt,Re),mt.prototype[bn]=!0,mt.prototype.removeEventListener=function(u,f,v,S){Ac(this,u,f,v,S)};function Rt(u,f){var v,S=u.F;if(S)for(v=[];S;S=S.F)v.push(S);if(u=u.M,S=f.type||f,typeof f=="string")f=new He(f,u);else if(f instanceof He)f.target=f.target||u;else{var j=f;f=new He(S,u),N(f,j)}if(j=!0,v)for(var B=v.length-1;0<=B;B--){var X=f.g=v[B];j=Mo(X,S,!0,f)&&j}if(X=f.g=u,j=Mo(X,S,!0,f)&&j,j=Mo(X,S,!1,f)&&j,v)for(B=0;B<v.length;B++)X=f.g=v[B],j=Mo(X,S,!1,f)&&j}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var v=u.g[f],S=0;S<v.length;S++)Pr(v[S]);delete u.g[f],u.h--}}this.F=null},mt.prototype.K=function(u,f,v,S){return this.i.add(String(u),f,!1,v,S)},mt.prototype.L=function(u,f,v,S){return this.i.add(String(u),f,!0,v,S)};function Mo(u,f,v,S){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var j=!0,B=0;B<f.length;++B){var X=f[B];if(X&&!X.da&&X.capture==v){var Ne=X.listener,vt=X.ha||X.src;X.fa&&rl(u.i,X),j=Ne.call(vt,S)!==!1&&j}}return j&&!S.defaultPrevented}function Cs(u,f,v){if(typeof u=="function")v&&(u=g(u,v));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Hi(u){u.g=Cs(()=>{u.g=null,u.i&&(u.i=!1,Hi(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Ps extends Re{constructor(f,v){super(),this.m=f,this.l=v,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Hi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(u){Re.call(this),this.h=u,this.g={}}b(gi,Re);var xc=[];function Oo(u){Y(u.g,function(f,v){this.g.hasOwnProperty(v)&&ol(f)},u),u.g={}}gi.prototype.N=function(){gi.aa.N.call(this),Oo(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ll=a.JSON.stringify,Gf=a.JSON.parse,Xf=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ul(){}ul.prototype.h=null;function Rc(u){return u.h||(u.h=u.i())}function Nc(){}var As={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ks(){He.call(this,"d")}b(ks,He);function Lo(){He.call(this,"c")}b(Lo,He);var vi={},Dc=null;function Vo(){return Dc=Dc||new mt}vi.La="serverreachability";function Mc(u){He.call(this,vi.La,u)}b(Mc,He);function Ar(u){const f=Vo();Rt(f,new Mc(f))}vi.STAT_EVENT="statevent";function qi(u,f){He.call(this,vi.STAT_EVENT,u),this.stat=f}b(qi,He);function st(u){const f=Vo();Rt(f,new qi(f,u))}vi.Ma="timingevent";function Oc(u,f){He.call(this,vi.Ma,u),this.size=f}b(Oc,He);function kr(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function xr(){this.g=!0}xr.prototype.xa=function(){this.g=!1};function Jf(u,f,v,S,j,B){u.info(function(){if(u.g)if(B)for(var X="",Ne=B.split("&"),vt=0;vt<Ne.length;vt++){var Ie=Ne[vt].split("=");if(1<Ie.length){var St=Ie[0];Ie=Ie[1];var It=St.split("_");X=2<=It.length&&It[1]=="type"?X+(St+"="+Ie+"&"):X+(St+"=redacted&")}}else X=null;else X=B;return"XMLHTTP REQ ("+S+") [attempt "+j+"]: "+f+`
`+v+`
`+X})}function Zf(u,f,v,S,j,B,X){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+j+"]: "+f+`
`+v+`
`+B+" "+X})}function _i(u,f,v,S){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Fo(u,v)+(S?" "+S:"")})}function xs(u,f){u.info(function(){return"TIMEOUT: "+f})}xr.prototype.info=function(){};function Fo(u,f){if(!u.g)return f;if(!f)return null;try{var v=JSON.parse(f);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var S=v[u];if(!(2>S.length)){var j=S[1];if(Array.isArray(j)&&!(1>j.length)){var B=j[0];if(B!="noop"&&B!="stop"&&B!="close")for(var X=1;X<j.length;X++)j[X]=""}}}}return ll(v)}catch{return f}}var jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Uo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cl;function Bo(){}b(Bo,ul),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},cl=new Bo;function nn(u,f,v,S){this.j=u,this.i=f,this.l=v,this.R=S||1,this.U=new gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var zt={},Nt={};function gt(u,f,v){u.L=1,u.v=Qi(et(f)),u.m=v,u.P=!0,Rr(u,null)}function Rr(u,f){u.F=Date.now(),ei(u),u.A=et(u.v);var v=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Wo(v.i,"t",S),u.C=0,v=u.j.J,u.h=new Tt,u.g=Qc(u.j,v?f:null,!u.m),0<u.O&&(u.M=new Ps(g(u.Y,u,u.g),u.O)),f=u.U,v=u.g,S=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(xc[0]=j.toString()),j=xc);for(var B=0;B<j.length;B++){var X=Wi(v,j[B],S||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ar(),Jf(u.i,u.u,u.A,u.l,u.R,u.m)}nn.prototype.ca=function(u){u=u.target;const f=this.M;f&&Wt(u)==3?f.j():this.Y(u)},nn.prototype.Y=function(u){try{if(u==this.g)e:{const It=Wt(this.g);var f=this.g.Ba();const bt=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||Hc(this.g)))){this.J||It!=4||f==7||(f==8||0>=bt?Ar(3):Ar(2)),Nr(this);var v=this.g.Z();this.X=v;t:if(Yi(this)){var S=Hc(this.g);u="";var j=S.length,B=Wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yi(this),jn(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<j;f++)this.h.h=!0,u+=this.h.i.decode(S[f],{stream:!(B&&f==j-1)});S.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=v==200,Zf(this.i,this.u,this.A,this.l,this.R,It,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,vt=this.g;if((Ne=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ne)){var Ie=Ne;break t}}Ie=null}if(v=Ie)_i(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dr(this,v);else{this.o=!1,this.s=3,st(12),yi(this),jn(this);break e}}if(this.P){v=!0;let vn;for(;!this.J&&this.C<X.length;)if(vn=Ki(this,X),vn==Nt){It==4&&(this.s=4,st(14),v=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==zt){this.s=4,st(15),_i(this.i,this.l,X,"[Invalid Chunk]"),v=!1;break}else _i(this.i,this.l,vn,null),Dr(this,vn);if(Yi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||X.length!=0||this.h.h||(this.s=1,st(16),v=!1),this.o=this.o&&v,!v)_i(this.i,this.l,X,"[Invalid Chunked Response]"),yi(this),jn(this);else if(0<X.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Al(St),St.M=!0,st(11))}}else _i(this.i,this.l,X,null),Dr(this,X);It==4&&yi(this),this.o&&!this.J&&(It==4?kl(this.j,this):(this.o=!1,ei(this)))}else qc(this.g),v==400&&0<X.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),yi(this),jn(this)}}}catch{}finally{}};function Yi(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ki(u,f){var v=u.C,S=f.indexOf(`
`,v);return S==-1?Nt:(v=Number(f.substring(v,S)),isNaN(v)?zt:(S+=1,S+v>f.length?Nt:(f=f.slice(S,S+v),u.C=S+v,f)))}nn.prototype.cancel=function(){this.J=!0,yi(this)};function ei(u){u.S=Date.now()+u.I,hl(u,u.I)}function hl(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kr(g(u.ba,u),f)}function Nr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}nn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(xs(this.i,this.A),this.L!=2&&(Ar(),st(17)),yi(this),this.s=2,jn(this)):hl(this,this.S-u)};function jn(u){u.j.G==0||u.J||kl(u.j,u)}function yi(u){Nr(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Oo(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Dr(u,f){try{var v=u.j;if(v.G!=0&&(v.g==u||$o(v.h,u))){if(!u.K&&$o(v.h,u)&&v.G==3){try{var S=v.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var j=S;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)jr(v),Lr(v);else break e;Pl(v),st(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=kr(g(v.Za,v),6e3));if(1>=ml(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ni(v,11)}else if((u.K||v.g==u)&&jr(v),!w(f))for(j=v.Da.g.parse(f),f=0;f<j.length;f++){let Ie=j[f];if(v.T=Ie[0],Ie=Ie[1],v.G==2)if(Ie[0]=="c"){v.K=Ie[1],v.ia=Ie[2];const St=Ie[3];St!=null&&(v.la=St,v.j.info("VER="+v.la));const It=Ie[4];It!=null&&(v.Aa=It,v.j.info("SVER="+v.Aa));const bt=Ie[5];bt!=null&&typeof bt=="number"&&0<bt&&(S=1.5*bt,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const vn=u.g;if(vn){const Ur=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ur){var B=S.h;B.g||Ur.indexOf("spdy")==-1&&Ur.indexOf("quic")==-1&&Ur.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(zo(B,B.h),B.h=null))}if(S.D){const Jo=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(S.ya=Jo,Ce(S.I,S.D,Jo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var X=u;if(S.qa=xl(S,S.J?S.ia:null,S.W),X.K){gl(S.h,X);var Ne=X,vt=S.L;vt&&(Ne.I=vt),Ne.B&&(Nr(Ne),ei(Ne)),S.g=X}else Fr(S);0<v.i.length&&Vr(v)}else Ie[0]!="stop"&&Ie[0]!="close"||ni(v,7);else v.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ni(v,7):Ko(v):Ie[0]!="noop"&&v.l&&v.l.ta(Ie),v.v=0)}}Ar(4)}catch{}}var dl=class{constructor(u,f){this.g=u,this.map=f}};function fl(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ml(u){return u.h?1:u.g?u.g.size:0}function $o(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function zo(u,f){u.g?u.g.add(f):u.h=f}function gl(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}fl.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const v of u.g.values())f=f.concat(v.D);return f}return P(u.i)}function Lc(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],v=u.length,S=0;S<v;S++)f.push(u[S]);return f}f=[],v=0;for(S in u)f[v++]=u[S];return f}function Vc(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var v=0;v<u;v++)f.push(v);return f}f=[],v=0;for(const S in u)f[v++]=S;return f}}}function _l(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var v=Vc(u),S=Lc(u),j=S.length,B=0;B<j;B++)f.call(void 0,S[B],v&&v[B],u)}var Cn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sn(u,f){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var S=u[v].indexOf("="),j=null;if(0<=S){var B=u[v].substring(0,S);j=u[v].substring(S+1)}else B=u[v];f(B,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function rn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof rn){this.h=u.h,Rs(this,u.j),this.o=u.o,this.g=u.g,Ns(this,u.s),this.l=u.l;var f=u.i,v=new gn;v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),Pn(this,v),this.m=u.m}else u&&(f=String(u).match(Cn))?(this.h=!1,Rs(this,f[1]||"",!0),this.o=Un(f[2]||""),this.g=Un(f[3]||"",!0),Ns(this,f[4]),this.l=Un(f[5]||"",!0),Pn(this,f[6]||"",!0),this.m=Un(f[7]||"")):(this.h=!1,this.i=new gn(null,this.h))}rn.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Gi(f,Xi,!0),":");var v=this.g;return(v||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Gi(f,Xi,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Gi(v,v.charAt(0)=="/"?jc:yl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Gi(v,ep)),u.join("")};function et(u){return new rn(u)}function Rs(u,f,v){u.j=v?Un(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Ns(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Pn(u,f,v){f instanceof gn?(u.i=f,Uc(u.i,u.h)):(v||(f=Gi(f,ti)),u.i=new gn(f,u.h))}function Ce(u,f,v){u.i.set(f,v)}function Qi(u){return Ce(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Un(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gi(u,f,v){return typeof u=="string"?(u=encodeURI(u).replace(f,Fc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xi=/[#\/\?@]/g,yl=/[#\?:]/g,jc=/[#\?]/g,ti=/[#\?@]/g,ep=/#/g;function gn(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&sn(u.i,function(f,v){u.add(decodeURIComponent(f.replace(/\+/g," ")),v)}))}n=gn.prototype,n.add=function(u,f){An(this),this.i=null,u=Bn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(f),this.h+=1,this};function wl(u,f){An(u),f=Bn(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Ds(u,f){return An(u),f=Bn(u,f),u.g.has(f)}n.forEach=function(u,f){An(this),this.g.forEach(function(v,S){v.forEach(function(j){u.call(f,j,S,this)},this)},this)},n.na=function(){An(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),v=[];for(let S=0;S<f.length;S++){const j=u[S];for(let B=0;B<j.length;B++)v.push(f[S])}return v},n.V=function(u){An(this);let f=[];if(typeof u=="string")Ds(this,u)&&(f=f.concat(this.g.get(Bn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)f=f.concat(u[v])}return f},n.set=function(u,f){return An(this),this.i=null,u=Bn(this,u),Ds(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Wo(u,f,v){wl(u,f),0<v.length&&(u.i=null,u.g.set(Bn(u,f),P(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var v=0;v<f.length;v++){var S=f[v];const B=encodeURIComponent(String(S)),X=this.V(S);for(S=0;S<X.length;S++){var j=B;X[S]!==""&&(j+="="+encodeURIComponent(String(X[S]))),u.push(j)}}return this.i=u.join("&")};function Bn(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Uc(u,f){f&&!u.j&&(An(u),u.i=null,u.g.forEach(function(v,S){var j=S.toLowerCase();S!=j&&(wl(this,S),Wo(this,j,v))},u)),u.j=f}function Bc(u,f){const v=new xr;if(a.Image){const S=new Image;S.onload=y(on,v,"TestLoadImage: loaded",!0,f,S),S.onerror=y(on,v,"TestLoadImage: error",!1,f,S),S.onabort=y(on,v,"TestLoadImage: abort",!1,f,S),S.ontimeout=y(on,v,"TestLoadImage: timeout",!1,f,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else f(!1)}function $c(u,f){const v=new xr,S=new AbortController,j=setTimeout(()=>{S.abort(),on(v,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:S.signal}).then(B=>{clearTimeout(j),B.ok?on(v,"TestPingServer: ok",!0,f):on(v,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),on(v,"TestPingServer: error",!1,f)})}function on(u,f,v,S,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),S(v)}catch{}}function tp(){this.g=new Xf}function zc(u,f,v){const S=v||"";try{_l(u,function(j,B){let X=j;c(j)&&(X=ll(j)),f.push(S+B+"="+encodeURIComponent(X))})}catch(j){throw f.push(S+"type="+encodeURIComponent("_badmap")),j}}function Ms(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Ms,ul),Ms.prototype.g=function(){return new Ji(this.l,this.j)},Ms.prototype.i=function(u){return function(){return u}}({});function Ji(u,f){mt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ji,mt),n=Ji.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,wi(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ho(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ho(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Mr(this):wi(this),this.readyState==3&&Ho(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Mr(this))},n.Qa=function(u){this.g&&(this.response=u,Mr(this))},n.ga=function(){this.g&&Mr(this)};function Mr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,wi(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var v=f.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=f.next();return u.join(`\r
`)};function wi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wc(u){let f="";return Y(u,function(v,S){f+=S,f+=":",f+=v,f+=`\r
`}),f}function qo(u,f,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Wc(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Ce(u,f,v))}function $e(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b($e,mt);var El=/^https?$/i,Tl=["POST","PUT"];n=$e.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cl.g(),this.v=this.o?Rc(this.o):Rc(cl),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(B){Sl(this,B);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var j in S)v.set(j,S[j]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const B of S.keys())v.set(B,S.get(B));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),j=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Tl,f,void 0))||S||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of v)this.g.setRequestHeader(B,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Il(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){Sl(this,B)}};function Sl(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Os(u),Or(u)}function Os(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Rt(this,"complete"),Rt(this,"abort"),Or(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Or(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Yo(this):this.bb())},n.bb=function(){Yo(this)};function Yo(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Wt(u)!=4||u.Z()!=2)){if(u.u&&Wt(u)==4)Cs(u.Ea,0,u);else if(Rt(u,"readystatechange"),Wt(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var v;if(!(v=f)){var S;if(S=X===0){var j=String(u.D).match(Cn)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),S=!El.test(j?j.toLowerCase():"")}v=S}if(v)Rt(u,"complete"),Rt(u,"success");else{u.m=6;try{var B=2<Wt(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Os(u)}}finally{Or(u)}}}}function Or(u,f){if(u.g){Il(u);const v=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Rt(u,"ready");try{v.onreadystatechange=S}catch{}}}function Il(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Wt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Gf(f)}};function Hc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qc(u){const f={};u=(u.g&&2<=Wt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(w(u[S]))continue;var v=O(u[S]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=f[j]||[];f[j]=B,B.push(v)}R(f,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(u,f,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||f}function bl(u){this.Aa=0,this.i=[],this.j=new xr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,u),this.cb=Ls("retryDelaySeedMs",1e4,u),this.Wa=Ls("forwardChannelMaxRetries",2,u),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new fl(u&&u.concurrentRequestLimit),this.Da=new tp,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bl.prototype,n.la=8,n.G=1,n.connect=function(u,f,v,S){st(0),this.W=u,this.H=f||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=xl(this,null,this.W),Vr(this)};function Ko(u){if(Qo(u),u.G==3){var f=u.U++,v=et(u.I);if(Ce(v,"SID",u.K),Ce(v,"RID",f),Ce(v,"TYPE","terminate"),Vs(u,v),f=new nn(u,u.j,f),f.L=2,f.v=Qi(et(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=f.v,v=!0),v||(f.g=Qc(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ei(f)}Kc(u)}function Lr(u){u.g&&(Al(u),u.g.cancel(),u.g=null)}function Qo(u){Lr(u),u.u&&(a.clearTimeout(u.u),u.u=null),jr(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Vr(u){if(!pl(u.h)&&!u.s){u.s=!0;var f=u.Ga;ft||U(),Z||(ft(),Z=!0),le.add(f,u),u.B=0}}function np(u,f){return ml(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kr(g(u.Ga,u,f),Ei(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new nn(this,this.j,u);let B=this.o;if(this.S&&(B?(B=C(B),N(B,this.S)):B=this.S),this.m!==null||this.O||(j.H=B,B=null),this.P)e:{for(var f=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=v;break e}if(f===4096||v===this.i.length-1){f=v+1;break e}}f=1e3}else f=1e3;f=Cl(this,j,f),v=et(this.I),Ce(v,"RID",u),Ce(v,"CVER",22),this.D&&Ce(v,"X-HTTP-Session-Id",this.D),Vs(this,v),B&&(this.O?f="headers="+encodeURIComponent(String(Wc(B)))+"&"+f:this.m&&qo(v,this.m,B)),zo(this.h,j),this.Ua&&Ce(v,"TYPE","init"),this.P?(Ce(v,"$req",f),Ce(v,"SID","null"),j.T=!0,gt(j,v,null)):gt(j,v,f),this.G=2}}else this.G==3&&(u?Yc(this,u):this.i.length==0||pl(this.h)||Yc(this))};function Yc(u,f){var v;f?v=f.l:v=u.U++;const S=et(u.I);Ce(S,"SID",u.K),Ce(S,"RID",v),Ce(S,"AID",u.T),Vs(u,S),u.m&&u.o&&qo(S,u.m,u.o),v=new nn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Cl(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),zo(u.h,v),gt(v,S,f)}function Vs(u,f){u.H&&Y(u.H,function(v,S){Ce(f,S,v)}),u.l&&_l({},function(v,S){Ce(f,S,v)})}function Cl(u,f,v){v=Math.min(u.i.length,v);var S=u.l?g(u.l.Na,u.l,u):null;e:{var j=u.i;let B=-1;for(;;){const X=["count="+v];B==-1?0<v?(B=j[0].g,X.push("ofs="+B)):B=0:X.push("ofs="+B);let Ne=!0;for(let vt=0;vt<v;vt++){let Ie=j[vt].g;const St=j[vt].map;if(Ie-=B,0>Ie)B=Math.max(0,j[vt].g-100),Ne=!1;else try{zc(St,X,"req"+Ie+"_")}catch{S&&S(St)}}if(Ne){S=X.join("&");break e}}}return u=u.i.splice(0,v),f.D=u,S}function Fr(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ft||U(),Z||(ft(),Z=!0),le.add(f,u),u.v=0}}function Pl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kr(g(u.Fa,u),Ei(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Go(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kr(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Lr(this),Go(this))};function Al(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Go(u){u.g=new nn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=et(u.qa);Ce(f,"RID","rpc"),Ce(f,"SID",u.K),Ce(f,"AID",u.T),Ce(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ce(f,"TO",u.ja),Ce(f,"TYPE","xmlhttp"),Vs(u,f),u.m&&u.o&&qo(f,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Qi(et(f)),v.m=null,v.P=!0,Rr(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Lr(this),Pl(this),st(19))};function jr(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function kl(u,f){var v=null;if(u.g==f){jr(u),Al(u),u.g=null;var S=2}else if($o(u.h,f))v=f.D,gl(u.h,f),S=1;else return;if(u.G!=0){if(f.o)if(S==1){v=f.m?f.m.length:0,f=Date.now()-f.F;var j=u.B;S=Vo(),Rt(S,new Oc(S,v)),Vr(u)}else Fr(u);else if(j=f.s,j==3||j==0&&0<f.X||!(S==1&&np(u,f)||S==2&&Pl(u)))switch(v&&0<v.length&&(f=u.h,f.i=f.i.concat(v)),j){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function Ei(u,f){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*f}function ni(u,f){if(u.j.info("Error code "+f),f==2){var v=g(u.fb,u),S=u.Xa;const j=!S;S=new rn(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rs(S,"https"),Qi(S),j?Bc(S.toString(),v):$c(S.toString(),v)}else st(2);u.G=0,u.l&&u.l.sa(f),Kc(u),Qo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Kc(u){if(u.G=0,u.ka=[],u.l){const f=vl(u.h);(f.length!=0||u.i.length!=0)&&(A(u.ka,f),A(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function xl(u,f,v){var S=v instanceof rn?et(v):new rn(v);if(S.g!="")f&&(S.g=f+"."+S.g),Ns(S,S.s);else{var j=a.location;S=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;var B=new rn(null);S&&Rs(B,S),f&&(B.g=f),j&&Ns(B,j),v&&(B.l=v),S=B}return v=u.D,f=u.ya,v&&f&&Ce(S,v,f),Ce(S,"VER",u.la),Vs(u,S),S}function Qc(u,f,v){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new $e(new Ms({eb:v})):new $e(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gc(){}n=Gc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xo(){}Xo.prototype.g=function(u,f){return new an(u,f)};function an(u,f){mt.call(this),this.g=new bl(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Fs(this)}b(an,mt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Ko(this.g)},an.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ll(u),u=v);f.i.push(new dl(f.Ya++,u)),f.G==3&&Vr(f)},an.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,an.aa.N.call(this)};function Rl(u){ks.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const v in f){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}b(Rl,ks);function Nl(){Lo.call(this),this.status=1}b(Nl,Lo);function Fs(u){this.g=u}b(Fs,Gc),Fs.prototype.ua=function(){Rt(this.g,"a")},Fs.prototype.ta=function(u){Rt(this.g,new Rl(u))},Fs.prototype.sa=function(u){Rt(this.g,new Nl)},Fs.prototype.ra=function(){Rt(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Kb=function(){return new Xo},Yb=function(){return Vo()},qb=vi,Ig={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,Jh=jo,Uo.COMPLETE="complete",Hb=Uo,Nc.EventType=As,As.OPEN="a",As.CLOSE="b",As.ERROR="c",As.MESSAGE="d",mt.prototype.listen=mt.prototype.K,tu=Nc,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Wb=$e}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new $v("@firebase/firestore");function Wl(){return mo.logLevel}function re(n,...e){if(mo.logLevel<=Se.DEBUG){const t=e.map(t_);mo.debug(`Firestore (${el}): ${n}`,...t)}}function ys(n,...e){if(mo.logLevel<=Se.ERROR){const t=e.map(t_);mo.error(`Firestore (${el}): ${n}`,...t)}}function ja(n,...e){if(mo.logLevel<=Se.WARN){const t=e.map(t_);mo.warn(`Firestore (${el}): ${n}`,...t)}}function t_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(n="Unexpected state"){const e=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: `+n;throw ys(e),new Error(e)}function Ae(n,e){n||ue()}function pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kt.UNAUTHENTICATED))}shutdown(){}}class F2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j2{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let r=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Oi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Oi)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string"),new Qb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Kt(e)}}class U2{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B2{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new U2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ae(this.o===void 0);const i=r=>{r.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new $2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=W2(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function ke(n,e){return n<e?-1:n>e?1:0}function Ua(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new wt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new wt(0,0))}static max(){return new he(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t,i){t===void 0?t=0:t>e.length&&ue(),i===void 0?i=e.length-t:i>e.length-t&&ue(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Hu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hu?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),o=t.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ue extends Hu{construct(e,t,i){return new Ue(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Ue(t)}static emptyPath(){return new Ue([])}}const H2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Hu{construct(e,t,i){return new Vt(e,t,i)}static isValidIdentifier(e){return H2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ee(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new ee(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ue.fromString(e))}static fromName(e){return new ae(Ue.fromString(e).popFirst(5))}static empty(){return new ae(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ue(e.slice()))}}function q2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=he.fromTimestamp(i===1e9?new wt(t+1,0):new wt(t,i));return new _r(s,ae.empty(),e)}function Y2(n){return new _r(n.readTime,n.key,-1)}class _r{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new _r(he.min(),ae.empty(),-1)}static max(){return new _r(he.max(),ae.empty(),-1)}}function K2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==Q2)throw n;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,i)=>{t(e)})}static reject(e){return new K((t,i)=>{i(e)})}static waitFor(e){return new K((t,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&t()},l=>i(l))}),o=!0,r===s&&t()})}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next(s=>s?K.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new K((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===r&&i(o)},d=>s(d))}})}static doWhile(e,t){return new K((i,s)=>{const r=()=>{e()===!0?t().next(()=>{r()},s):i()};r()})}}function X2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}n_.oe=-1;function mc(n){return n==null}function Fd(n){return n===0&&1/n==-1/0}function J2(n){return typeof n=="number"&&Number.isInteger(n)&&!Fd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Xb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new Ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=s??Ot.EMPTY,this.right=r??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Ot(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,t,i,s,r){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new j0(this.data.getIterator())}getIteratorFrom(e){return new j0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class j0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new jt(Vt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Jb("Invalid base64 string: "+r):r}}(e);return new $t(t)}static fromUint8Array(e){const t=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(n){if(Ae(!!n),typeof n=="string"){let e=0;const t=Z2.exec(n);if(Ae(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function go(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function s_(n){const e=n.mapValue.fields.__previous_value__;return i_(e)?s_(e):e}function qu(n){const e=yr(n.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t,i,s,r,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch={mapValue:{}};function vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?i_(n)?4:nO(n)?9007199254740991:tO(n)?10:11:ue()}function Vi(n,e){if(n===e)return!0;const t=vo(n);if(t!==vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qu(n).isEqual(qu(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=yr(s.timestampValue),a=yr(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,r){return go(s.bytesValue).isEqual(go(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,r){return ot(s.geoPointValue.latitude)===ot(r.geoPointValue.latitude)&&ot(s.geoPointValue.longitude)===ot(r.geoPointValue.longitude)}(n,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return ot(s.integerValue)===ot(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=ot(s.doubleValue),a=ot(r.doubleValue);return o===a?Fd(o)===Fd(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ua(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(F0(o)!==F0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Vi(o[l],a[l])))return!1;return!0}(n,e);default:return ue()}}function Ku(n,e){return(n.values||[]).find(t=>Vi(t,e))!==void 0}function Ba(n,e){if(n===e)return 0;const t=vo(n),i=vo(e);if(t!==i)return ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return function(r,o){const a=ot(r.integerValue||r.doubleValue),l=ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return U0(n.timestampValue,e.timestampValue);case 4:return U0(qu(n),qu(e));case 5:return ke(n.stringValue,e.stringValue);case 6:return function(r,o){const a=go(r),l=go(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ke(a[c],l[c]);if(d!==0)return d}return ke(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const a=ke(ot(r.latitude),ot(o.latitude));return a!==0?a:ke(ot(r.longitude),ot(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return B0(n.arrayValue,e.arrayValue);case 10:return function(r,o){var a,l,c,d;const p=r.fields||{},g=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(l=g.value)===null||l===void 0?void 0:l.arrayValue,P=ke(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:B0(y,b)}(n.mapValue,e.mapValue);case 11:return function(r,o){if(r===Ch.mapValue&&o===Ch.mapValue)return 0;if(r===Ch.mapValue)return 1;if(o===Ch.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=ke(l[p],d[p]);if(g!==0)return g;const y=Ba(a[l[p]],c[d[p]]);if(y!==0)return y}return ke(l.length,d.length)}(n.mapValue,e.mapValue);default:throw ue()}}function U0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=yr(n),i=yr(e),s=ke(t.seconds,i.seconds);return s!==0?s:ke(t.nanos,i.nanos)}function B0(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const r=Ba(t[s],i[s]);if(r)return r}return ke(t.length,i.length)}function $a(n){return bg(n)}function bg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=yr(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return go(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ae.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const r of t.values||[])s?s=!1:i+=",",i+=bg(r);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${bg(t.fields[o])}`;return s+"}"}(n.mapValue):ue()}function $0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cg(n){return!!n&&"integerValue"in n}function r_(n){return!!n&&"arrayValue"in n}function z0(n){return!!n&&"nullValue"in n}function W0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zh(n){return!!n&&"mapValue"in n}function tO(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ao(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=mu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=Vt.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,s),i={},s=[],t=a.popLast()}o?i[a.lastSegment()]=mu(o):s.push(a.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());Zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Zh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ao(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new hn(mu(this.value))}}function Zb(n){const e=[];return Ao(n.fields,(t,i)=>{const s=new Vt([t]);if(Zh(i)){const r=Zb(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t,i,s,r,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,he.min(),he.min(),he.min(),hn.empty(),0)}static newFoundDocument(e,t,i,s){return new kt(e,1,t,he.min(),i,s,0)}static newNoDocument(e,t){return new kt(e,2,t,he.min(),he.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new kt(e,3,t,he.min(),he.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.position=e,this.inclusive=t}}function H0(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(r.field.isKeyField()?i=ae.comparator(ae.fromName(o.referenceValue),t.key):i=Ba(o,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function q0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function iO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{}class dt extends e1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new rO(e,t,i):t==="array-contains"?new lO(e,i):t==="in"?new uO(e,i):t==="not-in"?new cO(e,i):t==="array-contains-any"?new hO(e,i):new dt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new oO(e,i):new aO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ba(t,this.value)):t!==null&&vo(this.value)===vo(t)&&this.matchesComparison(Ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends e1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new pi(e,t)}matches(e){return t1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function t1(n){return n.op==="and"}function n1(n){return sO(n)&&t1(n)}function sO(n){for(const e of n.filters)if(e instanceof pi)return!1;return!0}function Pg(n){if(n instanceof dt)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(n1(n))return n.filters.map(e=>Pg(e)).join(",");{const e=n.filters.map(t=>Pg(t)).join(",");return`${n.op}(${e})`}}function i1(n,e){return n instanceof dt?function(i,s){return s instanceof dt&&i.op===s.op&&i.field.isEqual(s.field)&&Vi(i.value,s.value)}(n,e):n instanceof pi?function(i,s){return s instanceof pi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&i1(o,s.filters[a]),!0):!1}(n,e):void ue()}function s1(n){return n instanceof dt?function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`}(n):n instanceof pi?function(t){return t.op.toString()+" {"+t.getFilters().map(s1).join(" ,")+"}"}(n):"Filter"}class rO extends dt{constructor(e,t,i){super(e,t,i),this.key=ae.fromName(i.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class oO extends dt{constructor(e,t){super(e,"in",t),this.keys=r1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aO extends dt{constructor(e,t){super(e,"not-in",t),this.keys=r1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function r1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ae.fromName(i.referenceValue))}class lO extends dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return r_(t)&&Ku(t.arrayValue,this.value)}}class uO extends dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ku(this.value.arrayValue,t)}}class cO extends dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ku(this.value.arrayValue,t)}}class hO extends dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!r_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ku(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,t=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.ue=null}}function Y0(n,e=null,t=[],i=[],s=null,r=null,o=null){return new dO(n,e,t,i,s,r,o)}function o_(n){const e=pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Pg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),mc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>$a(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>$a(i)).join(",")),e.ue=t}return e.ue}function a_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!i1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!q0(n.startAt,e.startAt)&&q0(n.endAt,e.endAt)}function Ag(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fO(n,e,t,i,s,r,o,a){return new tl(n,e,t,i,s,r,o,a)}function bf(n){return new tl(n)}function K0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function o1(n){return n.collectionGroup!==null}function gu(n){const e=pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const r of e.explicitOrderBy)e.ce.push(r),t.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jt(Vt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(r=>{t.has(r.canonicalString())||r.isKeyField()||e.ce.push(new Qu(r,i))}),t.has(Vt.keyField().canonicalString())||e.ce.push(new Qu(Vt.keyField(),i))}return e.ce}function Li(n){const e=pe(n);return e.le||(e.le=pO(e,gu(n))),e.le}function pO(n,e){if(n.limitType==="F")return Y0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Qu(s.field,r)});const t=n.endAt?new jd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new jd(n.startAt.position,n.startAt.inclusive):null;return Y0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function kg(n,e){const t=n.filters.concat([e]);return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ud(n,e,t){return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cf(n,e){return a_(Li(n),Li(e))&&n.limitType===e.limitType}function a1(n){return`${o_(Li(n))}|lt:${n.limitType}`}function ia(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>s1(s)).join(", ")}]`),mc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>$a(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>$a(s)).join(",")),`Target(${i})`}(Li(n))}; limitType=${n.limitType})`}function Pf(n,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):ae.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(n,e)&&function(i,s){for(const r of gu(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(o,a,l){const c=H0(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,gu(i),s)||i.endAt&&!function(o,a,l){const c=H0(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,gu(i),s))}(n,e)}function mO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function l1(n){return(e,t)=>{let i=!1;for(const s of gu(n)){const r=gO(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function gO(n,e,t){const i=n.field.isKeyField()?ae.comparator(e.key,t.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Ba(l,c):ue()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return Xb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=new Ze(ae.comparator);function ws(){return vO}const u1=new Ze(ae.comparator);function nu(...n){let e=u1;for(const t of n)e=e.insert(t.key,t);return e}function c1(n){let e=u1;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function eo(){return vu()}function h1(){return vu()}function vu(){return new nl(n=>n.toString(),(n,e)=>n.isEqual(e))}const _O=new Ze(ae.comparator),yO=new jt(ae.comparator);function Ee(...n){let e=yO;for(const t of n)e=e.add(t);return e}const wO=new jt(ke);function EO(){return wO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fd(e)?"-0":e}}function d1(n){return{integerValue:""+n}}function TO(n,e){return J2(e)?d1(e):l_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this._=void 0}}function SO(n,e,t){return n instanceof Gu?function(s,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&i_(r)&&(r=s_(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(t,e):n instanceof Xu?p1(n,e):n instanceof Ju?m1(n,e):function(s,r){const o=f1(s,r),a=Q0(o)+Q0(s.Pe);return Cg(o)&&Cg(s.Pe)?d1(a):l_(s.serializer,a)}(n,e)}function IO(n,e,t){return n instanceof Xu?p1(n,e):n instanceof Ju?m1(n,e):t}function f1(n,e){return n instanceof Bd?function(i){return Cg(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Gu extends Af{}class Xu extends Af{constructor(e){super(),this.elements=e}}function p1(n,e){const t=g1(e);for(const i of n.elements)t.some(s=>Vi(s,i))||t.push(i);return{arrayValue:{values:t}}}class Ju extends Af{constructor(e){super(),this.elements=e}}function m1(n,e){let t=g1(e);for(const i of n.elements)t=t.filter(s=>!Vi(s,i));return{arrayValue:{values:t}}}class Bd extends Af{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Q0(n){return ot(n.integerValue||n.doubleValue)}function g1(n){return r_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t){this.field=e,this.transform=t}}function CO(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Xu&&s instanceof Xu||i instanceof Ju&&s instanceof Ju?Ua(i.elements,s.elements,Vi):i instanceof Bd&&s instanceof Bd?Vi(i.Pe,s.Pe):i instanceof Gu&&s instanceof Gu}(n.transform,e.transform)}class PO{constructor(e,t){this.version=e,this.transformResults=t}}class Gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class kf{}function v1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new u_(n.key,Gt.none()):new gc(n.key,n.data,Gt.none());{const t=n.data,i=hn.empty();let s=new jt(Vt.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Cr(n.key,i,new Nn(s.toArray()),Gt.none())}}function AO(n,e,t){n instanceof gc?function(s,r,o){const a=s.value.clone(),l=X0(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Cr?function(s,r,o){if(!ed(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=X0(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(_1(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function _u(n,e,t,i){return n instanceof gc?function(r,o,a,l){if(!ed(r.precondition,o))return a;const c=r.value.clone(),d=J0(r.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Cr?function(r,o,a,l){if(!ed(r.precondition,o))return a;const c=J0(r.fieldTransforms,l,o),d=o.data;return d.setAll(_1(r)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(n,e,t,i):function(r,o,a){return ed(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function kO(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=f1(i.transform,s||null);r!=null&&(t===null&&(t=hn.empty()),t.set(i.field,r))}return t||null}function G0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Ua(i,s,(r,o)=>CO(r,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gc extends kf{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cr extends kf{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function _1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function X0(n,e,t){const i=new Map;Ae(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,IO(o,a,t[s]))}return i}function J0(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,SO(r,o,e))}return i}class u_ extends kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y1 extends kf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&AO(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=_u(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=_u(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=h1();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(s.key)?null:a;const l=v1(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(t,i)=>G0(t,i))&&Ua(this.baseMutations,e.baseMutations,(t,i)=>G0(t,i))}}class c_{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Ae(e.mutations.length===i.length);let s=function(){return _O}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new c_(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,be;function w1(n){switch(n){default:return ue();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function E1(n){if(n===void 0)return ys("GRPC error has no .code"),H.UNKNOWN;switch(n){case ct.OK:return H.OK;case ct.CANCELLED:return H.CANCELLED;case ct.UNKNOWN:return H.UNKNOWN;case ct.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case ct.INTERNAL:return H.INTERNAL;case ct.UNAVAILABLE:return H.UNAVAILABLE;case ct.UNAUTHENTICATED:return H.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case ct.NOT_FOUND:return H.NOT_FOUND;case ct.ALREADY_EXISTS:return H.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return H.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case ct.ABORTED:return H.ABORTED;case ct.OUT_OF_RANGE:return H.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return H.UNIMPLEMENTED;case ct.DATA_LOSS:return H.DATA_LOSS;default:return ue()}}(be=ct||(ct={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new io([4294967295,4294967295],0);function Z0(n){const e=DO().encode(n),t=new zb;return t.update(e),new Uint8Array(t.digest())}function eE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new io([t,i],0),new io([s,r],0)]}class h_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new iu(`Invalid padding: ${t}`);if(i<0)throw new iu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new iu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=io.fromNumber(this.Ie)}Ee(e,t,i){let s=e.add(t.multiply(io.fromNumber(i)));return s.compare(MO)===1&&(s=new io([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Z0(e),[i,s]=eE(t);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);if(!this.de(o))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new h_(r,s,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=Z0(e),[i,s]=eE(t);for(let r=0;r<this.hashCount;r++){const o=this.Ee(i,s,r);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new xf(he.min(),s,new Ze(ke),ws(),Ee())}}class vc{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vc(i,t,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t,i,s){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=s}}class T1{constructor(e,t){this.targetId=e,this.me=t}}class S1{constructor(e,t,i=$t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class tE{constructor(){this.fe=0,this.ge=iE(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),t=Ee(),i=Ee();return this.ge.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:ue()}}),new vc(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=iE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OO{constructor(e){this.Le=e,this.Be=new Map,this.ke=ws(),this.qe=nE(),this.Qe=new Ze(ke)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,i=e.me.count,s=this.Je(t);if(s){const r=s.target;if(Ag(r))if(i===0){const o=new ae(r.path);this.Ue(t,o,kt.newNoDocument(o,he.min()))}else Ae(i===1);else{const o=this.Ye(t);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=t;let o,a;try{o=go(i).toUint8Array()}catch(l){if(l instanceof Jb)return ja("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new h_(o,s,r)}catch(l){return ja(l instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let s=0;return i.forEach(r=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,r,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((r,o)=>{const a=this.Je(o);if(a){if(r.current&&Ag(a.target)){const l=new ae(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,kt.newNoDocument(l,e))}r.be&&(t.set(o,r.ve()),r.Ce())}});let i=Ee();this.qe.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.ke.forEach((r,o)=>o.setReadTime(e));const s=new xf(e,t,this.Qe,this.ke,i);return this.ke=ws(),this.qe=nE(),this.Qe=new Ze(ke),s}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new tE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new jt(ke),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function nE(){return new Ze(ae.comparator)}function iE(){return new Ze(ae.comparator)}const LO={asc:"ASCENDING",desc:"DESCENDING"},VO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FO={and:"AND",or:"OR"};class jO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xg(n,e){return n.useProto3Json||mc(e)?e:{value:e}}function $d(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UO(n,e){return $d(n,e.toTimestamp())}function Mn(n){return Ae(!!n),he.fromTimestamp(function(t){const i=yr(t);return new wt(i.seconds,i.nanos)}(n))}function d_(n,e){return Rg(n,e).canonicalString()}function Rg(n,e){const t=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function b1(n){const e=Ue.fromString(n);return Ae(R1(e)),e}function zd(n,e){return d_(n.databaseId,e.path)}function yu(n,e){const t=b1(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(P1(t))}function C1(n,e){return d_(n.databaseId,e)}function BO(n){const e=b1(n);return e.length===4?Ue.emptyPath():P1(e)}function Ng(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function P1(n){return Ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function sE(n,e,t){return{name:zd(n,e),fields:t.value.mapValue.fields}}function $O(n,e){return"found"in e?function(i,s){Ae(!!s.found),s.found.name,s.found.updateTime;const r=yu(i,s.found.name),o=Mn(s.found.updateTime),a=s.found.createTime?Mn(s.found.createTime):he.min(),l=new hn({mapValue:{fields:s.found.fields}});return kt.newFoundDocument(r,o,a,l)}(n,e):"missing"in e?function(i,s){Ae(!!s.missing),Ae(!!s.readTime);const r=yu(i,s.missing),o=Mn(s.readTime);return kt.newNoDocument(r,o)}(n,e):ue()}function zO(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(c,d){return c.useProto3Json?(Ae(d===void 0||typeof d=="string"),$t.fromBase64String(d||"")):(Ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array),$t.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?H.UNKNOWN:E1(c.code);return new ee(d,c.message||"")}(o);t=new S1(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=yu(n,i.document.name),r=Mn(i.document.updateTime),o=i.document.createTime?Mn(i.document.createTime):he.min(),a=new hn({mapValue:{fields:i.document.fields}}),l=kt.newFoundDocument(s,r,o,a),c=i.targetIds||[],d=i.removedTargetIds||[];t=new td(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=yu(n,i.document),r=i.readTime?Mn(i.readTime):he.min(),o=kt.newNoDocument(s,r),a=i.removedTargetIds||[];t=new td([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=yu(n,i.document),r=i.removedTargetIds||[];t=new td([],r,s,null)}else{if(!("filter"in e))return ue();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new NO(s,r),a=i.targetId;t=new T1(a,o)}}return t}function A1(n,e){let t;if(e instanceof gc)t={update:sE(n,e.key,e.value)};else if(e instanceof u_)t={delete:zd(n,e.key)};else if(e instanceof Cr)t={update:sE(n,e.key,e.data),updateMask:JO(e.fieldMask)};else{if(!(e instanceof y1))return ue();t={verify:zd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ju)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:UO(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ue()}(n,e.precondition)),t}function WO(n,e){return n&&n.length>0?(Ae(e!==void 0),n.map(t=>function(s,r){let o=s.updateTime?Mn(s.updateTime):Mn(r);return o.isEqual(he.min())&&(o=Mn(r)),new PO(o,s.transformResults||[])}(t,e))):[]}function HO(n,e){return{documents:[C1(n,e.path)]}}function qO(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=C1(n,s);const r=function(c){if(c.length!==0)return x1(pi.create(c,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:sa(g.field),direction:QO(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=xg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:s}}function YO(n){let e=BO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Ae(i===1);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let r=[];t.where&&(r=function(p){const g=k1(p);return g instanceof pi&&n1(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(b){return new Qu(ra(b.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,mc(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(p){const g=!!p.before,y=p.values||[];return new jd(y,g)}(t.startAt));let c=null;return t.endAt&&(c=function(p){const g=!p.before,y=p.values||[];return new jd(y,g)}(t.endAt)),fO(e,s,o,r,a,"F",l,c)}function KO(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function k1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ra(t.unaryFilter.field);return dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ra(t.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ra(t.unaryFilter.field);return dt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ra(t.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(n):n.fieldFilter!==void 0?function(t){return dt.create(ra(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return pi.create(t.compositeFilter.filters.map(i=>k1(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(t.compositeFilter.op))}(n):ue()}function QO(n){return LO[n]}function GO(n){return VO[n]}function XO(n){return FO[n]}function sa(n){return{fieldPath:n.canonicalString()}}function ra(n){return Vt.fromServerFormat(n.fieldPath)}function x1(n){return n instanceof dt?function(t){if(t.op==="=="){if(W0(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NAN"}};if(z0(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W0(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NAN"}};if(z0(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(t.field),op:GO(t.op),value:t.value}}}(n):n instanceof pi?function(t){const i=t.getFilters().map(s=>x1(s));return i.length===1?i[0]:{compositeFilter:{op:XO(t.op),filters:i}}}(n):ue()}function JO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function R1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t,i,s,r=he.min(),o=he.min(),a=$t.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.ct=e}}function eL(n){const e=YO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.un=new nL}addToCollectionParentIndex(e,t){return this.un.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(_r.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class nL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new jt(Ue.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new jt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new za(0)}static kn(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.changes=new nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&_u(i.mutation,s,Nn.empty(),wt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ee()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ee()){const s=eo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let o=nu();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=eo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ee()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,s){let r=ws();const o=vu(),a=function(){return vu()}();return t.forEach((l,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Cr)?r=r.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),_u(d.mutation,c,d.mutation.getFieldMask(),wt.now())):o.set(c.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var p;return a.set(c,new sL(d,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){const i=vu();let s=new Ze((o,a)=>o-a),r=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let d=i.get(l)||Nn.empty();d=a.applyToLocalView(c,d),i.set(l,d);const p=(s.get(a.batchId)||Ee()).add(l);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,p=h1();d.forEach(g=>{if(!r.has(g)){const y=v1(t.get(g),i.get(g));y!==null&&p.set(g,y),r=r.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return K.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):o1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):K.resolve(eo());let a=-1,l=r;return o.next(c=>K.forEach(c,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),r.get(d)?K.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,Ee())).next(d=>({batchId:a,changes:c1(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(i=>{let s=nu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const r=t.collectionGroup;let o=nu();return this.indexManager.getCollectionParents(e,r).next(a=>K.forEach(a,l=>{const c=function(p,g){return new tl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s))).next(o=>{r.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,kt.newInvalidDocument(d)))});let a=nu();return o.forEach((l,c)=>{const d=r.get(l);d!==void 0&&_u(d.mutation,c,Nn.empty(),wt.now()),Pf(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return K.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Mn(s.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(s){return{name:s.name,query:eL(s.bundledQuery),readTime:Mn(s.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.overlays=new Ze(ae.comparator),this.Ir=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=eo();return K.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.ht(e,t,r)}),K.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Ir.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const s=eo(),r=t.length+1,o=new ae(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return K.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new Ze((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let d=r.get(c.largestBatchId);d===null&&(d=eo(),r=r.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=eo(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return K.resolve(a)}ht(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new RO(t,i));let r=this.Ir.get(t);r===void 0&&(r=Ee(),this.Ir.set(t,r)),this.Ir.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.Tr=new jt(Pt.Er),this.dr=new jt(Pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Pt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Pt(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new ae(new Ue([])),i=new Pt(t,e),s=new Pt(t,e+1),r=[];return this.dr.forEachInRange([i,s],o=>{this.Vr(o),r.push(o.key)}),r}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ae(new Ue([])),i=new Pt(t,e),s=new Pt(t,e+1);let r=Ee();return this.dr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new Pt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Pt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ae.comparator(e.key,t.key)||ke(e.wr,t.wr)}static Ar(e,t){return ke(e.wr,t.wr)||ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new jt(Pt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xO(r,t,i,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Pt(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,t){return K.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.vr(i),r=s<0?0:s;return K.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Pt(t,0),s=new Pt(t,Number.POSITIVE_INFINITY),r=[];return this.br.forEachInRange([i,s],o=>{const a=this.Dr(o.wr);r.push(a)}),K.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new jt(ke);return t.forEach(s=>{const r=new Pt(s,0),o=new Pt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([r,o],a=>{i=i.add(a.wr)})}),K.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;ae.isDocumentKey(r)||(r=r.child(""));const o=new Pt(new ae(r),0);let a=new jt(ke);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),K.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return K.forEach(t.mutations,s=>{const r=new Pt(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new Pt(t,0),s=this.br.firstAfterOrEqual(i);return K.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.Mr=e,this.docs=function(){return new Ze(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():kt.newInvalidDocument(t))}getEntries(e,t){let i=ws();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():kt.newInvalidDocument(s))}),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=ws();const o=t.path,a=new ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||K2(Y2(d),i)<=0||(s.has(d.key)||Pf(t,d))&&(r=r.insert(d.key,d.mutableCopy()))}return K.resolve(r)}getAllFromCollectionGroup(e,t,i,s){ue()}Or(e,t){return K.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new hL(this)}getSize(e){return K.resolve(this.size)}}class hL extends iL{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),K.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.persistence=e,this.Nr=new nl(t=>o_(t),a_),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new f_,this.targetCount=0,this.kr=za.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,s)=>t(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),K.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new za(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Kn(t),K.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Nr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),K.waitFor(r).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,t){this.qr={},this.overlays={},this.Qr=new n_(0),this.Kr=!1,this.Kr=!0,this.$r=new lL,this.referenceDelegate=e(this),this.Ur=new dL(this),this.indexManager=new tL,this.remoteDocumentCache=function(s){return new cL(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new ZO(t),this.Gr=new oL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new uL(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const s=new pL(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(r=>this.referenceDelegate.jr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Hr(e,t){return K.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class pL extends G2{constructor(e){super(),this.currentSequenceNumber=e}}class p_{constructor(e){this.persistence=e,this.Jr=new f_,this.Yr=null}static Zr(e){return new p_(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),K.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Xr.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,i=>{const s=ae.fromPath(i);return this.ei(e,s).next(r=>{r||t.removeEntry(s,he.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return K.or([()=>K.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=s}static Wi(e,t){let i=Ee(),s=Ee();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new m_(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iN()?8:X2(Jt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,s){const r={result:null};return this.Yi(e,t).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Zi(e,t,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new mL;return this.Xi(e,t,o).next(a=>{if(r.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>r.result)}es(e,t,i,s){return i.documentReadCount<this.ji?(Wl()<=Se.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(Wl()<=Se.DEBUG&&re("QueryEngine","Query:",ia(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Wl()<=Se.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(t))):K.resolve())}Yi(e,t){if(K0(t))return K.resolve(null);let i=Li(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Ud(t,null,"F"),i=Li(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=Ee(...r);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,Ud(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,i,s){return K0(t)||s.isEqual(he.min())?K.resolve(null):this.Ji.getDocuments(e,i).next(r=>{const o=this.ts(t,r);return this.ns(t,o,i,s)?K.resolve(null):(Wl()<=Se.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ia(t)),this.rs(e,o,t,q2(s,-1)).next(a=>a))})}ts(e,t){let i=new jt(l1(e));return t.forEach((s,r)=>{Pf(e,r)&&(i=i.add(r))}),i}ns(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Xi(e,t,i){return Wl()<=Se.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",ia(t)),this.Ji.getDocumentsMatchingQuery(e,t,_r.min(),i)}rs(e,t,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,t,i,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new Ze(ke),this._s=new nl(r=>o_(r),a_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function _L(n,e,t,i){return new vL(n,e,t,i)}async function N1(n,e){const t=pe(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=Ee();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of r){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function yL(n,e){const t=pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const p=c.batch,g=p.keys();let y=K.resolve();return g.forEach(b=>{y=y.next(()=>d.getEntry(l,b)).next(P=>{const A=c.docVersions.get(b);Ae(A!==null),P.version.compareTo(A)<0&&(p.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),d.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function D1(n){const e=pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function wL(n,e){const t=pe(n),i=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const a=[];e.targetChanges.forEach((d,p)=>{const g=s.get(p);if(!g)return;a.push(t.Ur.removeMatchingKeys(r,d.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(r,d.addedDocuments,p)));let y=g.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken($t.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),s=s.insert(p,y),function(P,A,E){return P.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(r,y))});let l=ws(),c=Ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,d))}),a.push(EL(r,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!i.isEqual(he.min())){const d=t.Ur.getLastRemoteSnapshotVersion(r).next(p=>t.Ur.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(d)}return K.waitFor(a).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(t.os=s,r))}function EL(n,e,t){let i=Ee(),s=Ee();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let o=ws();return t.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function TL(n,e){const t=pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function SL(n,e){const t=pe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Ur.getTargetData(i,e).next(r=>r?(s=r,K.resolve(s)):t.Ur.allocateTargetId(i).next(o=>(s=new tr(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function Dg(n,e,t){const i=pe(n),s=i.os.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pc(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function rE(n,e,t){const i=pe(n);let s=he.min(),r=Ee();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const p=pe(l),g=p._s.get(d);return g!==void 0?K.resolve(p.os.get(g)):p.Ur.getTargetData(c,d)}(i,o,Li(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?s:he.min(),t?r:Ee())).next(a=>(IL(i,mO(e),a),{documents:a,Ts:r})))}function IL(n,e,t){let i=n.us.get(e)||he.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.us.set(e,i)}class oE{constructor(){this.activeTargetIds=EO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bL{constructor(){this.so=new oE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new oE,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph=null;function Xp(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class kL extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${s}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Fo(){return!1}Mo(t,i,s,r,o){const a=Xp(),l=this.xo(t,i.toUriEncodedString());re("RestConnection",`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,r,o),this.No(t,l,c,s).then(d=>(re("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw ja("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(t,i,s,r,o,a){return this.Mo(t,i,s,r,o)}Oo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,o)=>t[o]=r),s&&s.headers.forEach((r,o)=>t[o]=r)}xo(t,i){const s=PL[t];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,s){const r=Xp();return new Promise((o,a)=>{const l=new Wb;l.setWithCredentials(!0),l.listenOnce(Hb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Jh.NO_ERROR:const d=l.getResponseJson();re(Yt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(d)),o(d);break;case Jh.TIMEOUT:re(Yt,`RPC '${e}' ${r} timed out`),a(new ee(H.DEADLINE_EXCEEDED,"Request time out"));break;case Jh.HTTP_ERROR:const p=l.getStatus();if(re(Yt,`RPC '${e}' ${r} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const b=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(E)>=0?E:H.UNKNOWN}(y.status);a(new ee(b,y.message))}else a(new ee(H.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee(H.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{re(Yt,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(s);re(Yt,`RPC '${e}' ${r} sending request:`,s),l.send(t,"POST",c,i,15)})}Bo(e,t,i){const s=Xp(),r=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kb(),a=Yb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const d=r.join("");re(Yt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);let g=!1,y=!1;const b=new AL({Io:A=>{y?re(Yt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(re(Yt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),re(Yt,`RPC '${e}' stream ${s} sending:`,A),p.send(A))},To:()=>p.close()}),P=(A,E,w)=>{A.listen(E,x=>{try{w(x)}catch(M){setTimeout(()=>{throw M},0)}})};return P(p,tu.EventType.OPEN,()=>{y||(re(Yt,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),P(p,tu.EventType.CLOSE,()=>{y||(y=!0,re(Yt,`RPC '${e}' stream ${s} transport closed`),b.So())}),P(p,tu.EventType.ERROR,A=>{y||(y=!0,ja(Yt,`RPC '${e}' stream ${s} transport errored:`,A),b.So(new ee(H.UNAVAILABLE,"The operation could not be completed")))}),P(p,tu.EventType.MESSAGE,A=>{var E;if(!y){const w=A.data[0];Ae(!!w);const x=w,M=x.error||((E=x[0])===null||E===void 0?void 0:E.error);if(M){re(Yt,`RPC '${e}' stream ${s} received error:`,M);const W=M.status;let Y=function(k){const N=ct[k];if(N!==void 0)return E1(N)}(W),R=M.message;Y===void 0&&(Y=H.INTERNAL,R="Unknown error status: "+W+" with message "+M.message),y=!0,b.So(new ee(Y,R)),p.close()}else re(Yt,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),P(a,qb.STAT_EVENT,A=>{A.stat===Ig.PROXY?re(Yt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Ig.NOPROXY&&re(Yt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Jp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n){return new jO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t,i=1e3,s=1.5,r=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=s,this.Qo=r,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-i);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t,i,s,r,o,a,l){this.ui=e,this.Ho=i,this.Jo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new g_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(ys(t.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===t&&this.P_(i,s)},i=>{e(()=>{const s=new ee(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xL extends M1{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=zO(this.serializer,e),i=function(r){if(!("targetChange"in r))return he.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Mn(o.readTime):he.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Ng(this.serializer),t.addTarget=function(r,o){let a;const l=o.target;if(a=Ag(l)?{documents:HO(r,l)}:{query:qO(r,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=I1(r,o.resumeToken);const c=xg(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=$d(r,o.snapshotVersion.toTimestamp());const c=xg(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=KO(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Ng(this.serializer),t.removeTarget=e,this.a_(t)}}class RL extends M1{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=WO(e.writeResults,e.commitTime),i=Mn(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Ng(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>A1(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Mo(e,Rg(t,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ee(H.UNKNOWN,r.toString())})}Lo(e,t,i,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Rg(t,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(H.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class DL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ys(t),this.D_=!1):re("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=r,this.k_._o(o=>{i.enqueueAndForget(async()=>{ko(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pe(l);c.L_.add(4),await _c(c),c.q_.set("Unknown"),c.L_.delete(4),await Nf(c)}(this))})}),this.q_=new DL(i,s)}}async function Nf(n){if(ko(n))for(const e of n.B_)await e(!0)}async function _c(n){for(const e of n.B_)await e(!1)}function O1(n,e){const t=pe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),w_(t)?y_(t):il(t).r_()&&__(t,e))}function v_(n,e){const t=pe(n),i=il(t);t.N_.delete(e),i.r_()&&L1(t,e),t.N_.size===0&&(i.r_()?i.o_():ko(t)&&t.q_.set("Unknown"))}function __(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}il(n).A_(e)}function L1(n,e){n.Q_.xe(e),il(n).R_(e)}function y_(n){n.Q_=new OO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),il(n).start(),n.q_.v_()}function w_(n){return ko(n)&&!il(n).n_()&&n.N_.size>0}function ko(n){return pe(n).L_.size===0}function V1(n){n.Q_=void 0}async function OL(n){n.q_.set("Online")}async function LL(n){n.N_.forEach((e,t)=>{__(n,e)})}async function VL(n,e){V1(n),w_(n)?(n.q_.M_(e),y_(n)):n.q_.set("Unknown")}async function FL(n,e,t){if(n.q_.set("Online"),e instanceof S1&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(n,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wd(n,i)}else if(e instanceof td?n.Q_.Ke(e):e instanceof T1?n.Q_.He(e):n.Q_.We(e),!t.isEqual(he.min()))try{const i=await D1(n.localStore);t.compareTo(i)>=0&&await function(r,o){const a=r.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=r.N_.get(c);d&&r.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=r.N_.get(l);if(!d)return;r.N_.set(l,d.withResumeToken($t.EMPTY_BYTE_STRING,d.snapshotVersion)),L1(r,l);const p=new tr(d.target,l,c,d.sequenceNumber);__(r,p)}),r.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await Wd(n,i)}}async function Wd(n,e,t){if(!pc(e))throw e;n.L_.add(1),await _c(n),n.q_.set("Offline"),t||(t=()=>D1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Nf(n)})}function F1(n,e){return e().catch(t=>Wd(n,t,e))}async function Df(n){const e=pe(n),t=wr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;jL(e);)try{const s=await TL(e.localStore,i);if(s===null){e.O_.length===0&&t.o_();break}i=s.batchId,UL(e,s)}catch(s){await Wd(e,s)}j1(e)&&U1(e)}function jL(n){return ko(n)&&n.O_.length<10}function UL(n,e){n.O_.push(e);const t=wr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function j1(n){return ko(n)&&!wr(n).n_()&&n.O_.length>0}function U1(n){wr(n).start()}async function BL(n){wr(n).p_()}async function $L(n){const e=wr(n);for(const t of n.O_)e.m_(t.mutations)}async function zL(n,e,t){const i=n.O_.shift(),s=c_.from(i,e,t);await F1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Df(n)}async function WL(n,e){e&&wr(n).V_&&await async function(i,s){if(function(o){return w1(o)&&o!==H.ABORTED}(s.code)){const r=i.O_.shift();wr(i).s_(),await F1(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Df(i)}}(n,e),j1(n)&&U1(n)}async function lE(n,e){const t=pe(n);t.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=ko(t);t.L_.add(3),await _c(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Nf(t)}async function HL(n,e){const t=pe(n);e?(t.L_.delete(2),await Nf(t)):e||(t.L_.add(2),await _c(t),t.q_.set("Unknown"))}function il(n){return n.K_||(n.K_=function(t,i,s){const r=pe(t);return r.w_(),new xL(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Eo:OL.bind(null,n),Ro:LL.bind(null,n),mo:VL.bind(null,n),d_:FL.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),w_(n)?y_(n):n.q_.set("Unknown")):(await n.K_.stop(),V1(n))})),n.K_}function wr(n){return n.U_||(n.U_=function(t,i,s){const r=pe(t);return r.w_(),new RL(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BL.bind(null,n),mo:WL.bind(null,n),f_:$L.bind(null,n),g_:zL.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Df(n)):(await n.U_.stop(),n.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,a=new E_(e,t,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(n,e){if(ys("AsyncQueue",`${e}: ${n}`),pc(n))return new ee(H.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ae.comparator(t.key,i.key):(t,i)=>ae.comparator(t.key,i.key),this.keyedMap=nu(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new xa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new xa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.W_=new Ze(ae.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Wa{constructor(e,t,i,s,r,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Wa(e,t,xa.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class YL{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const s=pe(t),r=s.queries;s.queries=cE(),r.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new ee(H.ABORTED,"Firestore shutting down"))}}function cE(){return new nl(n=>a1(n),Cf)}async function S_(n,e){const t=pe(n);let i=3;const s=e.query;let r=t.queries.get(s);r?!r.H_()&&e.J_()&&(i=2):(r=new qL,i=e.J_()?0:1);try{switch(i){case 0:r.z_=await t.onListen(s,!0);break;case 1:r.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=T_(o,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,r),r.j_.push(e),e.Z_(t.onlineState),r.z_&&e.X_(r.z_)&&b_(t)}async function I_(n,e){const t=pe(n),i=e.query;let s=3;const r=t.queries.get(i);if(r){const o=r.j_.indexOf(e);o>=0&&(r.j_.splice(o,1),r.j_.length===0?s=e.J_()?0:1:!r.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function KL(n,e){const t=pe(n);let i=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const a of o.j_)a.X_(s)&&(i=!0);o.z_=s}}i&&b_(t)}function QL(n,e,t){const i=pe(n),s=i.queries.get(e);if(s)for(const r of s.j_)r.onError(t);i.queries.delete(e)}function b_(n){n.Y_.forEach(e=>{e.next()})}var Mg,hE;(hE=Mg||(Mg={})).ea="default",hE.Cache="cache";class C_{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.key=e}}class $1{constructor(e){this.key=e}}class GL{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=l1(e),this.Ra=new xa(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new uE,s=t?t.Ra:this.Ra;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const g=s.get(d),y=Pf(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;g&&y?g.data.isEqual(y.data)?b!==P&&(i.track({type:3,doc:y}),A=!0):this.ga(g,y)||(i.track({type:2,doc:y}),A=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(i.track({type:0,doc:y}),A=!0):g&&!y&&(i.track({type:1,doc:g}),A=!0,(l||c)&&(a=!0)),A&&(y?(o=o.add(y),r=P?r.add(d):r.delete(d)):(o=o.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:a,mutatedKeys:r}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const r=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(y,b){const P=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return P(y)-P(b)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(i),s=s!=null&&s;const a=t&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Wa(this.query,e.Ra,r,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new $1(i))}),this.da.forEach(i=>{e.has(i)||t.push(new B1(i))}),t}ba(e){this.Ta=e.Ts,this.da=Ee();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Wa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XL{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class JL{constructor(e){this.key=e,this.va=!1}}class ZL{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new nl(a=>a1(a),Cf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(ae.comparator),this.Na=new Map,this.La=new f_,this.Ba={},this.ka=new Map,this.qa=za.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eV(n,e,t=!0){const i=K1(n);let s;const r=i.Fa.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Da()):s=await z1(i,e,t,!0),s}async function tV(n,e){const t=K1(n);await z1(t,e,!0,!1)}async function z1(n,e,t,i){const s=await SL(n.localStore,Li(e)),r=s.targetId,o=n.sharedClientState.addLocalQueryTarget(r,t);let a;return i&&(a=await nV(n,e,r,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&O1(n.remoteStore,s),a}async function nV(n,e,t,i,s){n.Ka=(p,g,y)=>async function(P,A,E,w){let x=A.view.ma(E);x.ns&&(x=await rE(P.localStore,A.query,!1).then(({documents:R})=>A.view.ma(R,x)));const M=w&&w.targetChanges.get(A.targetId),W=w&&w.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges(x,P.isPrimaryClient,M,W);return fE(P,A.targetId,Y.wa),Y.snapshot}(n,p,g,y);const r=await rE(n.localStore,e,!0),o=new GL(e,r.Ts),a=o.ma(r.documents),l=vc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);fE(n,t,c.wa);const d=new XL(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function iV(n,e,t){const i=pe(n),s=i.Fa.get(e),r=i.Ma.get(s.targetId);if(r.length>1)return i.Ma.set(s.targetId,r.filter(o=>!Cf(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Dg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&v_(i.remoteStore,s.targetId),Og(i,s.targetId)}).catch(fc)):(Og(i,s.targetId),await Dg(i.localStore,s.targetId,!0))}async function sV(n,e){const t=pe(n),i=t.Fa.get(e),s=t.Ma.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),v_(t.remoteStore,i.targetId))}async function rV(n,e,t){const i=dV(n);try{const s=await function(o,a){const l=pe(o),c=wt.now(),d=a.reduce((y,b)=>y.add(b.key),Ee());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=ws(),P=Ee();return l.cs.getEntries(y,d).next(A=>{b=A,b.forEach((E,w)=>{w.isValidDocument()||(P=P.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(A=>{p=A;const E=[];for(const w of a){const x=kO(w,p.get(w.key).overlayedDocument);x!=null&&E.push(new Cr(w.key,x,Zb(x.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,E,a)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(y,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:c1(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ze(ke)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,s.batchId,t),await yc(i,s.changes),await Df(i.remoteStore)}catch(s){const r=T_(s,"Failed to persist write");t.reject(r)}}async function W1(n,e){const t=pe(n);try{const i=await wL(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.Na.get(r);o&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ae(o.va):s.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await yc(t,i,e)}catch(i){await fc(i)}}function dE(n,e,t){const i=pe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Fa.forEach((r,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,p)=>{for(const g of p.j_)g.Z_(a)&&(c=!0)}),c&&b_(l)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function oV(n,e,t){const i=pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Na.get(e),r=s&&s.key;if(r){let o=new Ze(ae.comparator);o=o.insert(r,kt.newNoDocument(r,he.min()));const a=Ee().add(r),l=new xf(he.min(),new Map,new Ze(ke),o,a);await W1(i,l),i.Oa=i.Oa.remove(r),i.Na.delete(e),P_(i)}else await Dg(i.localStore,e,!1).then(()=>Og(i,e,t)).catch(fc)}async function aV(n,e){const t=pe(n),i=e.batch.batchId;try{const s=await yL(t.localStore,e);q1(t,i,null),H1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await yc(t,s)}catch(s){await fc(s)}}async function lV(n,e,t){const i=pe(n);try{const s=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Ae(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(i.localStore,e);q1(i,e,t),H1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await yc(i,s)}catch(s){await fc(s)}}function H1(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function q1(n,e,t){const i=pe(n);let s=i.Ba[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function Og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||Y1(n,i)})}function Y1(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(v_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),P_(n))}function fE(n,e,t){for(const i of t)i instanceof B1?(n.La.addReference(i.key,e),uV(n,i)):i instanceof $1?(re("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||Y1(n,i.key)):ue()}function uV(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(re("SyncEngine","New document in limbo: "+t),n.xa.add(i),P_(n))}function P_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ae(Ue.fromString(e)),i=n.qa.next();n.Na.set(i,new JL(t)),n.Oa=n.Oa.insert(t,i),O1(n.remoteStore,new tr(Li(bf(t.path)),i,"TargetPurposeLimboResolution",n_.oe))}}async function yc(n,e,t){const i=pe(n),s=[],r=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,t).then(c=>{var d;if((c||t)&&i.isPrimaryClient){const p=c?!c.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){s.push(c);const p=m_.Wi(l.targetId,c);r.push(p)}}))}),await Promise.all(o),i.Ca.d_(s),await async function(l,c){const d=pe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>K.forEach(c,g=>K.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>K.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!pc(p))throw p;re("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const y=d.os.get(g),b=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(b);d.os=d.os.insert(g,P)}}}(i.localStore,r))}async function cV(n,e){const t=pe(n);if(!t.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await N1(t.localStore,e);t.currentUser=e,function(r,o){r.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee(H.CANCELLED,o))})}),r.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await yc(t,i.hs)}}function hV(n,e){const t=pe(n),i=t.Na.get(e);if(i&&i.va)return Ee().add(i.key);{let s=Ee();const r=t.Ma.get(e);if(!r)return s;for(const o of r){const a=t.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function K1(n){const e=pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=W1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oV.bind(null,e),e.Ca.d_=KL.bind(null,e.eventManager),e.Ca.$a=QL.bind(null,e.eventManager),e}function dV(n){const e=pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lV.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return _L(this.persistence,new gL,e.initialUser,this.serializer)}Ga(e){return new fL(p_.Zr,this.serializer)}Wa(e){return new bL}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class Lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cV.bind(null,this.syncEngine),await HL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YL}()}createDatastore(e){const t=Rf(e.databaseInfo.databaseId),i=function(r){return new kL(r)}(e.databaseInfo);return function(r,o,a,l){return new NL(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,r,o,a){return new ML(i,s,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>dE(this.syncEngine,t,0),function(){return aE.D()?new aE:new CL}())}createSyncEngine(e,t){return function(s,r,o,a,l,c,d){const p=new ZL(s,r,o,a,l,c);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const r=pe(s);re("RemoteStore","RemoteStore shutting down."),r.L_.add(5),await _c(r),r.k_.shutdown(),r.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Lg.provider={build:()=>new Lg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ee(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(s,r){const o=pe(s),a={documents:r.map(p=>zd(o.serializer,p))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ue.emptyPath(),a,r.length),c=new Map;l.forEach(p=>{const g=$O(o.serializer,p);c.set(g.key.toString(),g)});const d=[];return r.forEach(p=>{const g=c.get(p.toString());Ae(!!g),d.push(g)}),d}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new u_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const s=ae.fromPath(i);this.mutations.push(new y1(s,this.precondition(s)))}),await async function(i,s){const r=pe(i),o={writes:s.map(a=>A1(r.serializer,a))};await r.Mo("Commit",r.serializer.databaseId,Ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ue();t=he.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ee(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(he.min())?Gt.exists(!1):Gt.updateTime(t):Gt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(he.min()))throw new ee(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gt.updateTime(t)}return Gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,t,i,s,r){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=r,this._u=i.maxAttempts,this.t_=new g_(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new fV(this.datastore),t=this.cu(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.lu(s)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const t=this.updateFunction(e);return!mc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!w1(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,t,i,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Kt.UNAUTHENTICATED,this.clientId=Gb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=T_(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Zp(n,e){n.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await N1(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function pE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gV(n);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>lE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>lE(e.remoteStore,s)),n._onlineComponents=e}async function gV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ja("Error using user provided cache. Falling back to memory cache: "+t),await Zp(n,new Hd)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await Zp(n,new Hd);return n._offlineComponents}async function k_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await pE(n,n._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await pE(n,new Lg))),n._onlineComponents}function vV(n){return k_(n).then(e=>e.syncEngine)}function _V(n){return k_(n).then(e=>e.datastore)}async function qd(n){const e=await k_(n),t=e.eventManager;return t.onListen=eV.bind(null,e.syncEngine),t.onUnlisten=iV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sV.bind(null,e.syncEngine),t}function yV(n,e,t={}){const i=new Oi;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const d=new A_({next:g=>{d.Za(),o.enqueueAndForget(()=>I_(r,p));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new ee(H.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?c.reject(new ee(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new C_(bf(a.path),d,{includeMetadataChanges:!0,_a:!0});return S_(r,p)}(await qd(n),n.asyncQueue,e,t,i)),i.promise}function wV(n,e,t={}){const i=new Oi;return n.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const d=new A_({next:g=>{d.Za(),o.enqueueAndForget(()=>I_(r,p)),g.fromCache&&l.source==="server"?c.reject(new ee(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new C_(a,d,{includeMetadataChanges:!0,_a:!0});return S_(r,p)}(await qd(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n,e,t){if(!t)throw new ee(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EV(n,e,t,i){if(e===!0&&i===!0)throw new ee(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gE(n){if(!ae.isDocumentKey(n))throw new ee(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vE(n){if(ae.isDocumentKey(n))throw new ee(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Mf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue()}function Sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mf(n);throw new ee(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new V2;switch(i.type){case"firstParty":return new B2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=mE.get(t);i&&(re("ComponentProvider","Removing Datastore"),mE.delete(t),i.terminate())}(this),Promise.resolve()}}function TV(n,e,t,i={}){var s;const r=(n=Sn(n,Of))._getSettings(),o=`${e}:${t}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Kt.MOCK_USER;else{a=nb(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ee(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Kt(c)}n._authCredentials=new F2(new Qb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class Ut{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class pr extends Is{constructor(e,t,i){super(e,t,bf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new ae(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function Lf(n,e,...t){if(n=Ke(n),G1("collection","path",e),n instanceof Of){const i=Ue.fromString(e,...t);return vE(i),new pr(n,null,i)}{if(!(n instanceof Ut||n instanceof pr))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ue.fromString(e,...t));return vE(i),new pr(n.firestore,null,i)}}function mi(n,e,...t){if(n=Ke(n),arguments.length===1&&(e=Gb.newId()),G1("doc","path",e),n instanceof Of){const i=Ue.fromString(e,...t);return gE(i),new Ut(n,null,new ae(i))}{if(!(n instanceof Ut||n instanceof pr))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ue.fromString(e,...t));return gE(i),new Ut(n.firestore,n instanceof pr?n.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new g_(this,"async_queue_retry"),this.Vu=()=>{const i=Jp();i&&re("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Jp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Jp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Oi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pc(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ys("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=E_.createAndSchedule(this,e,t,i,r=>this.yu(r));return this.Tu.push(s),s}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function wE(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(n,["next","error","complete"])}class Es extends Of{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new yE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yE(e),this._firestoreClient=void 0,await e}}}function SV(n,e){const t=typeof n=="object"?n:Wv(),i=typeof n=="string"?n:"(default)",s=Ef(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=ZI("firestore");r&&TV(s,...r)}return s}function wc(n){if(n._terminated)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IV(n),n._firestoreClient}function IV(n){var e,t,i;const s=n._freezeSettings(),r=function(a,l,c,d){return new eO(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Q1(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new mV(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _o($t.fromBase64String(e))}catch(t){throw new ee(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _o($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=/^__.*__$/;class CV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,t,this.fieldTransforms):new gc(e,this.data,t,this.fieldTransforms)}}class X1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function J1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class N_{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.vu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new N_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(J1(this.Cu)&&bV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class PV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rf(e)}Qu(e,t,i,s=!1){return new N_({Cu:e,methodName:t,qu:i,path:Vt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tc(n){const e=n._freezeSettings(),t=Rf(n._databaseId);return new PV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function D_(n,e,t,i,s,r={}){const o=n.Qu(r.merge||r.mergeFields?2:0,e,t,s);O_("Data must be an object, but it was:",o,i);const a=tC(i,o);let l,c;if(r.merge)l=new Nn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const d=[];for(const p of r.mergeFields){const g=Vg(e,p,t);if(!o.contains(g))throw new ee(H.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);iC(d,g)||d.push(g)}l=new Nn(d),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new CV(new hn(a),l,c)}class Ff extends Vf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}class M_ extends Vf{_toFieldTransform(e){return new bO(e.path,new Gu)}isEqual(e){return e instanceof M_}}function Z1(n,e,t,i){const s=n.Qu(1,e,t);O_("Data must be an object, but it was:",s,i);const r=[],o=hn.empty();Ao(i,(l,c)=>{const d=L_(e,l,t);c=Ke(c);const p=s.Nu(d);if(c instanceof Ff)r.push(d);else{const g=Sc(c,p);g!=null&&(r.push(d),o.set(d,g))}});const a=new Nn(r);return new X1(o,a,s.fieldTransforms)}function eC(n,e,t,i,s,r){const o=n.Qu(1,e,t),a=[Vg(e,i,t)],l=[s];if(r.length%2!=0)throw new ee(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<r.length;g+=2)a.push(Vg(e,r[g])),l.push(r[g+1]);const c=[],d=hn.empty();for(let g=a.length-1;g>=0;--g)if(!iC(c,a[g])){const y=a[g];let b=l[g];b=Ke(b);const P=o.Nu(y);if(b instanceof Ff)c.push(y);else{const A=Sc(b,P);A!=null&&(c.push(y),d.set(y,A))}}const p=new Nn(c);return new X1(d,p,o.fieldTransforms)}function AV(n,e,t,i=!1){return Sc(t,n.Qu(i?4:3,e))}function Sc(n,e){if(nC(n=Ke(n)))return O_("Unsupported field value:",e,n),tC(n,e);if(n instanceof Vf)return function(i,s){if(!J1(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=Sc(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(n,e)}return function(i,s){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TO(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=wt.fromDate(i);return{timestampValue:$d(s.serializer,r)}}if(i instanceof wt){const r=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$d(s.serializer,r)}}if(i instanceof x_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _o)return{bytesValue:I1(s.serializer,i._byteString)};if(i instanceof Ut){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:d_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof R_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return l_(a.serializer,l)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Mf(i)}`)}(n,e)}function tC(n,e){const t={};return Xb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(n,(i,s)=>{const r=Sc(s,e.Mu(i));r!=null&&(t[i]=r)}),{mapValue:{fields:t}}}function nC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof x_||n instanceof _o||n instanceof Ut||n instanceof Vf||n instanceof R_)}function O_(n,e,t){if(!nC(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=Mf(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Vg(n,e,t){if((e=Ke(e))instanceof Ec)return e._internalPath;if(typeof e=="string")return L_(n,e);throw Yd("Field path arguments must be of type string or ",n,!1,void 0,t)}const kV=new RegExp("[~\\*/\\[\\]]");function L_(n,e,t){if(e.search(kV)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ec(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yd(n,e,t,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new ee(H.INVALID_ARGUMENT,a+n+l)}function iC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(V_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xV extends Kd{data(){return super.data()}}function V_(n,e){return typeof e=="string"?L_(n,e):e instanceof Ec?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F_{}class j_ extends F_{}function rC(n,e,...t){let i=[];e instanceof F_&&i.push(e),i=i.concat(t),function(r){const o=r.filter(l=>l instanceof B_).length,a=r.filter(l=>l instanceof U_).length;if(o>1||o>0&&a>0)throw new ee(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class U_ extends j_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new U_(e,t,i)}_apply(e){const t=this._parse(e);return aC(e._query,t),new Is(e.firestore,e.converter,kg(e._query,t))}_parse(e){const t=Tc(e.firestore);return function(r,o,a,l,c,d,p){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ee(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){TE(p,d);const y=[];for(const b of p)y.push(EE(l,r,b));g={arrayValue:{values:y}}}else g=EE(l,r,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||TE(p,d),g=AV(a,o,p,d==="in"||d==="not-in");return dt.create(c,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class B_ extends F_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new B_(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:pi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)aC(o,l),o=kg(o,l)}(e._query,t),new Is(e.firestore,e.converter,kg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $_ extends j_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $_(e,t)}_apply(e){const t=function(s,r,o){if(s.startAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(r,o)}(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new tl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function oC(n,e="asc"){const t=e,i=V_("orderBy",n);return $_._create(i,t)}class z_ extends j_{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new z_(e,t,i)}_apply(e){return new Is(e.firestore,e.converter,Ud(e._query,this._limit,this._limitType))}}function RV(n){return z_._create("limit",n,"F")}function EE(n,e,t){if(typeof(t=Ke(t))=="string"){if(t==="")throw new ee(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o1(e)&&t.indexOf("/")!==-1)throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ue.fromString(t));if(!ae.isDocumentKey(i))throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $0(n,new ae(i))}if(t instanceof Ut)return $0(n,t._key);throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mf(t)}.`)}function TE(n,e){if(!Array.isArray(n)||n.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aC(n,e){const t=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lC{convertValue(e,t="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ao(e,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertVectorValue(e){var t,i,s;const r=(s=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>ot(o.doubleValue));return new R_(r)}convertGeoPoint(e){return new x_(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=s_(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){const t=yr(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ue.fromString(e);Ae(R1(i));const s=new Yu(i.get(1),i.get(3)),r=new ae(i.popFirst(5));return s.isEqual(t)||ys(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class NV extends lC{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class H_ extends Kd{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(V_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class nd extends H_{data(e={}){return super.data(e)}}class uC{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ya(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new nd(this._firestore,this._userDataWriter,i.key,i,new ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new nd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ya(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new nd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ya(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:DV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(n){n=Sn(n,Ut);const e=Sn(n.firestore,Es);return yV(wc(e),n._key).then(t=>hC(e,n,t))}class jf extends lC{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function MV(n){n=Sn(n,Is);const e=Sn(n.firestore,Es),t=wc(e),i=new jf(e);return sC(n._query),wV(t,n._query).then(s=>new uC(e,i,n,s))}function cC(n,e,t){n=Sn(n,Ut);const i=Sn(n.firestore,Es),s=W_(n.converter,e,t);return Y_(i,[D_(Tc(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Gt.none())])}function Ic(n,e,t,...i){n=Sn(n,Ut);const s=Sn(n.firestore,Es),r=Tc(s);let o;return o=typeof(e=Ke(e))=="string"||e instanceof Ec?eC(r,"updateDoc",n._key,e,t,i):Z1(r,"updateDoc",n._key,e),Y_(s,[o.toMutation(n._key,Gt.exists(!0))])}function OV(n,e){const t=Sn(n.firestore,Es),i=mi(n),s=W_(n.converter,e);return Y_(t,[D_(Tc(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Gt.exists(!1))]).then(()=>i)}function Uf(n,...e){var t,i,s;n=Ke(n);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wE(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(wE(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let l,c,d;if(n instanceof Ut)c=Sn(n.firestore,Es),d=bf(n._key.path),l={next:p=>{e[o]&&e[o](hC(c,n,p))},error:e[o+1],complete:e[o+2]};else{const p=Sn(n,Is);c=Sn(p.firestore,Es),d=p._query;const g=new jf(c);l={next:y=>{e[o]&&e[o](new uC(c,g,p,y))},error:e[o+1],complete:e[o+2]},sC(n._query)}return function(g,y,b,P){const A=new A_(P),E=new C_(y,A,b);return g.asyncQueue.enqueueAndForget(async()=>S_(await qd(g),E)),()=>{A.Za(),g.asyncQueue.enqueueAndForget(async()=>I_(await qd(g),E))}}(wc(c),d,a,l)}function Y_(n,e){return function(i,s){const r=new Oi;return i.asyncQueue.enqueueAndForget(async()=>rV(await vV(i),s,r)),r.promise}(wc(n),e)}function hC(n,e,t){const i=t.docs.get(e._key),s=new jf(n);return new H_(n,s,e._key,i,new ya(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={maxAttempts:5};function Hl(n,e){if((n=Ke(n)).firestore!==e)throw new ee(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Tc(t)}get(t){const i=Hl(t,this._firestore),s=new NV(this._firestore);return this._transaction.lookup([i._key]).then(r=>{if(!r||r.length!==1)return ue();const o=r[0];if(o.isFoundDocument())return new Kd(this._firestore,s,o.key,o,i.converter);if(o.isNoDocument())return new Kd(this._firestore,s,i._key,null,i.converter);throw ue()})}set(t,i,s){const r=Hl(t,this._firestore),o=W_(r.converter,i,s),a=D_(this._dataReader,"Transaction.set",r._key,o,r.converter!==null,s);return this._transaction.set(r._key,a),this}update(t,i,s,...r){const o=Hl(t,this._firestore);let a;return a=typeof(i=Ke(i))=="string"||i instanceof Ec?eC(this._dataReader,"Transaction.update",o._key,i,s,r):Z1(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){const i=Hl(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hl(e,this._firestore),i=new jf(this._firestore);return super.get(e).then(s=>new H_(this._firestore,i,t._key,s._document,new ya(!1,!1),t.converter))}}function dC(n,e,t){n=Sn(n,Es);const i=Object.assign(Object.assign({},LV),t);return function(r){if(r.maxAttempts<1)throw new ee(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,a){const l=new Oi;return r.asyncQueue.enqueueAndForget(async()=>{const c=await _V(r);new pV(r.asyncQueue,c,a,o,l).au()}),l.promise}(wc(n),s=>e(new VV(n,s)),i)}function fC(){return new M_("serverTimestamp")}(function(e,t=!0){(function(s){el=s})(bo),co(new vr("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new Es(new j2(i.getProvider("auth-internal")),new z2(i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(c.options.projectId,d)}(o,s),o);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Ni(V0,"4.7.3",e),Ni(V0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firebasestorage.googleapis.com",FV="storageBucket",jV=2*60*1e3,UV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends ji{constructor(e,t,i=0){super(em(e),`Firebase Storage: ${t} (${em(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return em(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fi||(Fi={}));function em(n){return"storage/"+n}function BV(){const n="An unknown error occurred, please check the error payload for server response.";return new Bi(Fi.UNKNOWN,n)}function $V(){return new Bi(Fi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zV(){return new Bi(Fi.CANCELED,"User canceled the upload/download.")}function WV(n){return new Bi(Fi.INVALID_URL,"Invalid URL '"+n+"'.")}function HV(n){return new Bi(Fi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function SE(n){return new Bi(Fi.INVALID_ARGUMENT,n)}function mC(){return new Bi(Fi.APP_DELETED,"The Firebase app was deleted.")}function qV(n){return new Bi(Fi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=ui.makeFromUrl(e,t)}catch{return new ui(e,"")}if(i.path==="")return i;throw HV(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(M){M.path_=decodeURIComponent(M.path)}const d="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${d}/b/${s}/o${g}`,"i"),b={bucket:1,path:3},P=t===pC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",E=new RegExp(`^https?://${P}/${s}/${A}`,"i"),x=[{regex:a,indices:l,postModify:r},{regex:y,indices:b,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let M=0;M<x.length;M++){const W=x[M],Y=W.regex.exec(e);if(Y){const R=Y[W.indices.bucket];let C=Y[W.indices.path];C||(C=""),i=new ui(R,C),W.postModify(i);break}}if(i==null)throw WV(e);return i}}class YV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(n,e,t){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...A){c||(c=!0,e.apply(null,A))}function p(A){s=setTimeout(()=>{s=null,n(y,l())},A)}function g(){r&&clearTimeout(r)}function y(A,...E){if(c){g();return}if(A){g(),d.call(null,A,...E);return}if(l()||o){g(),d.call(null,A,...E);return}i<64&&(i*=2);let x;a===1?(a=2,x=0):x=(i+Math.random())*1e3,p(x)}let b=!1;function P(A){b||(b=!0,g(),!c&&(s!==null?(A||(a=2),clearTimeout(s),p(0)):A||(a=1)))}return p(0),r=setTimeout(()=>{o=!0,P(!0)},t),P}function QV(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(n){return n!==void 0}function IE(n,e,t,i){if(i<e)throw SE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw SE(`Invalid value for '${n}'. Expected ${t} or less.`)}function XV(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var Qd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Qd||(Qd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,r=e.indexOf(n)!==-1;return t||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,t,i,s,r,o,a,l,c,d,p,g=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,b)=>{this.resolve_=y,this.reject_=b,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Ah(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Qd.NO_ERROR,l=r.getStatus();if(!a||JV(l,this.additionalRetryCodes_)&&this.retry){const d=r.getErrorCode()===Qd.ABORT;i(!1,new Ah(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Ah(c,r))})},t=(i,s)=>{const r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());GV(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=BV();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?mC():zV();o(l)}else{const l=$V();o(l)}};this.canceled_?t(!1,new Ah(!1,null,!0)):this.backoffId_=KV(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ah{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function eF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function tF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nF(n,e){e&&(n["X-Firebase-GMPID"]=e)}function iF(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function sF(n,e,t,i,s,r,o=!0){const a=XV(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return nF(c,e),eF(c,t),tF(c,r),iF(c,i),new ZV(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function oF(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this._service=e,t instanceof ui?this._location=t:this._location=ui.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gd(e,t)}get root(){const e=new ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oF(this._location.path)}get storage(){return this._service}get parent(){const e=rF(this._location.path);if(e===null)return null;const t=new ui(this._location.bucket,e);return new Gd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw qV(e)}}function bE(n,e){const t=e==null?void 0:e[FV];return t==null?null:ui.makeFromBucketSpec(t,n)}function aF(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=i;s&&(n._overrideAuthToken=typeof s=="string"?s:nb(s,n.app.options.projectId))}class lF{constructor(e,t,i,s,r){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=pC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jV,this._maxUploadRetryTime=UV,this._requests=new Set,s!=null?this._bucket=ui.makeFromBucketSpec(s,this._host):this._bucket=bE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ui.makeFromBucketSpec(this._url,e):this._bucket=bE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gd(this,e)}_makeRequest(e,t,i,s,r=!0){if(this._deleted)return new YV(mC());{const o=sF(e,this._appId,i,s,t,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const CE="@firebase/storage",PE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="storage";function uF(n=Wv(),e){n=Ke(n);const i=Ef(n,gC).getImmediate({identifier:e}),s=ZI("storage");return s&&cF(i,...s),i}function cF(n,e,t,i={}){aF(n,e,t,i)}function hF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new lF(t,i,s,e,bo)}function dF(){co(new vr(gC,hF,"PUBLIC").setMultipleInstances(!0)),Ni(CE,PE,""),Ni(CE,PE,"esm2017")}dF();const fF={apiKey:"AIzaSyDtheRfY6rwj_NmS3fhlCesAnomqhZMsKE",authDomain:"trading-simulator-aaec2.firebaseapp.com",projectId:"trading-simulator-aaec2",storageBucket:"trading-simulator-aaec2.appspot.com",messagingSenderId:"872802887973",appId:"1:872802887973:web:20eed35e11cbca07a3d2cc",measurementId:"G-X51VB6KEP0"},K_=rb(fF),bc=e_(K_),Zt=SV(K_);uF(K_);const vC=z.createContext({user:null,ready:!1});function pF({children:n}){const[e,t]=z.useState(null),[i,s]=z.useState(!1);return z.useEffect(()=>{const r=TM(bc,o=>{t(o),s(!0)});return()=>r()},[]),I.jsx(vC.Provider,{value:{user:e,ready:i},children:n})}function sl(){return z.useContext(vC)}function mF({asset:n,currentPrice:e,prevPrice:t}){var a,l;const i=e??((a=n.history)==null?void 0:a.at(-1))??0,s=t??((l=n.history)==null?void 0:l.at(-2))??i,r=i-s,o=s?(r/s*100).toFixed(2):0;return I.jsx("div",{className:"card h-100 shadow-sm asset-card",children:I.jsxs("div",{className:"card-body d-flex flex-column",children:[I.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[I.jsxs("div",{className:"d-flex align-items-center gap-2",children:[I.jsx("div",{className:"logo-badge-svg",dangerouslySetInnerHTML:{__html:n.logoSvg}}),I.jsxs("div",{children:[I.jsx("h5",{className:"card-title mb-1",children:n.name}),I.jsx("p",{className:"text-secondary mb-2",children:n.symbol})]})]}),I.jsxs("span",{className:`badge ${r>=0?"bg-success":"bg-danger"}`,children:[r>=0?"▲":"▼"," ",o,"%"]})]}),I.jsx("div",{className:"mt-auto",children:I.jsxs("div",{className:"d-flex align-items-baseline gap-2",children:[I.jsxs("span",{className:"h4 mb-0",children:["$",Number(i).toFixed(2)]}),I.jsx(ai,{to:`/asset/${n.id}`,className:"btn btn-sm btn-outline-secondary ms-auto",children:"Trade"})]})})]})})}const ts={BTC:'<svg viewBox="0 0 24 24" width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="11" fill="#F7931A"/><path d="M13.5 6.5h-3v1.2h-.9v1h.9v6.6h-.9v1h.9v1.2h3v-1.2h1.1c1.8 0 3.1-1 3.1-2.6 0-1.2-.7-2-1.8-2.3.9-.3 1.5-1 1.5-2.1 0-1.5-1.2-2.4-3-2.4H13.5Zm1.1 5.3c.9 0 1.5.5 1.5 1.3 0 .8-.6 1.3-1.5 1.3H13.5v-2.6h1.1Zm-.2-3.4c.8 0 1.3.4 1.3 1.1 0 .7-.5 1.1-1.3 1.1H13.5V8.4h.9Z" fill="#fff"/></svg>',ETH:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><path fill="#627EEA" d="M12 2l7 10-7 4-7-4z"/><path fill="#627EEA" opacity=".7" d="M12 2v14l7-4z"/><path fill="#627EEA" opacity=".5" d="M12 22l7-10-7 4-7-4z"/></svg>',SOL:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><rect width="20" height="4" x="2" y="4" rx="2" fill="#14F195"/><rect width="20" height="4" x="2" y="10" rx="2" fill="#00FFA3" opacity=".7"/><rect width="20" height="4" x="2" y="16" rx="2" fill="#9945FF" opacity=".85"/></svg>',ADA:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="9" fill="#0033AD"/><circle cx="12" cy="12" r="2" fill="#fff"/><circle cx="7" cy="12" r="1" fill="#fff"/><circle cx="17" cy="12" r="1" fill="#fff"/><circle cx="12" cy="7" r="1" fill="#fff"/><circle cx="12" cy="17" r="1" fill="#fff"/></svg>',BNB:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><path fill="#F3BA2F" d="M12 2l3.5 3.5L12 9 8.5 5.5 12 2Zm6.5 6.5L22 12l-3.5 3.5L15 12l3.5-3.5ZM12 15l3.5 3.5L12 22l-3.5-3.5L12 15ZM2 12l3.5-3.5L9 12l-3.5 3.5L2 12Zm7-3l3 3-3 3-3-3 3-3Z"/></svg>',XRP:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><path fill="#23292F" d="M6 7c2.2 2.2 5.8 2.2 8 0l1.6-1.6h2.8L16 7c-3 3-8 3-11 0L3.6 5.4h2.8L6 7Zm12 10c-2.2-2.2-5.8-2.2-8 0L8.4 18.6H5.6L8 17c3-3 8-3 11 0l1.4 1.6h-2.8L18 17Z"/></svg>',DOGE:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" fill="#C2A633"/><path fill="#fff" d="M7 6h6.2c2.9 0 4.8 2 4.8 5s-1.9 5-4.8 5H7V6Zm3 2.2v7.6h3.2c1.9 0 3.1-1.6 3.1-3.8s-1.2-3.8-3.1-3.8H10Z"/></svg>',DOT:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="8" fill="#E6007A"/><circle cx="12" cy="5" r="1.2" fill="#fff"/><circle cx="12" cy="19" r="1.2" fill="#fff"/><circle cx="5" cy="12" r="1.2" fill="#fff"/><circle cx="19" cy="12" r="1.2" fill="#fff"/></svg>',LTC:'<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" fill="#345D9D"/><path fill="#fff" d="M11 6h2l-1 4h3l-.4 2h-3l-.6 2.5h5l-.4 2H7.5l1.4-5.5H8l.4-2h1.2L11 6Z"/></svg>'},gF=[{id:"bitcoin",symbol:"BTC",name:"Bitcoin",logoSvg:ts.BTC},{id:"ethereum",symbol:"ETH",name:"Ethereum",logoSvg:ts.ETH},{id:"solana",symbol:"SOL",name:"Solana",logoSvg:ts.SOL},{id:"cardano",symbol:"ADA",name:"Cardano",logoSvg:ts.ADA},{id:"bnb",symbol:"BNB",name:"BNB",logoSvg:ts.BNB},{id:"ripple",symbol:"XRP",name:"Ripple",logoSvg:ts.XRP},{id:"dogecoin",symbol:"DOGE",name:"Dogecoin",logoSvg:ts.DOGE},{id:"polkadot",symbol:"DOT",name:"Polkadot",logoSvg:ts.DOT},{id:"litecoin",symbol:"LTC",name:"Litecoin",logoSvg:ts.LTC}],Fg=gF.map(n=>({id:n.id,symbol:n.symbol,name:n.name,logoSvg:n.logoSvg,history:_F(vF(n.symbol))}));function vF(n){switch(n){case"BTC":return 45e3;case"ETH":return 3e3;case"SOL":return 150;case"ADA":return .45;case"BNB":return 600;case"XRP":return .6;case"DOGE":return .12;case"DOT":return 7;case"LTC":return 75;default:return 100}}function _F(n){const e=[];let t=n;for(let i=0;i<30;i++)t=yF(t,.04),e.push(Number(t.toFixed(2)));return e}function yF(n,e=.05){const t=n*e*(Math.random()*2-1);return n+t}async function Cc(n,e){const t=Lf(Zt,"users",n,"trades");await OV(t,{...e,ts:e.ts??Date.now(),createdAt:fC()})}async function wF(n){const e=await q_(n);if(!e.exists())return;const t=e.data()||{},i={};typeof t.balance!="number"&&(i.balance=1e4),Array.isArray(t.portfolio)||(i.portfolio=[]),typeof t.lastAirdropAt!="number"&&(i.lastAirdropAt=Date.now()),typeof t.welcomed!="boolean"&&(i.welcomed=!1),typeof t.nickname!="string"&&(i.nickname="Новый трейдер"),Object.keys(i).length&&await Ic(n,i)}async function _C(n,e){const t=mi(Zt,"users",n);return(await q_(t)).exists()?await wF(t):(await cC(t,{nickname:"Новый трейдер",balance:1e4,portfolio:[],createdAt:new Date().toISOString(),lastAirdropAt:Date.now(),welcomed:!1,avatarUrl:""}),await Cc(n,{type:"airdrop_start",amount:1e4,note:"Стартовый баланс"})),t}function Q_(n,e){const t=mi(Zt,"users",n);return Uf(t,i=>e(i.exists()?i.data():null))}async function EF(n){const e=Lf(Zt,"users",n,"trades"),t=await MV(e),i=[];return t.forEach(s=>i.push({id:s.id,...s.data()})),i.sort((s,r)=>r.ts-s.ts),i}function yC(n,e,t){const i=[...n??[]],s=i.findIndex(r=>r.symbol===e);if(s===-1){if(t<=0)return i;i.push({symbol:e,qty:Number(t)})}else{const r=Number(i[s].qty)+Number(t);r<=0?i.splice(s,1):i[s]={...i[s],qty:r}}return i}async function TF(n,e,t,i){if(t<=0)throw new Error("Количество должно быть > 0");const s=mi(Zt,"users",n);return await dC(Zt,async r=>{const o=await r.get(s);if(!o.exists())throw new Error("Профиль не найден");const a=o.data(),l=+(t*i).toFixed(2),c=+(a.balance-l).toFixed(2);if(c<-1e3)throw new Error("Недостаточно средств: лимит долга -$1000.");const d=yC(a.portfolio,e,t);r.update(s,{balance:c,portfolio:d})}),await Cc(n,{type:"buy",symbol:e,qty:Number(t),price:Number(i),total:+(t*i).toFixed(2)}),{ok:!0}}async function SF(n,e,t,i){if(t<=0)throw new Error("Количество должно быть > 0");const s=mi(Zt,"users",n);return await dC(Zt,async r=>{const o=await r.get(s);if(!o.exists())throw new Error("Профиль не найден");const a=o.data(),l=(a.portfolio??[]).find(g=>g.symbol===e);if(!l||l.qty<t)throw new Error("У вас нет достаточного количества этой монеты.");const c=+(t*i).toFixed(2),d=+(a.balance+c).toFixed(2),p=yC(a.portfolio,e,-t);r.update(s,{balance:d,portfolio:p})}),await Cc(n,{type:"sell",symbol:e,qty:Number(t),price:Number(i),total:+(t*i).toFixed(2)}),{ok:!0}}async function wC(n){const e=mi(Zt,"users",n),t=await q_(e);if(!t.exists())return null;const i=t.data(),s=Date.now(),r=i.lastAirdropAt??0,o=60*60*1e3;if(s-r<o)return null;const a=2e3,l=+(Number(i.balance||0)+a).toFixed(2);return await Ic(e,{balance:l,lastAirdropAt:s}),await Cc(n,{type:"airdrop",amount:a,note:"Периодическая выплата"}),{amount:a}}async function IF(n){await Ic(mi(Zt,"users",n),{welcomed:!0})}async function bF(n,e){return await Ic(mi(Zt,"users",n),{nickname:e}),await Cc(n,{type:"profile_update",note:"Изменение ника",nickname:e}),{ok:!0}}function yo(n){const{message:e,onClose:t,title:i,children:s,onOk:r,onCancel:o,okText:a="OK",cancelText:l}=n,c=!!e&&!s,[d,p]=z.useState(!1);z.useEffect(()=>{if(!c)return;const P=setTimeout(()=>p(!0),4e3),A=setTimeout(()=>{t&&t()},5e3);return()=>{clearTimeout(P),clearTimeout(A)}},[c,t]);const g=()=>{d||(p(!0),setTimeout(()=>{t&&t()},350))},y=()=>{r&&r(),g()},b=()=>{o&&o(),g()};return I.jsx("div",{className:"modal-backdrop-custom",onClick:g,children:I.jsx("div",{className:`modal-window ${d?"modal-exit":""}`,onClick:P=>P.stopPropagation(),children:c?I.jsxs("div",{className:"modal-success",children:[I.jsx("div",{className:"check-wrap","aria-hidden":!0,children:I.jsxs("svg",{className:"check-icon",viewBox:"0 0 24 24",width:"56",height:"56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[I.jsx("circle",{cx:"12",cy:"12",r:"11",fill:"url(#g1)"}),I.jsx("path",{d:"M7.5 12.5l2.5 2.5L16.5 9",stroke:"#062018",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),I.jsx("defs",{children:I.jsxs("linearGradient",{id:"g1",x1:"0",x2:"1",children:[I.jsx("stop",{offset:"0",stopColor:"var(--ok)"}),I.jsx("stop",{offset:"1",stopColor:"#35d8a5"})]})})]})}),I.jsx("h3",{className:"modal-title",children:"Success"}),I.jsx("div",{className:"modal-body-text",children:e}),I.jsx("div",{className:"modal-footer",children:I.jsx("button",{className:"modal-btn ok",onClick:g,children:"OK"})})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"modal-header",children:[I.jsx("h5",{className:"modal-title",children:i??"Notice"}),I.jsx("button",{className:"btn btn-ghost",onClick:g,children:"✕"})]}),I.jsx("div",{className:"modal-body",children:s}),I.jsxs("div",{className:"modal-footer",children:[l&&I.jsx("button",{className:"btn btn-ghost",onClick:b,children:l}),I.jsx("button",{className:"btn btn-primary",onClick:y,children:a})]})]})})})}const id={bitcoin:"BTCUSDT",ethereum:"ETHUSDT",bnb:"BNBUSDT",cardano:"ADAUSDT",solana:"SOLUSDT",dogecoin:"DOGEUSDT",polkadot:"DOTUSDT",litecoin:"LTCUSDT",ripple:"XRPUSDT"};function CF(){const n=Fg,{user:e}=sl(),[t,i]=z.useState(0),[s,r]=z.useState(null),[o,a]=z.useState({}),[l,c]=z.useState({}),[d,p]=z.useState([]),g=z.useMemo(()=>n.map(P=>id[P.id]).filter(Boolean),[n]);z.useEffect(()=>{if(!e)return;let P=()=>{};return(async()=>{await _C(e.uid),P=Q_(e.uid,E=>{(E==null?void 0:E.balance)!=null&&i(E.balance)});const A=await wC(e.uid);A!=null&&A.amount&&r({amount:A.amount})})(),()=>P()},[e==null?void 0:e.uid]),z.useEffect(()=>{if(!g.length)return;const P=new WebSocket(`wss://stream.binance.com:9443/stream?streams=${g.map(A=>A.toLowerCase()+"@trade").join("/")}`);return P.onmessage=A=>{const E=JSON.parse(A.data),{s:w,p:x}=E.data;a(M=>(c(W=>({...W,[w]:M[w]||parseFloat(x)})),{...M,[w]:parseFloat(x)}))},()=>P.close()},[g]),z.useEffect(()=>{const P=rC(Lf(Zt,"users"),oC("balance","desc"),RV(10)),A=Uf(P,E=>{const w=[];E.forEach(x=>w.push({id:x.id,...x.data()})),p(w)});return()=>A()},[]);const y=P=>o[id[P.id]],b=P=>l[id[P.id]];return I.jsxs("div",{className:"container py-4",children:[I.jsxs("div",{className:"card mb-3 p-3 d-flex flex-column flex-md-row align-items-center justify-content-between shadow-sm",children:[I.jsxs("div",{className:"d-flex align-items-center gap-3",children:[I.jsx("div",{className:"brand-logo",children:"💹"}),I.jsxs("div",{children:[I.jsx("h1",{className:"display-5 mb-1 fw-bold",children:"Trading Simulator 0.1"}),I.jsx("p",{className:"text-secondary mb-0",children:"Испытай себя в трейдинге и стань лидером!"})]})]}),I.jsxs("div",{className:"text-end",children:[I.jsx("div",{className:"small text-secondary",children:"Баланс"}),I.jsxs("div",{className:"h3",children:["$",Number(t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),I.jsx("div",{className:"row g-3",children:n.map(P=>I.jsx("div",{className:"col-12 col-sm-6 col-lg-4",children:I.jsx(mF,{asset:P,currentPrice:y(P),prevPrice:b(P)})},P.id))}),I.jsxs("div",{className:"card mt-4 p-3",children:[I.jsx("h5",{className:"mb-3",children:"🏆 Лидерборд"}),I.jsx("div",{className:"table-responsive",children:I.jsxs("table",{className:"table table-striped table-hover align-middle mb-0",children:[I.jsx("thead",{className:"table-dark",children:I.jsxs("tr",{children:[I.jsx("th",{children:"#"}),I.jsx("th",{children:"Игрок"}),I.jsx("th",{children:"Баланс"})]})}),I.jsx("tbody",{children:d.map((P,A)=>{var E;return I.jsxs("tr",{children:[I.jsx("td",{children:A+1}),I.jsxs("td",{className:"d-flex align-items-center gap-2",children:[P.avatarUrl?I.jsx("img",{src:P.avatarUrl,alt:"",className:"rounded-circle border",style:{width:"32px",height:"32px",objectFit:"cover"}}):I.jsx("div",{className:"rounded-circle bg-secondary d-flex align-items-center justify-content-center text-white",style:{width:"32px",height:"32px"},children:"👤"}),I.jsx("span",{children:P.nickname||"Без имени"})]}),I.jsxs("td",{className:"fw-semibold",children:["$",(E=P.balance)==null?void 0:E.toLocaleString()]})]},P.id)})})]})})]}),I.jsx("div",{className:"card mt-4 p-3",children:I.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[I.jsx("h5",{className:"mb-1",children:"About"}),I.jsx(ai,{className:"btn btn-primary",to:"/about",children:"Открыть страницу"})]})}),s&&I.jsxs(yo,{title:"Начисление средств",onClose:()=>r(null),okText:"Ок",onOk:()=>r(null),children:["На ваш баланс зачислено +$",s.amount,". Успешного трейдинга!"]})]})}function Be(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function so(n,e){return n.width===e.width&&n.height===e.height}var PF=function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){t._observers=t._observers.filter(function(s){return s!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n}();function AF(n){return new PF(n)}var kF=function(){function n(e,t,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Be({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(r){return r},this._allowResizeObserver=(s=i==null?void 0:i.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return Be({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Be(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;so(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,i=Be(this._transformBitmapSize(e,this._canvasElementClientSize)),s=so(this.bitmapSize,i)?null:i;t===null&&s===null||t!==null&&s!==null&&so(t,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(t,s))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}RF().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=AE(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=AF(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var i=AE(this._canvasElement);if(i!==null){var s=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:i.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?NF(r[0],s):Be({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(o)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var i=t.find(function(o){return o.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var s=i.devicePixelContentBoxSize[0],r=Be({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n}();function xF(n,e){return new kF(n,e.transform,e.options)}function AE(n){return n.ownerDocument.defaultView}function RF(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function NF(n,e){return Be({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var DF=function(){function n(e,t,i){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n}();function wo(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var s=n.canvasElement.getContext("2d",e);return s===null?null:new DF(s,t,i)}/*!
 * @license
 * TradingView Lightweight Charts™ v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const EC={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var kE,xE;function Ha(n,e){const t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function TC(n,e,t,i){n.beginPath();const s=n.lineWidth%2?.5:0;n.moveTo(t,e+s),n.lineTo(i,e+s),n.stroke()}function Lt(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function In(n){if(n===void 0)throw new Error("Value is undefined");return n}function G(n){if(n===null)throw new Error("Value is null");return n}function nr(n){return G(In(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(kE||(kE={})),function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"}(xE||(xE={}));class ut{constructor(){this.t=[]}i(e,t,i){const s={h:e,l:t,o:i===!0};this.t.push(s)}_(e){const t=this.t.findIndex(i=>e===i.h);t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter(t=>t.l!==e)}p(e,t,i){const s=[...this.t];this.t=this.t.filter(r=>!r.o),s.forEach(r=>r.h(e,t,i))}v(){return this.t.length>0}m(){this.t=[]}}function On(n,...e){for(const t of e)for(const i in t)t[i]!==void 0&&Object.prototype.hasOwnProperty.call(t,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof t[i]!="object"||n[i]===void 0||Array.isArray(t[i])?n[i]=t[i]:On(n[i],t[i]));return n}function qa(n){return typeof n=="number"&&isFinite(n)}function Zu(n){return typeof n=="number"&&n%1==0}function Pc(n){return typeof n=="string"}function kh(n){return typeof n=="boolean"}function us(n){const e=n;if(!e||typeof e!="object")return e;let t,i,s;for(i in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(s=e[i],t[i]=s&&typeof s=="object"?us(s):s);return t}function MF(n){return n!==null}function ec(n){return n===null?void 0:n}const SC="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Xd(n,e,t){return e===void 0&&(e=SC),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}class OF{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,t=this.F(),i=this.W();return e.P===t&&e.T===i||(e.P=t,e.T=i,e.k=Xd(t,i),e.A=2.5/12*t,e.V=e.A,e.I=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function tm(n){return n<0?0:n>255?255:Math.round(n)||0}function RE(n){return .199*n[0]+.687*n[1]+.114*n[2]}class LF{constructor(e,t){this.q=new Map,this.Y=e,t&&(this.q=t)}j(e,t){if(e==="transparent")return e;const i=this.K(e),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${t*s})`}X(e){const t=this.K(e);return{Z:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,G:RE(t)>160?"black":"white"}}J(e){return RE(this.K(e))}tt(e,t,i){const[s,r,o,a]=this.K(e),[l,c,d,p]=this.K(t),g=[tm(s+i*(l-s)),tm(r+i*(c-r)),tm(o+i*(d-o)),(y=a+i*(p-a),y<=0||y>1?Math.min(Math.max(y,0),1):Math.round(1e4*y)/1e4)];var y;return`rgba(${g[0]}, ${g[1]}, ${g[2]}, ${g[3]})`}K(e){const t=this.q.get(e);if(t)return t;const i=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(e),s=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!s){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const r=[parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),s[4]?parseFloat(s[4]):1];return this.q.set(e,r),r}}class VF{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,i){this.it.forEach(s=>{s.nt(e,t,i)})}}class xo{nt(e,t,i){e.useBitmapCoordinateSpace(s=>this.et(s,t,i))}}class FF extends xo{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const s=this.rt.lt,r=this.rt,o=Math.max(1,Math.floor(t))%2/2,a=l=>{e.beginPath();for(let c=s.to-1;c>=s.from;--c){const d=r.ot[c],p=Math.round(d._t*t)+o,g=d.ut*i,y=l*i+o;e.moveTo(p,g),e.arc(p,g,y,0,2*Math.PI)}e.fill()};r.ct>0&&(e.fillStyle=r.dt,a(r.ft+r.ct)),e.fillStyle=r.vt,a(r.ft)}}function jF(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const UF={from:0,to:1};class BF{constructor(e,t,i){this.Mt=new VF,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=t,this.Pt=i,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(jF),this.bt=this.St.map(t=>{const i=new FF;return i.ht(t),i}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),t=this.Pt.It(),i=this.Ct.Bt(),s=this.O.Et();this.yt(),t.forEach((r,o)=>{const a=this.St[o],l=r.At(i),c=r.zt();!e&&l!==null&&r.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=r.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/r.Ft().$t()),a.ot[0].wt=i,a.ot[0]._t=s.qt(i),a.lt=UF):a.lt=null})}}class $F extends xo{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null)return;const r=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!r&&!o)return;const a=Math.round(this.Yt._t*i),l=Math.round(this.Yt.ut*s);e.lineCap="butt",r&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*i),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Ha(e,this.Yt.jt.Xt),function(c,d,p,g){c.beginPath();const y=c.lineWidth%2?.5:0;c.moveTo(d+y,p),c.lineTo(d+y,g),c.stroke()}(e,a,0,t.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*s),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Ha(e,this.Yt.Kt.Xt),TC(e,l,0,t.width))}}class zF{constructor(e,t){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new $F(this.Zt),this.Jt=e,this.Pt=t}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),t=this.Pt.Qt().N().crosshair,i=this.Zt;if(t.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=e&&this.Jt.ti(this.Pt),i.jt.Vt=e&&this.Jt.ii(),i.Kt.ct=t.horzLine.width,i.Kt.Xt=t.horzLine.style,i.Kt.R=t.horzLine.color,i.jt.ct=t.vertLine.width,i.jt.Xt=t.vertLine.style,i.jt.R=t.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function WF(n,e,t,i,s,r){n.fillRect(e+r,t,i-2*r,r),n.fillRect(e+r,t+s-r,i-2*r,r),n.fillRect(e,t,r,s),n.fillRect(e+i-r,t,r,s)}function Bf(n,e,t,i,s,r){n.save(),n.globalCompositeOperation="copy",n.fillStyle=r,n.fillRect(e,t,i,s),n.restore()}function NE(n,e,t,i,s,r){n.beginPath(),n.roundRect?n.roundRect(e,t,i,s,r):(n.lineTo(e+i-r[1],t),r[1]!==0&&n.arcTo(e+i,t,e+i,t+r[1],r[1]),n.lineTo(e+i,t+s-r[2]),r[2]!==0&&n.arcTo(e+i,t+s,e+i-r[2],t+s,r[2]),n.lineTo(e+r[3],t+s),r[3]!==0&&n.arcTo(e,t+s,e,t+s-r[3],r[3]),n.lineTo(e,t+r[0]),r[0]!==0&&n.arcTo(e,t,e+r[0],t,r[0]))}function DE(n,e,t,i,s,r,o=0,a=[0,0,0,0],l=""){if(n.save(),!o||!l||l===r)return NE(n,e,t,i,s,a),n.fillStyle=r,n.fill(),void n.restore();const c=o/2;var d;NE(n,e+c,t+c,i-o,s-o,(d=-c,a.map(p=>p===0?p:p+d))),r!=="transparent"&&(n.fillStyle=r,n.fill()),l!=="transparent"&&(n.lineWidth=o,n.strokeStyle=l,n.closePath(),n.stroke()),n.restore()}function IC(n,e,t,i,s,r,o){n.save(),n.globalCompositeOperation="copy";const a=n.createLinearGradient(0,0,0,s);a.addColorStop(0,r),a.addColorStop(1,o),n.fillStyle=a,n.fillRect(e,t,i,s),n.restore()}class ME{constructor(e,t){this.ht(e,t)}ht(e,t){this.Yt=e,this.ei=t}$t(e,t){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,t,i,s){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const r=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=t.k;const d=this.hi(l,t,i,s),p=d.ai;return d.li?DE(c,p.oi,p._i,p.ui,p.ci,o,p.di,[p.ft,0,0,p.ft],o):DE(c,p.fi,p._i,p.ui,p.ci,o,p.di,[0,p.ft,p.ft,0],o),this.Yt.pi&&(c.fillStyle=r,c.fillRect(p.fi,p.mi,p.wi-p.fi,p.gi)),this.Yt.Mi&&(c.fillStyle=t.D,c.fillRect(d.li?p.bi-p.di:0,p._i,p.di,p.Si-p._i)),d});e.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=t.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=r,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,t,i,s){const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,d=this.Yt.pi||!this.Yt.ki?t.C:0,p=this.Yt.yi?t.S:0,g=t.A+this.ei.Ti,y=t.V+this.ei.Ri,b=t.I,P=t.B,A=this.Yt.ri,E=t.P,w=i.Di(r,A),x=Math.ceil(i.Vi(r,A)),M=E+g+y,W=t.S+b+P+x+d,Y=Math.max(1,Math.floor(c));let R=Math.round(M*c);R%2!=Y%2&&(R+=1);const C=p>0?Math.max(1,Math.floor(p*l)):0,k=Math.round(W*l),N=Math.round(d*l),O=this.ei.Ii??this.ei.Bi,F=Math.round(O*c)-Math.floor(.5*c),D=Math.floor(F+Y/2-R/2),Et=D+R,en=s==="right",Jn=en?a.width-p:p,ft=en?o.width-C:C;let Z,le,U;return en?(Z=ft-k,le=ft-N,U=Jn-d-b-p):(Z=ft+k,le=ft+N,U=Jn+d+b),{li:en,ai:{_i:D,mi:F,Si:Et,ui:k,ci:R,ft:2*l,di:C,oi:Z,fi:ft,wi:le,gi:Y,bi:o.width},xi:{_i:D/c,Si:Et/c,Ci:U,Pi:w}}}}class $f{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||ME)(this.Ai,this.Ei),this.Oi=new(e||ME)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,t=!1){return Math.max(this.Li.$t(e,t),this.Oi.$t(e,t))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class HF extends $f{constructor(e,t,i){super(),this.Jt=e,this.Yi=t,this.ji=i}qi(e,t,i){if(e.Vt=!1,this.Jt.N().mode===2)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const r=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||r===null)return;const o=this.Yi.Xi().X(s.labelBackgroundColor);i.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();i.Ti=a,i.Ri=a;const l=this.ji(this.Yi);i.Bi=l.Bi,e.ri=this.Yi.Zi(l.gt,r),e.Vt=!0}}const qF=/[1-9]/g;class bC{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,t){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const i=e.useMediaCoordinateSpace(({context:g})=>(g.font=t.k,Math.round(t.Gi.Vi(g,G(this.Yt).ri,qF))));if(i<=0)return;const s=t.Ji,r=i+2*s,o=r/2,a=this.Yt.Qi;let l=this.Yt.Bi,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+r>a&&(l-=Math.abs(a-(c+r)),c=Math.floor(l-o)+.5);const d=c+r,p=Math.ceil(0+t.S+t.C+t.A+t.P+t.V);e.useBitmapCoordinateSpace(({context:g,horizontalPixelRatio:y,verticalPixelRatio:b})=>{const P=G(this.Yt);g.fillStyle=P.Z;const A=Math.round(c*y),E=Math.round(0*b),w=Math.round(d*y),x=Math.round(p*b),M=Math.round(2*y);if(g.beginPath(),g.moveTo(A,E),g.lineTo(A,x-M),g.arcTo(A,x,A+M,x,M),g.lineTo(w-M,x),g.arcTo(w,x,w,x-M,M),g.lineTo(w,E),g.fill(),P.pi){const W=Math.round(P.Bi*y),Y=E,R=Math.round((Y+t.C)*b);g.fillStyle=P.R;const C=Math.max(1,Math.floor(y)),k=Math.floor(.5*y);g.fillRect(W-k,Y,C,R-Y)}}),e.useMediaCoordinateSpace(({context:g})=>{const y=G(this.Yt),b=0+t.S+t.C+t.A+t.P/2;g.font=t.k,g.textAlign="left",g.textBaseline="middle",g.fillStyle=y.R;const P=t.Gi.Di(g,"Apr0");g.translate(c+s,b+P),g.fillText(y.ri,0,0)})}}class YF{constructor(e,t,i){this.xt=!0,this.Gt=new bC,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=t,this.ji=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const t=this.Ct.N().vertLine;if(!t.labelVisible)return;const i=this.ts.Et();if(i.Ki())return;e.Qi=i.Qi();const s=this.ji();if(s===null)return;e.Bi=s.Bi;const r=i.ss(this.Ct.Bt());e.ri=i.ns(G(r)),e.Vt=!0;const o=this.ts.Xi().X(t.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=i.N().ticksVisible}}class CC{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var OE;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(OE||(OE={}));class KF extends CC{constructor(e,t){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=t,this.ks=((s,r)=>o=>{const a=r(),l=s();if(o===G(this.Pt).ys())return{gt:l,Bi:a};{const c=G(o.zt());return{gt:o.Ts(a,c),Bi:a}}})(()=>this.ds,()=>this.Ss);const i=((s,r)=>()=>{const o=this.ts.Et().Rs(s()),a=r();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new YF(this,e,i)}N(){return this.Ps}Vs(e,t){this.xs=e,this.Cs=t}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,t,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,t,i)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let t=this.gs.get(e);t||(t=new zF(this,e),this.gs.set(e,t));let i=this.Ms.get(e);return i||(i=new BF(this.ts,this,e),this.Ms.set(e,i)),[t,i]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,t){this.ps&&this.Pt===e||this.vs.clear();const i=[];return this.Pt===e&&i.push(this.Hs(this.vs,t,this.ks)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var t,i;(t=this.gs.get(e))==null||t.kt(),(i=this.Ms.get(e))==null||i.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,t,i){this.Ys(e,t,i)&&this.Ns()}Ys(e,t,i){const s=this.bs,r=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(i);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=i;const d=c!==null?c.zt():null;return c!==null&&d!==null?(this.ds=t,this.Ss=c.Nt(t,d)):(this.ds=NaN,this.Ss=NaN),s!==this.bs||r!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){const e=this.ts.js().map(i=>i.Xs().Ks()).filter(MF),t=e.length===0?null:Math.max(...e);this.fs=t!==null?t:NaN}Hs(e,t,i){let s=e.get(t);return s===void 0&&(s=new HF(this,t,i),e.set(t,s)),s}}function zf(n){return n==="left"||n==="right"}class Mt{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,t){const i=function(s,r){return s===void 0?r:{tn:Math.max(s.tn,r.tn),sn:s.sn||r.sn}}(this.Zs.get(e),t);this.Zs.set(e,i)}nn(){return this.Js}en(e){const t=this.Zs.get(e);return t===void 0?{tn:this.Js}:{tn:Math.max(this.Js,t.tn),sn:t.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const t of e.Gs)this.mn(t);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((t,i)=>{this.Qs(i,t)})}static wn(){return new Mt(2)}static gn(){return new Mt(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(t=>t.an===5);e!==-1&&this.Gs.splice(e,1)}}class PC{formatTickmarks(e){return e.map(t=>this.format(t))}}const LE=".";function cs(n,e){if(!qa(n))return"n/a";if(!Zu(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}class Wf extends PC{constructor(e,t){if(super(),t||(t=1),qa(e)&&Zu(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=t,this.bn()}format(e){const t=e<0?"−":"";return e=Math.abs(e),t+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const t=this.Yi/this.Mn;let i=Math.floor(e),s="";const r=this.xn!==void 0?this.xn:NaN;if(t>1){let o=+(Math.round(e*t)-i*t).toFixed(this.xn);o>=t&&(o-=t,i+=1),s=LE+cs(+o.toFixed(this.xn)*this.Mn,r)}else i=Math.round(i*t)/t,r>0&&(s=LE+cs(0,r));return i.toFixed(0)+s}}class AC extends Wf{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class QF extends PC{constructor(e){super(),this.Cn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.Pn(e):e<999995?t+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.Pn(e/1e9)+"B")}Pn(e){let t;const i=Math.pow(10,this.Cn);return t=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(s,r)=>r)}}const GF=/[2-9]/g;class Jd{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,t,i){return this.Bn(e,t,i).width}Di(e,t,i){const s=this.Bn(e,t,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}Bn(e,t,i){const s=i||GF,r=String(t).replace(s,"0");if(this.Dn.has(r))return In(this.Dn.get(r)).En;if(this.kn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const o=e.measureText(r);return e.restore(),o.width===0&&t.length||(this.Dn.set(r,{En:o,An:this.yn}),this.Rn[this.yn]=r,this.kn++,this.yn++),o}}class XF{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,t,i){this.zn=e,this.M=t,this.Ln=i}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class kC{constructor(e,t,i){this.Fn=e,this.On=new Jd(50),this.Wn=t,this.O=i,this.F=-1,this.Gt=new XF(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const t=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(t===null)return null;const i=e.qn(t);if(i==="overlay")return null;const s=this.O.Yn();return s.P!==this.F&&(this.F=s.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),s,i),this.Gt}}class JF extends xo{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,t){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:i,ct:s,Kn:r}=this.Yt;return t>=i-s-7&&t<=i+s+7?{Xn:this.Yt,Kn:r}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null||this.Yt.Vt===!1)return;const r=Math.round(this.Yt.ut*s);r<0||r>t.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*i),Ha(e,this.Yt.Xt),TC(e,r,0,t.width))}}class G_{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new JF,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class ZF extends G_{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),t=e.ie().ie;if(t!==2&&t!==3)return;const i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;const s=this.Jn.zt();s!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(s.Wt,s.Wt),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}}class ej extends xo{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){const s=this.Yt;if(s===null)return;const r=Math.max(1,Math.floor(t)),o=r%2/2,a=Math.round(s.ne.x*t)+o,l=s.ne.y*i;e.fillStyle=s.ee,e.beginPath();const c=Math.max(2,1.5*s.re)*t;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.he,e.beginPath(),e.arc(a,l,s.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=s.ae,e.beginPath(),e.arc(a,l,s.ft*t+r/2,0,2*Math.PI,!1),e.stroke()}}const tj=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class nj{constructor(e){this.Gt=new ej,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),t=this.we-e;if(t>0)return void(t<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),t=e.Pe(),i=this.ge.zt();if(t===null||i===null)return;const s=this.ge.ke(!0);if(s.ye||!t.Te(s.Re))return;const r={x:e.qt(s.Re),y:this.ge.Ft().Nt(s.gt,i.Wt)},o=s.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:r})}Ce(){const e=this.Gt.se();if(e!==null){const t=this.De(this.Ve(),e.ee);e.he=t.he,e.ae=t.ae,e.ft=t.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,t,i,s){const r=i+(s-i)*t;return this.ge.Qt().Xi().j(e,r)}De(e,t){const i=e%2600/2600;let s;for(const c of tj)if(i>=c.le&&i<=c.oe){s=c;break}Lt(s!==void 0,"Last price animation internal logic error");const r=(i-s.le)/(s.oe-s.le);return{he:this.Ie(t,r,s.ce,s.de),ae:this.Ie(t,r,s.fe,s.pe),ft:(o=r,a=s._e,l=s.ue,a+(l-a)*o)};var o,a,l}}class ij extends G_{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const t=this.Jn.N();if(!t.priceLineVisible||!this.Jn.Vt())return;const i=this.Jn.ke(t.priceLineSource===0);i.ye||(e.Vt=!0,e.ut=i.Bi,e.R=this.Jn.Be(i.R),e.ct=t.priceLineWidth,e.Xt=t.priceLineStyle)}}class sj extends $f{constructor(e){super(),this.Jt=e}qi(e,t,i){e.Vt=!1,t.Vt=!1;const s=this.Jt;if(!s.Vt())return;const r=s.N(),o=r.lastValueVisible,a=s.Ee()!=="",l=r.seriesLastValueMode===0,c=s.ke(!1);if(c.ye)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(t.ri=this.ze(c,o,a,l),t.Vt=t.ri.length>0);const d=s.Be(c.R),p=this.Jt.Qt().Xi().X(d);i.Z=p.Z,i.Bi=c.Bi,t.Ht=s.Qt().Ut(c.Bi/s.Ft().$t()),e.Ht=d,e.R=p.G,t.R=p.G}ze(e,t,i,s){let r="";const o=this.Jt.Ee();return i&&o.length!==0&&(r+=`${o} `),t&&s&&(r+=this.Jt.Ft().Le()?e.Oe:e.Ne),r.trim()}Ae(e,t,i){return t?i?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function VE(n,e,t,i){const s=Number.isFinite(e),r=Number.isFinite(t);return s&&r?n(e,t):s||r?s?e:t:i}class fn{constructor(e,t){this.Fe=e,this.We=t}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new fn(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new fn(VE(Math.min,this.$e(),e.$e(),-1/0),VE(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!qa(e)||this.We-this.Fe===0)return;const t=.5*(this.We+this.Fe);let i=this.We-t,s=this.Fe-t;i*=e,s*=e,this.We=t+i,this.Fe=t+s}Ke(e){qa(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new fn(e.minValue,e.maxValue)}}class Zd{constructor(e,t){this.Ge=e,this.Je=t||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new Zd(fn.Ze(e.priceRange),e.margins)}}class rj extends G_{constructor(e,t){super(e),this.ir=t}te(){const e=this.Zn;e.Vt=!1;const t=this.ir.N();if(!this.Jn.Vt()||!t.lineVisible)return;const i=this.ir.sr();i!==null&&(e.Vt=!0,e.ut=i,e.R=t.color,e.ct=t.lineWidth,e.Xt=t.lineStyle,e.Kn=this.ir.N().id)}}class oj extends $f{constructor(e,t){super(),this.ge=e,this.ir=t}qi(e,t,i){e.Vt=!1,t.Vt=!1;const s=this.ir.N(),r=s.axisLabelVisible,o=s.title!=="",a=this.ge;if(!r||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(t.ri=s.title,t.Vt=!0),t.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(s.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(s.axisLabelColor||s.color);i.Z=c.Z;const d=s.axisLabelTextColor||c.G;e.R=d,t.R=d,i.Bi=l}nr(e){const t=this.ge.zt();return t===null?"":this.ge.Ft().Zi(e,t.Wt)}}class aj{constructor(e,t){this.ge=e,this.Ps=t,this.er=new rj(e,this),this.Fn=new oj(e,this),this.rr=new kC(this.Fn,e,e.Qt())}hr(e){On(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,t=e.Ft();if(e.Qt().Et().Ki()||t.Ki())return null;const i=e.zt();return i===null?null:t.Nt(this.Ps.price,i.Wt)}}class lj extends CC{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const uj={Bar:(n,e,t,i)=>{const s=e.upColor,r=e.downColor,o=G(n(t,i)),a=nr(o.Wt[0])<=nr(o.Wt[3]);return{cr:o.R??(a?s:r)}},Candlestick:(n,e,t,i)=>{const s=e.upColor,r=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,d=G(n(t,i)),p=nr(d.Wt[0])<=nr(d.Wt[3]);return{cr:d.R??(p?s:r),dr:d.Ht??(p?o:a),pr:d.vr??(p?l:c)}},Custom:(n,e,t,i)=>({cr:G(n(t,i)).R??e.color}),Area:(n,e,t,i)=>{const s=G(n(t,i));return{cr:s.vt??e.lineColor,vt:s.vt??e.lineColor,mr:s.mr??e.topColor,wr:s.wr??e.bottomColor}},Baseline:(n,e,t,i)=>{const s=G(n(t,i));return{cr:s.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:s.gr??e.topLineColor,Mr:s.Mr??e.bottomLineColor,br:s.br??e.topFillColor1,Sr:s.Sr??e.topFillColor2,Cr:s.Cr??e.bottomFillColor1,Pr:s.Pr??e.bottomFillColor2}},Line:(n,e,t,i)=>{const s=G(n(t,i));return{cr:s.R??e.color,vt:s.R??e.color}},Histogram:(n,e,t,i)=>({cr:G(n(t,i)).R??e.color})};class cj{constructor(e){this.kr=(t,i)=>i!==void 0?i.Wt:this.ge.Xs().yr(t),this.ge=e,this.Tr=uj[e.Rr()]}Dr(e,t){return this.Tr(this.kr,this.ge.N(),e,t)}}function xC(n,e,t,i,s=0,r=e.length){let o=r-s;for(;0<o;){const a=o>>1,l=s+a;i(e[l],t)===n?(s=l+1,o-=a+1):o=a}return s}const Ya=xC.bind(null,!0),RC=xC.bind(null,!1);var FE;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(FE||(FE={}));const zs=30;class hj{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,t=0){const i=this.Nr(e,t);return i===null?null:{...this.Wr(i),Re:this.Or(i)}}Hr(){return this.Vr}Ur(e,t,i){if(this.Ki())return null;let s=null;for(const r of i)s=xh(s,this.$r(e,t,r));return s}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(t=>t.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,t){const i=this.Yr(e);if(i===null&&t!==0)switch(t){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return i}jr(e){let t=this.Xr(e);return t>0&&(t-=1),t!==this.Vr.length&&this.Or(t)<e?t:null}Kr(e){const t=this.Zr(e);return t!==this.Vr.length&&e<this.Or(t)?t:null}Yr(e){const t=this.Xr(e);return t===this.Vr.length||e<this.Vr[t].Re?null:t}Xr(e){return Ya(this.Vr,e,(t,i)=>t.Re<i)}Zr(e){return RC(this.Vr,e,(t,i)=>t.Re>i)}Gr(e,t,i){let s=null;for(let r=e;r<t;r++){const o=this.Vr[r].Wt[i];Number.isNaN(o)||(s===null?s={Jr:o,Qr:o}:(o<s.Jr&&(s.Jr=o),o>s.Qr&&(s.Qr=o)))}return s}$r(e,t,i){if(this.Ki())return null;let s=null;const r=G(this.Lr()),o=G(this.Ks()),a=Math.max(e,r),l=Math.min(t,o),c=Math.ceil(a/zs)*zs,d=Math.max(c,Math.floor(l/zs)*zs);{const g=this.Xr(a),y=this.Zr(Math.min(l,c,t));s=xh(s,this.Gr(g,y,i))}let p=this.Ir.get(i);p===void 0&&(p=new Map,this.Ir.set(i,p));for(let g=Math.max(c+1,a);g<d;g+=zs){const y=Math.floor(g/zs);let b=p.get(y);if(b===void 0){const P=this.Xr(y*zs),A=this.Zr((y+1)*zs-1);b=this.Gr(P,A,i),p.set(y,b)}s=xh(s,b)}{const g=this.Xr(d),y=this.Zr(l);s=xh(s,this.Gr(g,y,i))}return s}}function xh(n,e){return n===null?e:e===null?n:{Jr:Math.min(n.Jr,e.Jr),Qr:Math.max(n.Qr,e.Qr)}}class dj{constructor(e){this.th=e}nt(e,t,i){this.th.draw(e)}ih(e,t,i){var s,r;(r=(s=this.th).drawBackground)==null||r.call(s,e)}}class fj{constructor(e){this.Dn=null,this.sh=e}Tt(){var i;const e=this.sh.renderer();if(e===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===e)return this.Dn.eh;const t=new dj(e);return this.Dn={nh:e,eh:t},t}rh(){var e,t;return((t=(e=this.sh).zOrder)==null?void 0:t.call(e))??"normal"}}class NC{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,t;(t=(e=this.ah).updateAllViews)==null||t.call(e)}Fs(){var i,s,r;const e=((s=(i=this.ah).paneViews)==null?void 0:s.call(i))??[];if(((r=this.hh)==null?void 0:r.nh)===e)return this.hh.eh;const t=e.map(o=>new fj(o));return this.hh={nh:e,eh:t},t}jn(e,t){var i,s;return((s=(i=this.ah).hitTest)==null?void 0:s.call(i,e,t))??null}}let pj=class extends NC{us(){return[]}};class mj{constructor(e){this.th=e}nt(e,t,i){this.th.draw(e)}ih(e,t,i){var s,r;(r=(s=this.th).drawBackground)==null||r.call(s,e)}}class jE{constructor(e){this.Dn=null,this.sh=e}Tt(){var i;const e=this.sh.renderer();if(e===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===e)return this.Dn.eh;const t=new mj(e);return this.Dn={nh:e,eh:t},t}rh(){var e,t;return((t=(e=this.sh).zOrder)==null?void 0:t.call(e))??"normal"}}function DC(n){var e,t,i;return{ri:n.text(),Bi:n.coordinate(),Ii:(e=n.fixedCoordinate)==null?void 0:e.call(n),R:n.textColor(),Z:n.backColor(),Vt:((t=n.visible)==null?void 0:t.call(n))??!0,pi:((i=n.tickVisible)==null?void 0:i.call(n))??!0}}class gj{constructor(e,t){this.Gt=new bC,this._h=e,this.uh=t}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...DC(this._h)}),this.Gt}}class vj extends $f{constructor(e,t){super(),this._h=e,this.Yi=t}qi(e,t,i){const s=DC(this._h);i.Z=s.Z,e.R=s.R;const r=2/12*this.Yi.P();i.Ti=r,i.Ri=r,i.Bi=s.Bi,i.Ii=s.Ii,e.ri=s.ri,e.Vt=s.Vt,e.pi=s.pi}}class _j extends NC{constructor(e,t){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=t}cs(){var s,r,o;const e=((r=(s=this.ah).timeAxisViews)==null?void 0:r.call(s))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const t=this.ge.Qt().Et(),i=e.map(a=>new gj(a,t));return this.dh={nh:e,eh:i},i}Ws(){var s,r,o;const e=((r=(s=this.ah).priceAxisViews)==null?void 0:r.call(s))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const t=this.ge.Ft(),i=e.map(a=>new vj(a,t));return this.fh={nh:e,eh:i},i}wh(){var i,s,r;const e=((s=(i=this.ah).priceAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.ph)==null?void 0:r.nh)===e)return this.ph.eh;const t=e.map(o=>new jE(o));return this.ph={nh:e,eh:t},t}gh(){var i,s,r;const e=((s=(i=this.ah).timeAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.mh)==null?void 0:r.nh)===e)return this.mh.eh;const t=e.map(o=>new jE(o));return this.mh={nh:e,eh:t},t}Mh(e,t){var i,s;return((s=(i=this.ah).autoscaleInfo)==null?void 0:s.call(i,e,t))??null}}function nm(n,e,t,i){n.forEach(s=>{e(s).forEach(r=>{r.rh()===t&&i.push(r)})})}function im(n){return n.Fs()}function yj(n){return n.wh()}function wj(n){return n.gh()}const Ej=["Area","Line","Baseline"];class Hf extends lj{constructor(e,t,i,s,r){super(e),this.Yt=new hj,this.er=new ij(this),this.bh=[],this.Sh=new ZF(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=i,this.yh=t;const o=new sj(this);this.vs=[o],this.rr=new kC(o,this,e),Ej.includes(this.yh)&&(this.xh=new nj(this)),this.Th(),this.sh=s(this,this.Qt(),r)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const t={ye:!0},i=this.Ft();if(this.Qt().Et().Ki()||i.Ki()||this.Yt.Ki())return t;const s=this.Qt().Et().Pe(),r=this.zt();if(s===null||r===null)return t;let o,a;if(e){const p=this.Yt.Ar();if(p===null)return t;o=p,a=p.Re}else{const p=this.Yt.Fr(s.bi(),-1);if(p===null||(o=this.Yt.yr(p.Re),o===null))return t;a=p.Re}const l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),d=i.Nt(l,r.Wt);return{ye:!1,gt:l,ri:i.Zi(l,r.Wt),Oe:i.Dh(l),Ne:i.Vh(l,r.Wt),R:c.cr,Bi:d,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new cj(this)),this.Ch}N(){return this.Ps}hr(e){const t=e.priceScaleId;t!==void 0&&t!==this.Ps.priceScaleId&&this.Qt().Ih(this,t),On(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,t){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(t&&t.zh?this.xh.be():e.length===0&&this.xh.Me());const i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const t=new aj(this,e);return this.bh.push(t),this.Qt().Eh(this),t}Nh(e){const t=this.bh.indexOf(e);t!==-1&&this.bh.splice(t,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const t=e.Uh();return this.Yt.Fr(t,1)}Xs(){return this.Yt}$h(e){const t=this.Yt.yr(e);return t===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3]}:t.Wt[3]}Xh(e){const t=[];nm(this.kh,im,"top",t);const i=this.xh;return i!==null&&i.Vt()&&(this.Ph===null&&i.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),i.Se(),t.unshift(i)),t}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const t=this.bh.map(i=>i.lr());return e.push(...t),nm(this.kh,im,"normal",e),e}Jh(){return this.Qh(im,"bottom")}ta(e){return this.Qh(yj,e)}ia(e){return this.Qh(wj,e)}sa(e,t){return this.kh.map(i=>i.jn(e,t)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,t){if(t!==this.es&&!this.Gh())return[];const i=[...this.vs];for(const s of this.bh)i.push(s.ur());return this.kh.forEach(s=>{i.push(...s.Ws())}),i}cs(){const e=[];return this.kh.forEach(t=>{e.push(...t.cs())}),e}Mh(e,t){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider(()=>{const s=this.na(e,t);return s===null?null:s.Xe()});return Zd.Ze(i)}return this.na(e,t)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){var e;this.sh.kt();for(const t of this.vs)t.kt();for(const t of this.bh)t.kt();this.er.kt(),this.Sh.kt(),(e=this.xh)==null||e.kt(),this.kh.forEach(t=>t.Ns())}Ft(){return G(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const t=this.Yt.yr(e);return t===null?null:{gt:t.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new _j(e,this))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!zf(this.Ft().wa())}na(e,t){if(!Zu(e)||!Zu(t)||this.Yt.Ki())return null;const i=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],s=this.Yt.Ur(e,t,i);let r=s!==null?new fn(s.Jr,s.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,l=new fn(a,a);r=r!==null?r.vn(l):l}return this.kh.forEach(a=>{const l=a.Mh(e,t);if(l!=null&&l.priceRange){const c=new fn(l.priceRange.minValue,l.priceRange.maxValue);r=r!==null?r.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new Zd(r,o)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(t=>t.map(e))};break}case"volume":this.ha=new QF(this.Ps.priceFormat.precision);break;case"percent":this.ha=new AC(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new Wf(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,t){const i=[];return nm(this.kh,e,t,i),i}}const Tj=[3],Sj=[0,1,2,3];class Ij{constructor(e){this.Ps=e}Ma(e,t,i){let s=e;if(this.Ps.mode===0)return s;const r=i.ys(),o=r.zt();if(o===null)return s;const a=r.Nt(e,o),l=i.ba().filter(d=>d instanceof Hf).reduce((d,p)=>{if(i.Un(p)||!p.Vt())return d;const g=p.Ft(),y=p.Xs();if(g.Ki()||!y.Te(t))return d;const b=y.yr(t);if(b===null)return d;const P=nr(p.zt()),A=this.Ps.mode===3?Sj:Tj;return d.concat(A.map(E=>g.Nt(b.Wt[E],P.Wt)))},[]);if(l.length===0)return s;l.sort((d,p)=>Math.abs(d-a)-Math.abs(p-a));const c=l[0];return s=r.Ts(c,o),s}}function wu(n,e,t){return Math.min(Math.max(n,e),t)}function Rh(n,e,t){return e-n<=t}class bj extends xo{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.Yt===null)return;const r=Math.max(1,Math.floor(i));e.lineWidth=r,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=G(this.Yt);if(o.Sa){e.strokeStyle=o.xa,Ha(e,o.Ca),e.beginPath();for(const a of o.Pa){const l=Math.round(a.ka*i);e.moveTo(l,-r),e.lineTo(l,t.height+r)}e.stroke()}if(o.ya){e.strokeStyle=o.Ta,Ha(e,o.Ra),e.beginPath();for(const a of o.Da){const l=Math.round(a.ka*s);e.moveTo(-r,l),e.lineTo(t.width+r,l)}e.stroke()}})}}class Cj{constructor(e){this.Gt=new bj,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,t={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(i=>({ka:i.coord}))};this.Gt.ht(t),this.xt=!1}return this.Gt}}class Pj{constructor(e){this.sh=new Cj(e)}lr(){return this.sh}}const sm={Ia:4,Ba:1e-4};function wa(n,e){const t=100*(n-e)/e;return e<0?-t:t}function Aj(n,e){const t=wa(n.$e(),e),i=wa(n.qe(),e);return new fn(t,i)}function Eu(n,e){const t=100*(n-e)/e+100;return e<0?-t:t}function kj(n,e){const t=Eu(n.$e(),e),i=Eu(n.qe(),e);return new fn(t,i)}function ef(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.log10(t+e.Ba)+e.Ia;return n<0?-i:i}function Tu(n,e){const t=Math.abs(n);if(t<1e-15)return 0;const i=Math.pow(10,t-e.Ia)-e.Ba;return n<0?-i:i}function ql(n,e){if(n===null)return null;const t=ef(n.$e(),e),i=ef(n.qe(),e);return new fn(t,i)}function su(n,e){if(n===null)return null;const t=Tu(n.$e(),e),i=Tu(n.qe(),e);return new fn(t,i)}function rm(n){if(n===null)return sm;const e=Math.abs(n.qe()-n.$e());if(e>=1||e<1e-15)return sm;const t=Math.ceil(Math.abs(Math.log10(e))),i=sm.Ia+t;return{Ia:i,Ba:1/Math.pow(10,i)}}class om{constructor(e,t){if(this.Ea=e,this.Aa=t,function(i){if(i<0)return!1;for(let s=i;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let i=this.Ea;i!==1;){if(i%2==0)this.za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),i/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,t,i){const s=this.Ea===0?0:1/this.Ea;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Aa[0];for(;;){const p=Rh(r,s,1e-14)&&r>s+1e-14,g=Rh(r,i*a,1e-14),y=Rh(r,1,1e-14);if(!(p&&g&&y))break;r/=a,a=this.Aa[++o%this.Aa.length]}if(r<=s+1e-14&&(r=s),r=Math.max(1,r),this.za.length>0&&(l=r,c=1,d=1e-14,Math.abs(l-c)<d))for(o=0,a=this.za[0];Rh(r,i*a,1e-14)&&r>s+1e-14;)r/=a,a=this.za[++o%this.za.length];var l,c,d;return r}}class UE{constructor(e,t,i,s){this.Oa=[],this.Yi=e,this.Ea=t,this.Na=i,this.Fa=s}La(e,t){if(e<t)throw new Error("high < low");const i=this.Yi.$t(),s=(e-t)*this.Wa()/i,r=new om(this.Ea,[2,2.5,2]),o=new om(this.Ea,[2,2,2.5]),a=new om(this.Ea,[2.5,2,2]),l=[];return l.push(r.La(e,t,s),o.La(e,t,s),a.La(e,t,s)),function(c){if(c.length<1)throw Error("array is empty");let d=c[0];for(let p=1;p<c.length;++p)c[p]<d&&(d=c[p]);return d}(l)}Ha(){const e=this.Yi,t=e.zt();if(t===null)return void(this.Oa=[]);const i=e.$t(),s=this.Na(i-1,t),r=this.Na(0,t),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,l=i-1-o,c=Math.max(s,r),d=Math.min(s,r);if(c===d)return void(this.Oa=[]);const p=this.La(c,d);if(this.$a(t,p,c,d,a,l),e.qa()&&this.Ya(p,d,c)){const b=this.Yi.ja();this.Ka(t,p,a,l,b,2*b)}const g=this.Oa.map(b=>b.Xa),y=this.Yi.Za(g);for(let b=0;b<this.Oa.length;b++)this.Oa[b].Ga=y[b]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,t,i,s,r,o){const a=this.Oa,l=this.Yi;let c=i%t;c+=c<0?t:0;const d=i>=s?1:-1;let p=null,g=0;for(let y=i-c;y>s;y-=t){const b=this.Fa(y,e,!0);p!==null&&Math.abs(b-p)<this.Wa()||b<r||b>o||(g<a.length?(a[g].ka=b,a[g].Ga=l.Ja(y),a[g].Xa=y):a.push({ka:b,Ga:l.Ja(y),Xa:y}),g++,p=b,l.Qa()&&(t=this.La(y*d,s)))}a.length=g}Ka(e,t,i,s,r,o){const a=this.Oa,l=this.tl(e,i,r,o),c=this.tl(e,s,-o,-r),d=this.Fa(0,e,!0)-this.Fa(t,e,!0);a.length>0&&a[0].ka-l.ka<d/2&&a.shift(),a.length>0&&c.ka-a[a.length-1].ka<d/2&&a.pop(),a.unshift(l),a.push(c)}tl(e,t,i,s){const r=(i+s)/2,o=this.Na(t+i,e),a=this.Na(t+s,e),l=Math.min(o,a),c=Math.max(o,a),d=Math.max(.1,this.La(c,l)),p=this.Na(t+r,e),g=p-p%d,y=this.Fa(g,e,!0);return{Ga:this.Yi.Ja(g),ka:y,Xa:g}}Ya(e,t,i){let s=nr(this.Yi.Qe());return this.Yi.Qa()&&(s=su(s,this.Yi.il())),s.$e()-t<e&&i-s.qe()<e}}function MC(n){return n.slice().sort((e,t)=>G(e.hs())-G(t.hs()))}var BE;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(BE||(BE={}));const $E=new AC,zE=new Wf(100,1);class xj{constructor(e,t,i,s,r){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new ut,this.cl=new ut,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=zE,this.gl=rm(null),this.Ml=e,this.Ps=t,this.bl=i,this.Sl=s,this.xl=r,this.Cl=new UE(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(On(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const t=In(e.scaleMargins.top),i=In(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(t+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+i}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const t=this.ie();let i=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),t.ie===1&&e.ie!==t.ie&&(function(r,o){if(r===null)return!1;const a=Tu(r.$e(),o),l=Tu(r.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.gl)?(i=su(this.Ge,this.gl),i!==null&&this.Bl(i)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==t.ie&&(i=ql(this.Ge,this.gl),i!==null&&this.Bl(i));const s=t.ie!==this.Ps.mode;s&&(t.ie===2||this.Le())&&this.ga(),s&&(t.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&t.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(t,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,t){const i=this.Ge;(t||i===null&&e!==null||i!==null&&!i.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,t){return this.Le()?e=wa(e,t):this.Vl()&&(e=Eu(e,t)),this.kl(e,t)}$l(e,t,i){this.Fl();const s=this.Nl(),r=G(this.Qe()),o=r.$e(),a=r.qe(),l=this.Ll()-1,c=this.Il(),d=l/(a-o),p=i===void 0?0:i.from,g=i===void 0?e.length:i.to,y=this.ql();for(let b=p;b<g;b++){const P=e[b],A=P.gt;if(isNaN(A))continue;let E=A;y!==null&&(E=y(P.gt,t));const w=s+d*(E-o),x=c?w:this.sl-1-w;P.ut=x}}Yl(e,t,i){this.Fl();const s=this.Nl(),r=G(this.Qe()),o=r.$e(),a=r.qe(),l=this.Ll()-1,c=this.Il(),d=l/(a-o),p=i===void 0?0:i.from,g=i===void 0?e.length:i.to,y=this.ql();for(let b=p;b<g;b++){const P=e[b];let A=P.qh,E=P.Yh,w=P.jh,x=P.Kh;y!==null&&(A=y(P.qh,t),E=y(P.Yh,t),w=y(P.jh,t),x=y(P.Kh,t));let M=s+d*(A-o),W=c?M:this.sl-1-M;P.jl=W,M=s+d*(E-o),W=c?M:this.sl-1-M,P.Kl=W,M=s+d*(w-o),W=c?M:this.sl-1-M,P.Xl=W,M=s+d*(x-o),W=c?M:this.sl-1-M,P.Zl=W}}Ts(e,t){const i=this.Pl(e,t);return this.Gl(i,t)}Gl(e,t){let i=e;return this.Le()?i=function(s,r){return r<0&&(s=-s),s/100*r+r}(i,t):this.Vl()&&(i=function(s,r){return s-=100,r<0&&(s=-s),s/100*r+r}(i,t)),i}ba(){return this.dl}Dt(){return this.pl||(this.pl=MC(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const t=this.dl.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.dl.splice(t,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const t of this.dl){const i=t.zt();i!==null&&(e===null||i.Hh<e.Hh)&&(e=i)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const t=this.Cl.Va();return this.vl={Va:t,so:e},this.ul.p(),t}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=G(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let t=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const i=G(this.el).Ue();t=Math.max(t,.1),i.je(t),this.Bl(i)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=G(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;const t=G(this.Qe()).Ye()/(this.Ll()-1);let i=e-this.wl;this.Il()&&(i*=-1);const s=i*t,r=G(this.el).Ue();r.Ke(s),this.Bl(r,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,t){switch(this.Ps.mode){case 2:return this._o(wa(e,t));case 3:return this.ra().format(Eu(e,t));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,G(this.fl).ra())}Vh(e,t){return e=wa(e,t),this._o(e,$E)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const i of this.dl)i.hs()<e&&(e=i.hs(),this.fl=i);let t=100;this.fl!==null&&(t=Math.round(1/this.fl.ea())),this.ha=zE,this.Le()?(this.ha=$E,t=100):this.Vl()?(this.ha=new Wf(100,1),t=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new UE(this,t,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,t){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?ef(e,this.gl):e;const i=G(this.Qe()),s=this.Nl()+(this.Ll()-1)*(e-i.$e())/i.Ye();return this.Ul(s)}Pl(e,t){if(this.Fl(),this.Ki())return 0;const i=this.Ul(e),s=G(this.Qe()),r=s.$e()+s.Ye()*((i-this.Nl())/(this.Ll()-1));return this.Qa()?Tu(r,this.gl):r}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(e===null)return;let t=null;const i=this.do();let s=0,r=0;for(const l of i){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const d=l.Mh(e.Uh(),e.bi());let p=d&&d.Qe();if(p!==null){switch(this.Ps.mode){case 1:p=ql(p,this.gl);break;case 2:p=Aj(p,c.Wt);break;case 3:p=kj(p,c.Wt)}if(t=t===null?p:t.vn(G(p)),d!==null){const g=d.tr();g!==null&&(s=Math.max(s,g.above),r=Math.max(r,g.below))}}}if(this.qa()&&(s=Math.max(s,this.ja()),r=Math.max(r,this.ja())),s===this.ol&&r===this._l||(this.ol=s,this._l=r,this.vl=null,this.Tl()),t!==null){if(t.$e()===t.qe()){const l=this.fl,c=5*(l===null||this.Le()||this.Vl()?1:l.ea());this.Qa()&&(t=su(t,this.gl)),t=new fn(t.$e()-c,t.qe()+c),this.Qa()&&(t=ql(t,this.gl))}if(this.Qa()){const l=su(t,this.gl),c=rm(l);if(o=c,a=this.gl,o.Ia!==a.Ia||o.Ba!==a.Ba){const d=this.el!==null?su(this.el,this.gl):null;this.gl=c,t=ql(l,c),d!==null&&(this.el=ql(d,c))}}this.Bl(t)}else this.Ge===null&&(this.Bl(new fn(-.5,.5)),this.gl=rm(null));var o,a}ql(){return this.Le()?wa:this.Vl()?Eu:this.Qa()?e=>ef(e,this.gl):null}vo(e,t,i){return t===void 0?(i===void 0&&(i=this.ra()),i.format(e)):t(e)}mo(e,t,i){return t===void 0?(i===void 0&&(i=this.ra()),i.formatTickmarks(e)):t(e)}nr(e,t){return this.vo(e,this.Sl.priceFormatter,t)}co(e,t){const i=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(i?s=>s.map(i):void 0),t)}_o(e,t){return this.vo(e,this.Sl.percentageFormatter,t)}uo(e,t){const i=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(i?s=>s.map(i):void 0),t)}}function WE(n){return n instanceof Hf}class HE{constructor(e,t){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new ut,this.kh=[],this.uh=e,this.ts=t,this.Co=new Pj(this);const i=t.N();this.Po=this.ko("left",i.leftPriceScale),this.yo=this.ko("right",i.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(i)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const t=Array.from(this.wo.values());for(const i of t){const s=G(i[0].Ft());s.hr(e.overlayPriceScales),e.localization&&s.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?In(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const t=e.oh();return t.detached&&t.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(t=>{if(this.Un(t)){const i=t.Ft();i!==null&&i.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(WE)}ba(){return this.dl}Un(e){const t=e.Ft();return t===null||this.Po!==t&&this.yo!==t}Jl(e,t,i){this.No(e,t,i?e.hs():this.dl.length)}io(e,t){const i=this.dl.indexOf(e);Lt(i!==-1,"removeDataSource: invalid data source"),this.dl.splice(i,1),t||this.dl.forEach((o,a)=>o.ls(a));const s=G(e.Ft()).wa();if(this.wo.has(s)){const o=In(this.wo.get(s)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(s))}const r=e.Ft();r&&r.ba().indexOf(e)>=0&&(r.io(e),this.Fo(r)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,t){e.eo(t)}$o(e,t){e.ro(t),this.Ao()}qo(e){e.ho()}Yo(e,t){e.ao(t)}jo(e,t){e.lo(t),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){const t=this.uh.Pe();e.yl({sn:!0}),t!==null&&e.fo(t),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=MC(this.dl)),this.pl}Qo(e,t){t=wu(t,0,this.dl.length-1);const i=this.dl.indexOf(e);Lt(i!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(i,1),this.dl.splice(t,0,e),this.dl.forEach((s,r)=>s.ls(r)),this.pl=null;for(const s of[this.Po,this.yo])s.Ql(),s.ga();this.ts.ar()}It(){return this.Dt().filter(WE)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new pj(e))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,t){return this.kh.map(i=>i.jn(e,t)).filter(i=>i!==null)}Xo(e){const t=e.do();if(t&&t.length>0&&!this.uh.Ki()){const i=this.uh.Pe();i!==null&&e.fo(i)}e.Ns()}No(e,t,i){let s=this.Do(t);if(s===null&&(s=this.ko(t,this.ts.N().overlayPriceScales)),this.dl.splice(i,0,e),!zf(t)){const r=this.wo.get(t)||[];r.push(e),this.wo.set(t,r)}e.ls(i),s.Jl(e),e._s(s),this.Fo(s),this.pl=null}To(e,t,i){t.ie!==i.ie&&this.Xo(e)}ko(e,t){const i={visible:!0,autoScale:!0,...us(t)},s=new xj(e,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return s.zl(this.$t()),s}}function Nh(n){return{n_:n.n_,e_:{Kn:n.r_.externalId},h_:n.r_.cursorStyle}}function Rj(n,e,t,i){for(const s of n){const r=s.Tt(i);if(r!==null&&r.jn){const o=r.jn(e,t);if(o!==null)return{a_:s,e_:o}}}return null}function Nj(n){return n.Fs!==void 0}function OC(n,e,t){const i=[n,...n.Dt()],s=function(r,o,a){var g;let l,c;for(const y of r){const b=((g=y.sa)==null?void 0:g.call(y,o,a))??[];for(const P of b)d=P.zOrder,p=l==null?void 0:l.zOrder,(!p||d==="top"&&p!=="top"||d==="normal"&&p==="bottom")&&(l=P,c=y)}var d,p;return l&&c?{r_:l,n_:c}:null}(i,e,t);if((s==null?void 0:s.r_.zOrder)==="top")return Nh(s);for(const r of i){if(s&&s.n_===r&&s.r_.zOrder!=="bottom"&&!s.r_.isBackground)return Nh(s);if(Nj(r)){const o=Rj(r.Fs(n),e,t,n);if(o!==null)return{n_:r,a_:o.a_,e_:o.e_}}if(s&&s.n_===r&&s.r_.zOrder!=="bottom"&&s.r_.isBackground)return Nh(s)}return s!=null&&s.r_?Nh(s):null}class Dj{constructor(e,t,i=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=t,this.Vn=i}__(e){const t=e.time,i=this.o_.cacheKey(t),s=this.Dn.get(i);if(s!==void 0)return s.u_;if(this.kn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(In(o)),this.Tn++,this.kn--}const r=this.l_(e);return this.Dn.set(i,{u_:r,An:this.yn}),this.Rn.set(this.yn,i),this.kn++,this.yn++,r}}class Su{constructor(e,t){Lt(e<=t,"right should be >= left"),this.c_=e,this.d_=t}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function qE(n,e){return n===null||e===null?n===e:n.He(e)}class Mj{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,t){this.g_(t),this.Dn=null;for(let i=t;i<e.length;++i){const s=e[i];let r=this.p_.get(s.timeWeight);r===void 0&&(r=[],this.p_.set(s.timeWeight,r)),r.push({index:i,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}M_(e,t,i,s,r){const o=Math.ceil(t/e);return this.Dn!==null&&this.Dn.b_===o&&r===this.Dn.S_&&i===this.Dn.x_||(this.Dn={S_:r,x_:i,Va:this.C_(o,i,s),b_:o}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();const t=[];this.p_.forEach((i,s)=>{e<=i[0].index?t.push(s):i.splice(Ya(i,e,r=>r.index<e),1/0)});for(const i of t)this.p_.delete(i)}C_(e,t,i){let s=[];const r=o=>!t||i.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;const a=s;s=[];const l=a.length;let c=0;const d=In(this.p_.get(o)),p=d.length;let g=1/0,y=-1/0;for(let b=0;b<p;b++){const P=d[b],A=P.index;for(;c<l;){const E=a[c],w=E.index;if(!(w<A&&r(E))){g=w;break}c++,s.push(E),y=w,g=1/0}if(g-A>=e&&A-y>=e&&r(P))s.push(P),y=A;else if(this.v_)return a}for(;c<l;c++)r(a[c])&&s.push(a[c])}return s}}class Ra{constructor(e){this.P_=e}k_(){return this.P_===null?null:new Su(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new Ra(null)}}function Oj(n,e){return n.weight>e.weight?n:e}class Lj{constructor(e,t,i,s){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new Mj,this.I_=new Map,this.B_=Ra.T_(),this.E_=!0,this.A_=new ut,this.z_=new ut,this.L_=new ut,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=t,this.Sl=i,this.U_=t.rightOffset,this.q_=t.barSpacing,this.ts=e,this.o_=s,this.Y_(),this.V_.m_(t.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){On(this.Sl,e),this.X_(),this.Y_()}hr(e,t){On(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){var t;return((t=this.D_[e])==null?void 0:t.time)??null}ss(e){return this.D_[e]??null}J_(e,t){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return t?this.D_.length-1:null;const i=Ya(this.D_,this.o_.key(e),(s,r)=>this.o_.key(s.time)<r);return this.o_.key(e)<this.o_.key(this.D_[i].time)?t?i:null:i}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(e===null)return null;const t={from:e.Uh(),to:e.bi()};return this.nu(t)}nu(e){const t=Math.round(e.from),i=Math.round(e.to),s=G(this.eu()),r=G(this.ru());return{from:G(this.ss(Math.max(s,t))),to:G(this.ss(Math.min(r,i)))}}hu(e){return{from:G(this.J_(e.from,!0)),to:G(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const t=this.iu(),i=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const s=this.q_*e/i;this.q_=s}if(this.Ps.fixLeftEdge&&t!==null&&t.Uh()<=0){const s=i-e;this.U_-=Math.round(s/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!Zu(e))return 0;const t=this.ou()+this.U_-e;return this.Mo-(t+.5)*this.q_-1}_u(e,t){const i=this.ou(),s=t===void 0?0:t.from,r=t===void 0?e.length:t.to;for(let o=s;o<r;o++){const a=e[o].wt,l=i+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}uu(e,t){const i=Math.ceil(this.cu(e));return t&&this.Ps.ignoreWhitespaceIndices&&!this.du(i)?this.fu(i):i}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,t=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(t/e),s=G(this.Pe()),r=Math.max(s.Uh(),s.Uh()-i),o=Math.max(s.bi(),s.bi()-i),a=this.V_.M_(e,t,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.eu()+i,c=this.ru()-i,d=this.gu(),p=this.Ps.fixLeftEdge||d,g=this.Ps.fixRightEdge||d;let y=0;for(const b of a){if(!(r<=b.index&&b.index<=o))continue;let P;y<this.H_.length?(P=this.H_[y],P.coord=this.qt(b.index),P.label=this.Mu(b),P.weight=b.weight):(P={needAlignCoordinate:!1,coord:this.qt(b.index),label:this.Mu(b),weight:b.weight},this.H_.push(P)),this.q_>t/2&&!d?P.needAlignCoordinate=!1:P.needAlignCoordinate=p&&b.index<=l||g&&b.index>=c,y++}return this.H_.length=y,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,t){const i=this.cu(e),s=this.vu(),r=s+t*(s/10);this.dn(r),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(i-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;const t=wu(this.Mo-e,0,this.Mo),i=wu(this.Mo-G(this.ml),0,this.Mo);t!==0&&i!==0&&this.dn(this.O_.vu*t/i)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;const t=(this.wl-e)/this.vu();this.U_=G(this.O_).wu+t,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.U_,s=performance.now();this.ts._n({Tu:r=>(r-s)/t>=1,Ru:r=>{const o=(r-s)/t;return o>=1?e:i+(e-i)*o}})}kt(e,t){this.E_=!0,this.D_=e,this.V_.w_(e,t),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const t=e.f_();this.mu(this.Mo/t),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),t=this.ru();e!==null&&t!==null&&this.Bu(new Su(e,t+this.Ps.rightOffset))}Au(e){const t=new Su(e.from,e.to);this.Bu(t)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const t of e)for(const i of t.ma())this.F_.set(i,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,t=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const t=this.zu(e),i=this.ou()+this.U_-t;return Math.round(1e6*i)/1e6}mu(e){const t=this.q_;this.q_=e,this.au(),t!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(Ra.T_());const e=this.ou(),t=this.Mo/this.q_,i=this.U_+e,s=new Su(i-t+1,i);this.Ou(new Ra(s))}au(){const e=wu(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const t=this.Hu();this.U_>t&&(this.U_=t,this.E_=!0)}Wu(){const e=this.eu(),t=this.R_;return e===null||t===null?null:e-t-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let t=this.I_.get(e.weight);return t===void 0&&(t=new Dj(i=>this.Uu(i),this.o_),this.I_.set(e.weight,t)),t.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const t=this.B_;this.B_=e,qE(t.k_(),this.B_.k_())||this.A_.p(),qE(t.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(e===null)return;const t=this.Pe();if(t===null)return;const i=t.Uh()-e;if(i<0){const s=this.U_-i-1;this.fn(s)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const t=function*(s){const r=Math.round(s),o=r<s;let a=1;for(;;)o?(yield r+a,yield r-a):(yield r-a,yield r+a),a++}(e),i=this.ru();for(;i;){const s=t.next().value;if(this.F_.get(s))return s;if(s<0||s>i)break}return e}}var YE,KE,QE,GE,XE;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(YE||(YE={}));class Vj{constructor(e,t,i){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new ut,this.Ku=new ut,this.Xu=null,this.Zu=e,this.Ps=t,this.o_=i,this.xl=new LF(this.Ps.layout.colorParsers),this.Gu=new OF(this),this.uh=new Lj(this,t.timeScale,this.Ps.localization,i),this.Ct=new KF(this,t.crosshair),this.Ju=new Ij(t.crosshair),t.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(Mt.gn())}ar(){this.ec(Mt.wn())}Zh(){this.ec(new Mt(1))}Eh(e){const t=this.rc(e);this.ec(t)}hc(){return this.Yu}ac(e){var i,s,r,o;if(((i=this.Yu)==null?void 0:i.n_)===(e==null?void 0:e.n_)&&((r=(s=this.Yu)==null?void 0:s.e_)==null?void 0:r.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const t=this.Yu;this.Yu=e,t!==null&&this.Eh(t.n_),e!==null&&e.n_!==(t==null?void 0:t.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){On(this.Ps,e),this.$u.forEach(t=>t.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,t,i=0){const s=this.$u[i];if(s===void 0)return;if(e==="left")return On(this.Ps,{leftPriceScale:t}),s.Ro({leftPriceScale:t}),this.ju.p(),void this.Bh();if(e==="right")return On(this.Ps,{rightPriceScale:t}),s.Ro({rightPriceScale:t}),this.ju.p(),void this.Bh();const r=this.oc(e,i);r!==null&&(r.Ft.hr(t),this.ju.p())}oc(e,t){const i=this.$u[t];if(i===void 0)return null;const s=i.Do(e);return s!==null?{Us:i,Ft:s}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,t){e.zl(t),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(t=>t.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(Lt(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,t){if(this.$u.length<2)return;Lt(e>=0&&e<this.$u.length,"Invalid pane index");const i=this.$u[e],s=this.$u.reduce((p,g)=>p+g.Io(),0),r=this.$u.reduce((p,g)=>p+g.$t(),0),o=r-30*(this.$u.length-1);t=Math.min(o,Math.max(30,t));const a=s/r,l=i.$t();i.Bo(t*a);let c=t-l,d=this.$u.length-1;for(const p of this.$u)if(p!==i){const g=Math.min(o,Math.max(30,p.$t()-c/d));c-=p.$t()-g,d-=1;const y=g*a;p.Bo(y)}this.Bh()}vc(e,t){Lt(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index");const i=this.$u[e],s=this.$u[t];this.$u[e]=s,this.$u[t]=i,this.Bh()}mc(e,t){if(Lt(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index"),e===t)return;const[i]=this.$u.splice(e,1);this.$u.splice(t,0,i),this.Bh()}Uo(e,t,i){e.Uo(t,i)}$o(e,t,i){e.$o(t,i),this.Ah(),this.ec(this.wc(e,2))}qo(e,t){e.qo(t),this.ec(this.wc(e,2))}Yo(e,t,i){t.Rl()||e.Yo(t,i)}jo(e,t,i){t.Rl()||(e.jo(t,i),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,t){t.Rl()||(e.Ko(t),this.ec(this.wc(e,2)))}Zo(e,t){e.Zo(t),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,t){const i=this.Et();if(i.Ki()||t===0)return;const s=i.Qi();e=Math.max(1,Math.min(e,s)),i.xu(e,t),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,t,i,s,r){this.Ct.Vs(e,t);let o=NaN,a=this.uh.uu(e,!0);const l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=s.ys(),d=c.zt();if(d!==null&&(o=c.Ts(t,d)),o=this.Ju.Ma(o,a,s),this.Ct.As(a,o,s),this.Zh(),!r){const p=OC(s,e,t);this.ac(p&&{n_:p.n_,e_:p.e_,h_:p.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:t},i)}}Tc(e,t,i){const s=i.ys(),r=s.zt(),o=s.Nt(e,G(r)),a=this.uh.J_(t,!0),l=this.uh.qt(G(a));this.yc(l,o,null,i,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const t=this.Ct.Bs(),i=this.Ct.Es();this.yc(t,i,null,e)}this.Ct.Ns()}Dc(e,t,i){const s=this.uh.Rs(0);t!==void 0&&i!==void 0&&this.uh.kt(t,i);const r=this.uh.Rs(0),o=this.uh.ou(),a=this.uh.Pe();if(a!==null&&s!==null&&r!==null){const l=a.Te(o),c=this.o_.key(s)>this.o_.key(r),d=e!==null&&e>o&&!c,p=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,g=l&&(i!==void 0||p)&&this.uh.N().shiftVisibleRangeOnNewBar;if(d&&!g){const y=e-o;this.uh.fn(this.uh.wu()-y)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(i){return i instanceof HE}(e))return e;const t=this.$u.find(i=>i.Dt().includes(e));return t===void 0?null:t}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,t){const i=this.Qu(t);this.Bc(e,i),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){const t=this.Hn(e),i=this.qu.indexOf(e);Lt(i!==-1,"Series not found");const s=G(t);this.qu.splice(i,1),s.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(s)}Ih(e,t){const i=G(this.Hn(e));i.io(e,!0),i.Jl(e,t,!0)}Eu(){const e=Mt.wn();e.rn(),this.ec(e)}zc(e){const t=Mt.wn();t.ln(e),this.ec(t)}cn(){const e=Mt.wn();e.cn(),this.ec(e)}dn(e){const t=Mt.wn();t.dn(e),this.ec(t)}fn(e){const t=Mt.wn();t.fn(e),this.ec(t)}_n(e){const t=Mt.wn();t._n(e),this.ec(t)}hn(){const e=Mt.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,t){if(Lt(t>=0,"Index should be greater or equal to 0"),t===this.Nc(e))return;const i=G(this.Hn(e));i.io(e);const s=this.Qu(t);this.Bc(e,s),i.ba().length===0&&this.Ac(i),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const t=this.nc,i=this.tc;if(t===i)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==i||this.Xu.wr!==t)this.Xu={mr:i,wr:t,Wc:new Map};else{const r=this.Xu.Wc.get(e);if(r!==void 0)return r}const s=this.xl.tt(i,t,e/100);return this.Xu.Wc.set(e,s),s}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const t=new HE(this.uh,this);this.$u.push(t);const i=e??this.$u.length-1,s=Mt.gn();return s.Qs(i,{tn:0,sn:!0}),this.ec(s),t}Qu(e){return Lt(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(t=>t.Oo().includes(e))}wc(e,t){const i=new Mt(t);if(e!==null){const s=this.$u.indexOf(e);i.Qs(s,{tn:t})}return i}rc(e,t){return t===void 0&&(t=2),this.wc(this.Hn(e),t)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(t=>t.i_().lr().kt())}Bc(e,t){const i=e.N().priceScaleId,s=i!==void 0?i:this.Lc();t.Jl(e,s),zf(s)||e.hr(e.N())}sc(e){const t=this.Ps.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function jg(n){return!qa(n)&&!Pc(n)}function LC(n){return qa(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(KE||(KE={})),function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"}(QE||(QE={})),function(n){n.Solid="solid",n.VerticalGradient="gradient"}(GE||(GE={})),function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"}(XE||(XE={}));const JE=n=>n.getUTCFullYear();function Fj(n,e,t){return e.replace(/yyyy/g,(i=>cs(JE(i),4))(n)).replace(/yy/g,(i=>cs(JE(i)%100,2))(n)).replace(/MMMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(n,t)).replace(/MMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(n,t)).replace(/MM/g,(i=>cs((s=>s.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>cs((s=>s.getUTCDate())(i),2))(n))}class VC{constructor(e="yyyy-MM-dd",t="default"){this.qc=e,this.Yc=t}__(e){return Fj(e,this.qc,this.Yc)}}class jj{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",cs(e.getUTCHours(),2)).replace("%m",cs(e.getUTCMinutes(),2)).replace("%s",cs(e.getUTCSeconds(),2))}}const Uj={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class Bj{constructor(e={}){const t={...Uj,...e};this.Jc=new VC(t.Kc,t.Gc),this.Qc=new jj(t.Xc),this.td=t.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function Dh(n){return 60*n*60*1e3}function am(n){return 60*n*1e3}const Mh=[{sd:(ZE=1,1e3*ZE),nd:10},{sd:am(1),nd:20},{sd:am(5),nd:21},{sd:am(30),nd:22},{sd:Dh(1),nd:30},{sd:Dh(3),nd:31},{sd:Dh(6),nd:32},{sd:Dh(12),nd:33}];var ZE;function eT(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=Mh.length-1;t>=0;--t)if(Math.floor(e.getTime()/Mh[t].sd)!==Math.floor(n.getTime()/Mh[t].sd))return Mh[t].nd;return 0}function lm(n){let e=n;if(Pc(n)&&(e=X_(n)),!jg(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(t.getTime()/1e3),rd:e}}function tT(n){if(!LC(n))throw new Error("time must be of type isUTCTimestamp");return{ed:n}}function X_(n){const e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function nT(n){Pc(n.time)&&(n.time=X_(n.time))}class iT{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(nT)}(e):nT(e)}createConverterToInternalObj(e){return G(function(t){return t.length===0?null:jg(t[0].time)||Pc(t[0].time)?lm:tT}(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.rd===void 0?new Date(1e3*t.ed).getTime():new Date(Date.UTC(t.rd.year,t.rd.month-1,t.rd.day)).getTime()}convertHorzItemToInternal(e){return LC(t=e)?tT(t):jg(t)?lm(t):lm(X_(t));var t}updateFormatter(e){if(!this.Ps)return;const t=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new Bj({Kc:t,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new VC(t,e.locale)}formatHorzItem(e){const t=e;return this.hd.__(new Date(1e3*t.ed))}formatTickmark(e,t){const i=function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(s.tickMarkFormatter!==void 0){const r=s.tickMarkFormatter(e.originalTime,i,t.locale);if(r!==null)return r}return function(r,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=r.rd===void 0?new Date(1e3*r.ed):new Date(Date.UTC(r.rd.year,r.rd.month-1,r.rd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,i,t.locale)}maxTickMarkWeight(e){let t=e.reduce(Oj,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(i,s=0){if(i.length===0)return;let r=s===0?null:i[s-1].time.ed,o=r!==null?new Date(1e3*r):null,a=0;for(let l=s;l<i.length;++l){const c=i[l],d=new Date(1e3*c.time.ed);o!==null&&(c.timeWeight=eT(d,o)),a+=c.time.ed-(r||c.time.ed),r=c.time.ed,o=d}if(s===0&&i.length>1){const l=Math.ceil(a/(i.length-1)),c=new Date(1e3*(i[0].time.ed-l));i[0].timeWeight=eT(new Date(1e3*i[0].time.ed),c)}})(e,t)}static ad(e){return On({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Ka=typeof window<"u";function sT(){return!!Ka&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function um(){return!!Ka&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Ug(n){return n+n%2}function $j(n){Ka&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class qf{constructor(e,t,i){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!um(),this.zd=s=>{this.Ld(s)},this.Od=s=>{if(this.Nd(s)){const r=this.Fd(s);if(++this.ud,this.dd&&this.ud>1){const{Wd:o}=this.Hd(bi(s),this.fd);o<30&&!this.bd&&this.Ud(r,this.qd.$d),this.Yd()}}else{const r=this.Fd(s);if(++this.ld,this.od&&this.ld>1){const{Wd:o}=this.Hd(bi(s),this._d);o<5&&!this.Md&&this.jd(r,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=t,this.Ps=i,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const t=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",t)},this.Zd.addEventListener("mousemove",t),this.Nd(e))return;const i=this.Fd(e);this.jd(i,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;const t=this.Fd(e);this.jd(t,this.qd.sf),this.Ad=!0}nf(e){const t=cm(e.changedTouches,G(this.Ed));if(t===null||(this.Bd=Oh(e),this.Td!==null)||this.Vd)return;this.Dd=!0;const i=this.Hd(bi(t),G(this.wd)),{ef:s,rf:r,Wd:o}=i;if(this.gd||!(o<5)){if(!this.gd){const a=.5*s,l=r>=a&&!this.Ps.hf(),c=a>r&&!this.Ps.af();l||c||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const a=this.Fd(e,t);this.Ud(a,this.qd.lf),na(e)}}}_f(e){if(e.button!==0)return;const t=this.Hd(bi(e),G(this.md)),{Wd:i}=t;if(i>=5&&(this.Md=!0,this.Xd()),this.Md){const s=this.Fd(e);this.jd(s,this.qd.uf)}}Hd(e,t){const i=Math.abs(t._t-e._t),s=Math.abs(t.ut-e.ut);return{ef:i,rf:s,Wd:i+s}}cf(e){let t=cm(e.changedTouches,G(this.Ed));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Ed=null,this.Bd=Oh(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const i=this.Fd(e,t);if(this.Ud(i,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:s}=this.Hd(bi(t),this.fd);s<30&&!this.bd&&this.Ud(i,this.qd.$d),this.Yd()}else this.bd||(this.Ud(i,this.qd.ff),this.qd.ff&&na(e));this.ud===0&&na(e),e.touches.length===0&&this.vd&&(this.vd=!1,na(e))}Ld(e){if(e.button!==0)return;const t=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),sT()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(t,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:i}=this.Hd(bi(e),this._d);i<5&&!this.Md&&this.jd(t,this.qd.Kd),this.Xd()}else this.Md||this.jd(t,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;const t=e.changedTouches[0];this.Ed=t.identifier,this.Bd=Oh(e);const i=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=bi(t),this.yd&&(this.yd(),this.yd=null);{const r=this.nf.bind(this),o=this.cf.bind(this);this.yd=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const s=this.Fd(e,t);this.Ud(s,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=bi(t))}Mf(e){if(e.button!==0)return;const t=this.Zd.ownerDocument.documentElement;sT()&&t.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=bi(e),this.kd&&(this.kd(),this.kd=null);{const s=this._f.bind(this),r=this.Ld.bind(this);this.kd=()=>{t.removeEventListener("mousemove",s),t.removeEventListener("mouseup",r)},t.addEventListener("mousemove",s),t.addEventListener("mouseup",r)}if(this.Id=!0,this.Nd(e))return;const i=this.Fd(e);this.jd(i,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=bi(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,t=i=>{this.qd.Sf&&(i.composed&&this.Zd.contains(i.composedPath()[0])||i.target&&this.Zd.contains(i.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",t)},this.Sd=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}um()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),$j(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){const t=rT(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,t),na(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const t=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Rd=rT(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;const t=this.Fd(e);this.jd(t,this.qd.Vf),this.Ad=!um()}wf(e){const t=cm(e.touches,G(this.Ed));if(t===null)return;const i=this.Fd(e,t);this.Ud(i,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Oh(e)<this.Bd+500}Ud(e,t){t&&t.call(this.qd,e)}jd(e,t){t&&t.call(this.qd,e)}Fd(e,t){const i=t||e,s=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:i.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&na(e)}}}}function rT(n,e){const t=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(t*t+i*i)}function na(n){n.cancelable&&n.preventDefault()}function bi(n){return{_t:n.pageX,ut:n.pageY}}function Oh(n){return n.timeStamp||performance.now()}function cm(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}class zj{constructor(e,t,i){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[t],this.$f=e.Uf()[i],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return Be({width:this.Hf.Zf().width,height:1})}Gf(){return Be({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,t,i){const s=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(t,i,s.width,s.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Yf.appendChild(e);const i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.Yf.appendChild(i);const r={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new qf(i,r,{hf:()=>!1,af:()=>!0}),this.Lf={tp:i,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;const t=this.Hf.hp().Io()+this.$f.hp().Io(),i=t/(this.Hf.Zf().height+this.$f.Zf().height),s=30*i;t<=2*s||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:t-s,_p:t,up:i,cp:s},this.Lf.Qf.style.display="block")}ep(e){const t=this.Ff;if(t===null)return;const i=(e.pageY-t.ap)*t.up,s=wu(t.lp+i,t.cp,t.op);this.Hf.hp().Bo(s),this.$f.hp().Bo(t._p-s),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function hm(n,e){return n.dp-e.dp}function dm(n,e,t){const i=(n.dp-e.dp)/(n.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),t)}class Wj{constructor(e,t,i,s){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=t,this.xp=i,this.Mn=s}Cp(e,t){if(this.fp!==null){if(this.fp.wt===t)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:t,dp:e}}le(e,t){if(this.fp===null||this.pp===null||t-this.fp.wt>50)return;let i=0;const s=dm(this.fp,this.pp,this.Sp),r=hm(this.fp,this.pp),o=[s],a=[r];if(i+=r,this.vp!==null){const c=dm(this.pp,this.vp,this.Sp);if(Math.sign(c)===Math.sign(s)){const d=hm(this.pp,this.vp);if(o.push(c),a.push(d),i+=d,this.mp!==null){const p=dm(this.vp,this.mp,this.Sp);if(Math.sign(p)===Math.sign(s)){const g=hm(this.vp,this.mp);o.push(p),a.push(g),i+=g}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/i*o[c];Math.abs(l)<this.bp||(this.wp={dp:e,wt:t},this.Mp=l,this.gp=function(c,d){const p=Math.log(d);return Math.log(1*p/-c)/p}(Math.abs(l),this.xp))}Ru(e){const t=G(this.wp),i=e-t.wt;return t.dp+this.Mp*(Math.pow(this.xp,i)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){const t=e-G(this.wp).wt;return Math.min(t,this.gp)}}class Hj{constructor(e,t){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=t,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function Eo(n,e){const t=G(n.ownerDocument).createElement("canvas");n.appendChild(t);const i=xF(t,{options:{allowResizeObserver:!0},transform:(s,r)=>({width:Math.max(s.width,r.width),height:Math.max(s.height,r.height)})});return i.resizeCanvasElement(e),i}function To(n){var e;n.width=1,n.height=1,(e=n.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Bg(n,e,t,i){n.ih&&n.ih(e,t,i)}function sd(n,e,t,i){n.nt(e,t,i)}function $g(n,e,t,i){const s=n(t,i);for(const r of s){const o=r.Tt(i);o!==null&&e(o)}}function fm(n,e){return t=>{var i,s;return function(r){return r.Ft!==void 0}(t)?(((i=t.Ft())==null?void 0:i.wa())??"")!==e?[]:((s=t.ta)==null?void 0:s.call(t,n))??[]:[]}}function oT(n,e,t,i){if(!n.length)return;let s=0;const r=n[0].$t(i,!0);let o=e===1?t/2-(n[0].Fi()-r/2):n[0].Fi()-r/2-t/2;o=Math.max(0,o);for(let a=1;a<n.length;a++){const l=n[a],c=n[a-1],d=c.$t(i,!1),p=l.Fi(),g=c.Fi();if(e===1?p>g-d:p<g+d){const y=g-d*e;l.Wi(y);const b=y-e*d/2;if((e===1?b<0:b>t)&&o>0){const P=e===1?-1-b:b-t,A=Math.min(P,o);for(let E=s;E<n.length;E++)n[E].Wi(n[E].Fi()+e*A);o-=A}}else s=a,o=e===1?g-d-p:p-(g+d)}}class aT{constructor(e,t,i,s){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new Jd(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=t,this.bl=t.layout,this.Gu=i,this.Yp=s==="left",this.jp=fm("normal",s),this.Kp=fm("top",s),this.Xp=fm("bottom",s),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=Eo(this.Yf,Be({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const r=this.Zp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Gp=Eo(this.Yf,Be({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new qf(this.Gp.canvasElement,a,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),To(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),To(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0;const t=this.iv(),i=G(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));i.save();const s=this.Yi.Va();i.font=this.nv(),s.length>0&&(e=Math.max(this.Np.Vi(i,s[0].Ga),this.Np.Vi(i,s[s.length-1].Ga)));const r=this.ev();for(let c=r.length;c--;){const d=this.Np.Vi(i,r[c].ri());d>e&&(e=d)}const o=this.Yi.zt();if(o!==null&&this.Lp!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),d=this.Yi.Ts(this.Lp.height-2,o);e=Math.max(e,this.Np.Vi(i,this.Yi.Zi(Math.floor(Math.min(c,d))+.11111111111111,o)),this.Np.Vi(i,this.Yi.Zi(Math.ceil(Math.max(c,d))-.11111111111111,o)))}var a;i.restore();const l=e||34;return Ug(Math.ceil(t.S+t.C+t.I+t.B+5+l))}rv(e){this.Lp!==null&&so(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return G(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,G(this.Ft()))}av(e){if(this.Lp===null)return;const t={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();const s=wo(this.Zp,t);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.ov(r),this._v(r)}),this.Pt.uv(s,this.Xp),this.cv(s),this.Pt.uv(s,this.jp),this.dv(s))}this.Gp.applySuggestedBitmapSize();const i=wo(this.Gp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.fv(i),this.Pt.uv(i,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}kt(){var e;(e=this.Yi)==null||e.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),i=this.Pt.hp();this.Op=!0,t.Uo(i,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),i=this.Pt.hp(),s=this.Yi;t.$o(i,s,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),t=this.Pt.hp(),i=this.Yi;this.Op&&(this.Op=!1,e.qo(t,i))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),i=this.Pt.hp();this.Op=!1,t.qo(i,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],t=this.Yi===null?void 0:this.Yi;return(i=>{for(let s=0;s<i.length;++s){const r=i[s].Ws(this.Pt.hp(),t);for(let o=0;o<r.length;o++)e.push(r[o])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:t}){const{width:i,height:s}=t,r=this.Pt.hp().Qt(),o=r.$(),a=r.Fc();o===a?Bf(e,0,0,i,s,o):IC(e,0,0,i,s,o,a)}_v({context:e,bitmapSize:t,horizontalPixelRatio:i}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const s=Math.max(1,Math.floor(this.iv().S*i));let r;r=this.Yp?t.width-s:0,e.fillRect(r,0,s,t.height)}cv(e){if(this.Lp===null||this.Yi===null)return;const t=this.Yi.Va(),i=this.Yi.N(),s=this.iv(),r=this.Yp?this.Lp.width-s.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=i.borderColor;const c=Math.max(1,Math.floor(l)),d=Math.floor(.5*l),p=Math.round(s.C*a);o.beginPath();for(const g of t)o.rect(Math.floor(r*a),Math.round(g.ka*l)-d,p,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.nv(),o.fillStyle=i.textColor??this.bl.textColor,o.textAlign=this.Yp?"right":"left",o.textBaseline="middle";const a=this.Yp?Math.round(r-s.I):Math.round(r+s.C+s.I),l=t.map(c=>this.Np.Di(o,c.Ga));for(let c=t.length;c--;){const d=t[c];o.fillText(d.Ga,a,d.ka+l[c])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2;const t=[],i=this.Yi.Dt().slice(),s=this.Pt.hp(),r=this.iv();this.Yi===s.$n()&&this.Pt.hp().Dt().forEach(l=>{s.Un(l)&&i.push(l)});const o=this.Yi.ba()[0],a=this.Yi;i.forEach(l=>{const c=l.Ws(s,a);c.forEach(d=>{d.Wi(null),d.Hi()&&t.push(d)}),o===l&&c.length>0&&(e=c[0].Bi())}),t.forEach(l=>l.Wi(l.Bi())),this.Yi.N().alignLabels&&this.vv(t,r,e)}vv(e,t,i){if(this.Lp===null)return;const s=e.filter(o=>o.Bi()<=i),r=e.filter(o=>o.Bi()>i);s.sort((o,a)=>a.Bi()-o.Bi()),s.length&&r.length&&r.push(s[0]),r.sort((o,a)=>o.Bi()-a.Bi());for(const o of e){const a=Math.floor(o.$t(t)/2),l=o.Bi();l>-a&&l<a&&o.Wi(a),l>this.Lp.height-a&&l<this.Lp.height+a&&o.Wi(this.Lp.height-a)}oT(s,1,this.Lp.height,t),oT(r,-1,this.Lp.height,t)}dv(e){if(this.Lp===null)return;const t=this.ev(),i=this.iv(),s=this.Yp?"right":"left";t.forEach(r=>{r.Ui()&&r.Tt(G(this.Yi)).nt(e,i,this.Np,s)})}fv(e){if(this.Lp===null||this.Yi===null)return;const t=this.Pt.$p().Qt(),i=[],s=this.Pt.hp(),r=t._c().Ws(s,this.Yi);r.length&&i.push(r);const o=this.iv(),a=this.Yp?"right":"left";i.forEach(l=>{l.forEach(c=>{c.Tt(G(this.Yi)).nt(e,o,this.Np,a)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return Xd(this.bl.fontSize,this.bl.fontFamily)}}function qj(n,e){var t;return((t=n.Jh)==null?void 0:t.call(n,e))??[]}function lT(n,e){var t;return((t=n.Fs)==null?void 0:t.call(n,e))??[]}function uT(n,e){var t;return((t=n.us)==null?void 0:t.call(n,e))??[]}function Yj(n,e){var t;return((t=n.Xh)==null?void 0:t.call(n,e))??[]}class J_{constructor(e,t){this.Lp=Be({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new ut,this.xv=new ut,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=t,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(i),this.Zp=Eo(i,Be({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=Eo(i,Be({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new qf(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),To(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),To(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return G(this.Dv)}zv(e){var t;this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(J_.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new Hj(this.Iv,this.Dp),this.gv.kt()):((t=this.gv)==null||t.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){const e=this.Dv.Wo();this.mv._s(G(e))}if(this.wv!==null){const e=this.Dv.Ho();this.wv._s(G(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const t=e.localX,i=e.localY;this.Fv(t,i,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const t=e.localX,i=e.localY;this.Fv(t,i,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){const t={x:e.localX,y:e.localY};this.Yv(t,t,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,t){if(!this.Dp.N().handleScale.pinch)return;const i=5*(t-this.Cv);this.Cv=t,this.ts().Mc(e._t,i)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();const t=this.ts()._c();this.kv!==null&&t.Vt()&&(this.Tv={x:t.si(),y:t.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;const t=e.localX,i=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;const s=G(this.Tv),r=s.x+(t-this.kv.x),o=s.y+(i-this.kv.y);this.Fv(r,o,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,t){const i=this.Dv;return i===null?null:OC(i,e,t)}Gv(e,t){G(t==="left"?this.mv:this.wv).rv(Be({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){so(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=G(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const t of e.ba())if(e.Un(t)){const i=t.Ft();i!==null&&e.Fo(i),t.Ns()}for(const t of e.s_())t.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);const t={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const s=wo(this.Zp,t);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.ov(r)}),this.Dv&&(this.Qv(s,qj),this.tm(s),this.Qv(s,lT),this.Qv(s,uT)))}this.Gp.applySuggestedBitmapSize();const i=wo(this.Gp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.im(i),this.Qv(i,Yj),this.Qv(i,uT))}sm(){return this.mv}nm(){return this.wv}uv(e,t){this.Qv(e,t)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,t){const i=t.localX,s=t.localY;e.v()&&e.p(this.ts().Et().uu(i),{x:i,y:s},t)}ov({context:e,bitmapSize:t}){const{width:i,height:s}=t,r=this.ts(),o=r.$(),a=r.Fc();o===a?Bf(e,0,0,i,s,a):IC(e,0,0,i,s,o,a)}tm(e){const t=G(this.Dv),i=t.i_().lr().Tt(t);i!==null&&i.nt(e,!1)}im(e){this.rm(e,lT,sd,this.ts()._c())}Qv(e,t){const i=G(this.Dv),s=i.Dt(),r=i.s_();for(const o of r)this.rm(e,t,Bg,o);for(const o of s)this.rm(e,t,Bg,o);for(const o of r)this.rm(e,t,sd,o);for(const o of s)this.rm(e,t,sd,o)}rm(e,t,i,s){const r=G(this.Dv),o=r.Qt().hc(),a=o!==null&&o.n_===s,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;$g(t,c=>i(c,e,a,l),s,r)}Lv(){if(this.Dv===null)return;const e=this.Dp,t=this.Dv.Wo().N().visible,i=this.Dv.Ho().N().visible;t||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),i||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const s=e.Qt().Vc();t&&this.mv===null&&(this.mv=new aT(this,e.N(),s,"left"),this.Bv.appendChild(this.mv.Xf())),i&&this.wv===null&&(this.wv=new aT(this,e.N(),s,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,t,i){this.ts().yc(this.am(e),this.lm(t),i,G(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,t,i){this.kv=e,this.yv=!1,this.Fv(t.x,t.y,i);const s=this.ts()._c();this.Tv={x:s.si(),y:s.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const t=this.ts(),i=this.hp();if(t.Ko(i,i.ys()),this.Mv=null,this.bv=!1,t.Cc(),this.Rv!==null){const s=performance.now(),r=t.Et();this.Rv.le(r.wu(),s),this.Rv.Tu(s)||t._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)G(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;const t=this.ts(),i=t.Et();if(i.Ki())return;const s=this.Dp.N(),r=s.handleScroll,o=s.kineticScroll;if((!r.pressedMouseMove||e.Bf)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Bf))return;const a=this.Dv.ys(),l=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:l,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&o.touch||!e.Bf&&o.mouse){const c=i.vu();this.Rv=new Wj(.2/c,7/c,.997,15/c),this.Rv.Cp(i.wu(),this.Mv.ed)}else this.Rv=null;a.Ki()||t.Yo(this.Dv,a,e.localY),t.Sc(e.localX),this.bv=!0}this.bv&&(a.Ki()||t.jo(this.Dv,a,e.localY),t.xc(e.localX),this.Rv!==null&&this.Rv.Cp(i.wu(),l))}}class cT{constructor(e,t,i,s,r){this.xt=!0,this.Lp=Be({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=i.Vc,this.Ps=t,this.um=s,this.dm=r,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=Eo(this.Yf,Be({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),To(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){so(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const t=wo(this.Zp,{colorSpace:this.Ps.layout.colorSpace});t!==null&&t.useBitmapCoordinateSpace(i=>{this.ov(i),this._v(i)})}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}_v({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const r=Math.floor(this.Gu.N().S*i),o=Math.floor(this.Gu.N().S*s),a=this.Yp?t.width-r:0;e.fillRect(a,0,r,o)}ov({context:e,bitmapSize:t}){Bf(e,0,0,t.width,t.height,this.dm())}}function Z_(n){return e=>{var t;return((t=e.ia)==null?void 0:t.call(e,n))??[]}}const Kj=Z_("normal"),Qj=Z_("top"),Gj=Z_("bottom");class Xj{constructor(e,t){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=Be({width:0,height:0}),this.wm=new ut,this.Np=new Jd(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=t,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=Eo(this.bm,Be({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=Eo(this.bm,Be({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new qf(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),To(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),To(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,t,i){so(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(Be({width:t,height:e.height})),this.pm!==null&&this.pm.rv(Be({width:i,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}av(e){if(e===0)return;const t={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const s=wo(this.Zp,t);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.ov(r),this._v(r),this.Dm(s,Gj)}),this.cv(s),this.Dm(s,Kj)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const i=wo(this.Gp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],i),this.Dm(i,Qj))}Dm(e,t){const i=this.Dp.Qt().js();for(const s of i)$g(t,r=>Bg(r,e,!1,void 0),s,void 0);for(const s of i)$g(t,r=>sd(r,e,!1,void 0),s,void 0)}ov({context:e,bitmapSize:t}){Bf(e,0,0,t.width,t.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:t,verticalPixelRatio:i}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const s=Math.max(1,Math.floor(this.Tm().S*i));e.fillRect(0,0,t.width,s)}}cv(e){const t=this.Dp.Qt().Et(),i=t.Va();if(!i||i.length===0)return;const s=this.o_.maxTickMarkWeight(i),r=this.Tm(),o=t.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const d=Math.max(1,Math.floor(l)),p=Math.floor(.5*l);a.beginPath();const g=Math.round(r.C*c);for(let y=i.length;y--;){const b=Math.round(i[y].coord*l);a.rect(b-p,0,d,g)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=r.S+r.C+r.A+r.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.nv();for(const c of i)if(c.weight<s){const d=c.needAlignCoordinate?this.Bm(a,c.coord,c.label):c.coord;a.fillText(c.label,d,l)}this.Dp.N().timeScale.allowBoldLabels&&(a.font=this.Em());for(const c of i)if(c.weight>=s){const d=c.needAlignCoordinate?this.Bm(a,c.coord,c.label):c.coord;a.fillText(c.label,d,l)}})}Bm(e,t,i){const s=this.Np.Vi(e,i),r=s/2,o=Math.floor(t-r)+.5;return o<0?t+=Math.abs(0-o):o+s>this.Lp.width&&(t-=Math.abs(this.Lp.width-(o+s))),t}Vm(e,t){const i=this.Tm();for(const s of e)for(const r of s.cs())r.Tt().nt(t,i)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return Xd(this.F(),this.Ps.fontFamily)}Em(){return Xd(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Jd,Rm:0});const e=this.M,t=this.nv();if(e.k!==t){const i=this.F();e.P=i,e.k=t,e.A=3*i/12,e.V=3*i/12,e.Ji=9*i/12,e.L=0,e.Rm=4*i/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),t=e.N();t.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),t.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const i={Vc:this.Dp.Qt().Vc()},s=()=>t.leftPriceScale.borderVisible&&e.Et().N().borderVisible,r=()=>e.Fc();t.leftPriceScale.visible&&this.fm===null&&(this.fm=new cT("left",t,i,s,r),this.gm.appendChild(this.fm.Xf())),t.rightPriceScale.visible&&this.pm===null&&(this.pm=new cT("right",t,i,s,r),this.Mm.appendChild(this.pm.Xf()))}}var IT;const Jj=!!Ka&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Ka&&((IT=navigator==null?void 0:navigator.userAgentData)!=null&&IT.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class Zj{constructor(e,t,i){var s;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new ut,this.xv=new ut,this.Ku=new ut,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=t,this.o_=i,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(s=this.kp).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),pm(this.Ps)&&this.jm(!0),this.ts=new Vj(this.Zu.bind(this),this.Ps,i),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new Xj(this,this.o_),this.$m.appendChild(this.Xm.Xf());const r=t.autoSize&&this.Zm();let o=this.Ps.width,a=this.Ps.height;if(r||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Gm(o,a),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],G(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,t,i=!1){if(this.sl===t&&this.Mo===e)return;const s=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return Be({width:l-l%2,height:c-c%2})}(Be({width:e,height:t}));this.sl=s.height,this.Mo=s.width;const r=this.sl+"px",o=this.Mo+"px";G(this.kp).style.height=r,G(this.kp).style.width=o,this.$m.style.height=r,this.$m.style.width=o,i?this.nw(Mt.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=Mt.gn());for(let t=0;t<this.Am.length;t++)this.Am[t].av(e.en(t).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){var s;const t=pm(this.Ps);this.ts.hr(e);const i=pm(this.Ps);i!==t&&this.jm(i),(s=e.layout)!=null&&s.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const i=G(t.getContext("2d"));return this.aw(i),t}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:G(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return In(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let t=0,i=0;const s=this.Am[0],r=(a,l)=>{let c=0;for(let d=0;d<this.Am.length;d++){const p=this.Am[d],g=G(a==="left"?p.sm():p.nm()),y=g.Gf();if(e!==null&&g.Jf(e,l,c),c+=y.height,d<this.Am.length-1){const b=this.zm[d],P=b.Gf();e!==null&&b.Jf(e,l,c),c+=P.height}}};this.ow()&&(r("left",0),t+=G(s.sm()).Gf().width);for(let a=0;a<this.Am.length;a++){const l=this.Am[a],c=l.Gf();if(e!==null&&l.Jf(e,t,i),i+=c.height,a<this.Am.length-1){const d=this.zm[a],p=d.Gf();e!==null&&d.Jf(e,t,i),i+=p.height}}t+=s.Gf().width,this._w()&&(r("right",t),t+=G(s.nm()).Gf().width);const o=(a,l,c)=>{G(a==="left"?this.Xm.xm():this.Xm.Cm()).Jf(G(e),l,c)};if(this.Ps.timeScale.visible){const a=this.Xm.Gf();if(e!==null){let l=0;this.ow()&&(o("left",l,i),l=G(s.sm()).Gf().width),this.Xm.Jf(e,l,i),l+=a.width,this._w()&&o("right",l,i)}i+=a.height}return Be({width:t,height:i})}pw(){let e=0,t=0,i=0;for(const A of this.Am)this.ow()&&(t=Math.max(t,G(A.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(i=Math.max(i,G(A.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=A.Io();t=Ug(t),i=Ug(i);const s=this.Mo,r=this.sl,o=Math.max(s-t-i,0),a=1*this.zm.length,l=this.Ps.timeScale.visible;let c=l?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var d;c=(d=c)+d%2;const p=a+c,g=r<p?0:r-p,y=g/e;let b=0;const P=window.devicePixelRatio||1;for(let A=0;A<this.Am.length;++A){const E=this.Am[A];E.zv(this.ts.$s()[A]);let w=0,x=0;x=A===this.Am.length-1?Math.ceil((g-b)*P)/P:Math.round(E.Io()*y*P)/P,w=Math.max(x,2),b+=w,E.rv(Be({width:o,height:w})),this.ow()&&E.Gv(t,"left"),this._w()&&E.Gv(i,"right"),E.hp()&&this.ts.cc(E.hp(),w)}this.Xm.km(Be({width:l?o:0,height:c}),l?t:0,l?i:0),this.ts.Eo(o),this.Om!==t&&(this.Om=t),this.Nm!==i&&(this.Nm=i)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return Jj?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const t=this.mw(e),i=t*e.deltaX/100,s=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.Ps.handleScale.mouseWheel){const r=Math.sign(s)*Math.min(1,Math.abs(s)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(o,r)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*i)}nw(e,t){var s;const i=e.nn();i===3&&this.ww(),i!==3&&i!==2||(this.gw(e),this.Mw(e,t),this.Xm.kt(),this.Am.forEach(r=>{r.Ov()}),((s=this.Fm)==null?void 0:s.nn())===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,t),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,t){for(const i of e.pn())this.mn(i,t)}gw(e){const t=this.ts.$s();for(let i=0;i<t.length;i++)e.en(i).sn&&t[i].Go()}mn(e,t){const i=this.ts.Et();switch(e.an){case 0:i.Eu();break;case 1:i.Au(e.Wt);break;case 2:i.dn(e.Wt);break;case 3:i.fn(e.Wt);break;case 4:i.bu();break;case 5:e.Wt.Tu(t)||i.fn(e.Wt.Ru(t))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(t=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){const i=this.Fm;this.Fm=null,this.nw(i,t);for(const s of i.pn())if(s.an===5&&!s.Wt.Tu(t)){this.Qt()._n(s.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),t=e.length,i=this.Am.length;for(let s=t;s<i;s++){const r=In(this.Am.pop());this.$m.removeChild(r.Xf()),r.Kv().u(this),r.Xv().u(this),r.m();const o=this.zm.pop();o!==void 0&&this.iw(o)}for(let s=i;s<t;s++){const r=new J_(this,e[s]);if(r.Kv().i(this.bw.bind(this,r),this),r.Xv().i(this.Sw.bind(this,r),this),this.Am.push(r),s>0){const o=new zj(this,s-1,s);this.zm.push(o),this.$m.insertBefore(o.Xf(),this.Xm.Xf())}this.$m.insertBefore(r.Xf(),this.Xm.Xf())}for(let s=0;s<t;s++){const r=e[s],o=this.Am[s];o.hp()!==r?o.zv(r):o.Av()}this.Qm(),this.pw()}xw(e,t,i,s){var p;const r=new Map;e!==null&&this.ts.js().forEach(g=>{const y=g.Xs().Fr(e);y!==null&&r.set(g,y)});let o;if(e!==null){const g=(p=this.ts.Et().ss(e))==null?void 0:p.originalTime;g!==void 0&&(o=g)}const a=this.Qt().hc(),l=a!==null&&a.n_ instanceof Hf?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,d=this.Cw(s);return{Pw:o,Re:e??void 0,kw:t??void 0,yw:d!==-1?d:void 0,Tw:l,Rw:r,Dw:c,Vw:i??void 0}}Cw(e){let t=-1;if(e)t=this.Am.indexOf(e);else{const i=this.Qt()._c().Us();i!==null&&(t=this.Qt().$s().indexOf(i))}return t}bw(e,t,i,s){this.Sv.p(()=>this.xw(t,i,s,e))}Sw(e,t,i,s){this.xv.p(()=>this.xw(t,i,s,e))}Km(e,t,i){var s;this.cw(((s=this.Qt().hc())==null?void 0:s.h_)??null),this.Ku.p(()=>this.xw(e,t,i))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const t=e[e.length-1];t&&this.Gm(t.contentRect.width,t.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}}function pm(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function eU(n){return n.open===void 0&&n.value===void 0}function tU(n){return function(e){return e.open!==void 0}(n)||function(e){return e.value!==void 0}(n)}function hT(n,e,t,i){const s=t.value,r={Re:e,wt:n,Wt:[s,s,s,s],Pw:i};return t.color!==void 0&&(r.R=t.color),r}function nU(n,e,t,i){const s=t.value,r={Re:e,wt:n,Wt:[s,s,s,s],Pw:i};return t.lineColor!==void 0&&(r.vt=t.lineColor),t.topColor!==void 0&&(r.mr=t.topColor),t.bottomColor!==void 0&&(r.wr=t.bottomColor),r}function iU(n,e,t,i){const s=t.value,r={Re:e,wt:n,Wt:[s,s,s,s],Pw:i};return t.topLineColor!==void 0&&(r.gr=t.topLineColor),t.bottomLineColor!==void 0&&(r.Mr=t.bottomLineColor),t.topFillColor1!==void 0&&(r.br=t.topFillColor1),t.topFillColor2!==void 0&&(r.Sr=t.topFillColor2),t.bottomFillColor1!==void 0&&(r.Cr=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(r.Pr=t.bottomFillColor2),r}function sU(n,e,t,i){const s={Re:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Pw:i};return t.color!==void 0&&(s.R=t.color),s}function rU(n,e,t,i){const s={Re:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Pw:i};return t.color!==void 0&&(s.R=t.color),t.borderColor!==void 0&&(s.Ht=t.borderColor),t.wickColor!==void 0&&(s.vr=t.wickColor),s}function oU(n,e,t,i,s){const r=In(s)(t),o=Math.max(...r),a=Math.min(...r),l=r[r.length-1],c=[l,o,a,l],{time:d,color:p,...g}=t;return{Re:e,wt:n,Wt:c,Pw:i,se:g,R:p}}function Yl(n){return n.Wt!==void 0}function dT(n,e){return e.customValues!==void 0&&(n.Iw=e.customValues),n}function Yr(n){return(e,t,i,s,r,o)=>function(a,l){return l?l(a):eU(a)}(i,o)?dT({wt:e,Re:t,Pw:s},i):dT(n(e,t,i,s,r),i)}function fT(n){return{Candlestick:Yr(rU),Bar:Yr(sU),Area:Yr(nU),Baseline:Yr(iU),Histogram:Yr(hT),Line:Yr(hT),Custom:Yr(oU)}[n]}function pT(n){return{Re:0,Bw:new Map,Hh:n}}function mT(n,e){if(n!==void 0&&n.length!==0)return{Ew:e.key(n[0].wt),Aw:e.key(n[n.length-1].wt)}}function gT(n){let e;return n.forEach(t=>{e===void 0&&(e=t.Pw)}),In(e)}class aU{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,t){let i=this.zw.size!==0,s=!1;const r=this.Lw.get(e);if(r!==void 0)if(this.Lw.size===1)i=!1,s=!0,this.zw.clear();else for(const l of this.Nw)l.pointData.Bw.delete(e)&&(s=!0);let o=[];if(t.length!==0){const l=t.map(y=>y.time),c=this.o_.createConverterToInternalObj(t),d=fT(e.Rr()),p=e.da(),g=e.pa();o=t.map((y,b)=>{const P=c(y.time),A=this.o_.key(P);let E=this.zw.get(A);E===void 0&&(E=pT(P),this.zw.set(A,E),s=!0);const w=d(P,E.Re,y,l[b],p,g);return E.Bw.set(e,w),w})}i&&this.Ww(),this.Hw(e,o);let a=-1;if(s){const l=[];this.zw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:gT(c.Bw)})}),l.sort((c,d)=>this.o_.key(c.time)-this.o_.key(d.time)),a=this.Uw(l)}return this.$w(e,a,function(l,c,d){const p=mT(l,d),g=mT(c,d);if(p!==void 0&&g!==void 0)return{qw:!1,zh:p.Aw>=g.Aw&&p.Ew>=g.Ew}}(this.Lw.get(e),r,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,t,i){const s=t;(function(A){A.Pw===void 0&&(A.Pw=A.time)})(s),this.o_.preprocessData(t);const r=this.o_.createConverterToInternalObj([t])(t.time),o=this.Ow.get(e);if(!i&&o!==void 0&&this.o_.key(r)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${r}`);let a=this.zw.get(this.o_.key(r));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=pT(r),this.zw.set(this.o_.key(r),a));const c=fT(e.Rr()),d=e.da(),p=e.pa(),g=c(r,a.Re,t,s.Pw,d,p);a.Bw.set(e,g),i?this.jw(e,g,a.Re):this.Kw(e,g);const y={zh:Yl(g),qw:i};if(!l)return this.$w(e,-1,y);const b={timeWeight:0,time:a.Hh,pointData:a,originalTime:gT(a.Bw)},P=Ya(this.Nw,this.o_.key(b.time),(A,E)=>this.o_.key(A.time)<E);this.Nw.splice(P,0,b);for(let A=P;A<this.Nw.length;++A)mm(this.Nw[A].pointData,A);return this.o_.fillWeightsForPoints(this.Nw,P),this.$w(e,P,y)}Kw(e,t){let i=this.Lw.get(e);i===void 0&&(i=[],this.Lw.set(e,i));const s=i.length!==0?i[i.length-1]:null;s===null||this.o_.key(t.wt)>this.o_.key(s.wt)?Yl(t)&&i.push(t):Yl(t)?i[i.length-1]=t:i.splice(-1,1),this.Ow.set(e,t.wt)}jw(e,t,i){const s=this.Lw.get(e);if(s===void 0)return;const r=Ya(s,i,(o,a)=>o.Re<a);Yl(t)?s[r]=t:s.splice(r,1)}Hw(e,t){t.length!==0?(this.Lw.set(e,t.filter(Yl)),this.Ow.set(e,t[t.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let t=-1;for(let i=0;i<this.Nw.length&&i<e.length;++i){const s=this.Nw[i],r=e[i];if(this.o_.key(s.time)!==this.o_.key(r.time)){t=i;break}r.timeWeight=s.timeWeight,mm(r.pointData,i)}if(t===-1&&this.Nw.length!==e.length&&(t=Math.min(this.Nw.length,e.length)),t===-1)return-1;for(let i=t;i<e.length;++i)mm(e[i].pointData,i);return this.o_.fillWeightsForPoints(e,t),this.Nw=e,t}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].Re))}),e}$w(e,t,i){const s={Oo:new Map,Et:{ou:this.Xw()}};if(t!==-1)this.Lw.forEach((r,o)=>{s.Oo.set(o,{se:r,Zw:o===e?i:void 0})}),this.Lw.has(e)||s.Oo.set(e,{se:[],Zw:i}),s.Et.Gw=this.Nw,s.Et.Jw=t;else{const r=this.Lw.get(e);s.Oo.set(e,{se:r||[],Zw:i})}return s}}function mm(n,e){n.Re=e,n.Bw.forEach(t=>{t.Re=e})}function lU(n,e){return n.wt<e}function uU(n,e){return e<n.wt}function cU(n,e,t){const i=e.Uh(),s=e.bi(),r=Ya(n,i,lU),o=RC(n,s,uU);if(!t)return{from:r,to:o};let a=r,l=o;return r>0&&r<n.length&&n[r].wt>=i&&(a=r-1),o>0&&o<n.length&&n[o-1].wt<=s&&(l=o+1),{from:a,to:l}}class ey{constructor(e,t,i){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=t,this.eg=i}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),t=this.Qn.Et();if(this.lg(),t.Ki()||e.Ki())return;const i=t.Pe();if(i===null||this.Jn.Xs().zr()===0)return;const s=this.Jn.zt();s!==null&&(this.ng=cU(this.sg,i,this.eg),this.ug(e,t,s.Wt),this.cg())}}class hU{constructor(e,t){this.dg=e,this.Yi=t}nt(e,t,i){this.dg.draw(e,this.Yi,t,i)}}class dU extends ey{constructor(e,t,i){super(e,t,!1),this.sh=i,this.hg=new hU(this.sh.renderer(),s=>{const r=e.zt();return r===null?null:e.Ft().Nt(s,r.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>({wt:t.Re,_t:NaN,...e.Dr(t.Re),fg:t.se}))}ug(e,t){t._u(this.sg,ec(this.ng))}cg(){this.sh.update({bars:this.sg.map(fU),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function fU(n){return{x:n._t,time:n.wt,originalData:n.fg,barColor:n.cr}}const pU={color:"#2196f3"},mU=(n,e,t)=>{const i=nr(t);return new dU(n,e,i)};function ty(n){const e={value:n.Wt[3],time:n.Pw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function vT(n){const e=ty(n);return n.R!==void 0&&(e.color=n.R),e}function gU(n){const e=ty(n);return n.vt!==void 0&&(e.lineColor=n.vt),n.mr!==void 0&&(e.topColor=n.mr),n.wr!==void 0&&(e.bottomColor=n.wr),e}function vU(n){const e=ty(n);return n.gr!==void 0&&(e.topLineColor=n.gr),n.Mr!==void 0&&(e.bottomLineColor=n.Mr),n.br!==void 0&&(e.topFillColor1=n.br),n.Sr!==void 0&&(e.topFillColor2=n.Sr),n.Cr!==void 0&&(e.bottomFillColor1=n.Cr),n.Pr!==void 0&&(e.bottomFillColor2=n.Pr),e}function FC(n){const e={open:n.Wt[0],high:n.Wt[1],low:n.Wt[2],close:n.Wt[3],time:n.Pw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function _U(n){const e=FC(n);return n.R!==void 0&&(e.color=n.R),e}function yU(n){const e=FC(n),{R:t,Ht:i,vr:s}=n;return t!==void 0&&(e.color=t),i!==void 0&&(e.borderColor=i),s!==void 0&&(e.wickColor=s),e}function zg(n){return{Area:gU,Line:vT,Baseline:vU,Histogram:vT,Bar:_U,Candlestick:yU,Custom:wU}[n]}function wU(n){const e=n.Pw;return{...n.se,time:e}}const EU={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},TU={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},SU={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:SC,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},gm={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},IU={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function _T(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:SU,crosshair:EU,grid:TU,overlayPriceScales:{...gm},leftPriceScale:{...gm,visible:!1},rightPriceScale:{...gm,visible:!0},timeScale:IU,localization:{locale:Ka?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class jC{constructor(e,t,i){this.Wf=e,this.pg=t,this.vg=i??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return zf(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new fn(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return G(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class bU{constructor(e,t,i,s){this.Wf=e,this.Pt=i,this.mg=t,this.wg=s}getHeight(){return this.Pt.$t()}setHeight(e){const t=this.Wf.Qt(),i=t.Hc(this.Pt);t.fc(i,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const t=this.paneIndex();t!==e&&(Lt(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(t,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new jC(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,t={},i=0){return this.wg.addCustomSeries(e,t,i)}addSeries(e,t={}){return this.wg.addSeries(e,t,this.paneIndex())}}const CU={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class yT{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class PU{constructor(e,t,i,s,r,o){this.Mg=new ut,this.Jn=e,this.bg=t,this.Sg=i,this.o_=r,this.wg=s,this.xg=o}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const t=this.Jn.zt();return t===null?null:this.Jn.Ft().Nt(e,t.Wt)}coordinateToPrice(e){const t=this.Jn.zt();return t===null?null:this.Jn.Ft().Ts(e,t.Wt)}barsInLogicalRange(e){if(e===null)return null;const t=new Ra(new Su(e.from,e.to)).k_(),i=this.Jn.Xs();if(i.Ki())return null;const s=i.Fr(t.Uh(),1),r=i.Fr(t.bi(),-1),o=G(i.Lr()),a=G(i.Ks());if(s!==null&&r!==null&&s.Re>r.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:s===null||s.Re===o?e.from-o:s.Re-o,barsAfter:r===null||r.Re===a?a-e.to:a-r.Re};return s!==null&&r!==null&&(l.from=s.Pw,l.to=r.Pw),l}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,t=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,t),this.Pg("update")}dataByIndex(e,t){const i=this.Jn.Xs().Fr(e,t);return i===null?null:zg(this.seriesType())(i)}data(){const e=zg(this.seriesType());return this.Jn.Xs().Hr().map(t=>e(t))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return us(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const t=On(us(CU),e),i=this.Jn.Oh(t);return new yT(i)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new yT(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,t=G(this.Jn.Qt().Hn(e));return this.xg(t)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const t=this.Jn.Qt().Hn(this.Jn);t!==null&&t.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class AU{constructor(e,t,i){this.yg=new ut,this.z_=new ut,this.wm=new ut,this.ts=e,this.uh=e.Et(),this.Xm=t,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=i}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,t){t?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},i=this.uh.hu(t);this.ts.zc(i)}getVisibleLogicalRange(){const e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Lt(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const t=this.ts.Et();return t.Ki()?null:t.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,t){const i=this.o_.convertHorzItemToInternal(e);return this.uh.J_(i,t)}timeToCoordinate(e){const t=this.timeToIndex(e,!1);return t===null?null:this.uh.qt(t)}coordinateToTime(e){const t=this.ts.Et(),i=t.uu(e),s=t.ss(i);return s===null?null:s.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...us(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function kU(n){if(n===void 0||n.type==="custom")return;const e=n;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(t){if(t>=1)return 0;let i=0;for(;i<8;i++){const s=Math.round(t);if(Math.abs(s-t)<1e-8)return i;t*=10}return i}(e.minMove))}function wT(n){return function(e){if(kh(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:s}=e.handleScale;kh(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),kh(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const t=e.handleScroll;kh(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(n),n}class xU{constructor(e,t,i){this.Vg=new Map,this.Ig=new Map,this.Bg=new ut,this.Eg=new ut,this.Ag=new ut,this.$u=new WeakMap,this.zg=new aU(t);const s=i===void 0?us(_T()):On(us(_T()),wT(i));this.Lg=t,this.Wf=new Zj(e,s,t),this.Wf.Kv().i(o=>{this.Bg.v()&&this.Bg.p(this.Og(o()))},this),this.Wf.Xv().i(o=>{this.Eg.v()&&this.Eg.p(this.Og(o()))},this),this.Wf.uc().i(o=>{this.Ag.v()&&this.Ag.p(this.Og(o()))},this);const r=this.Wf.Qt();this.Ng=new AU(r,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,t,i){this.autoSizeActive()||this.Wf.Gm(e,t,i)}addCustomSeries(e,t={},i=0){const s=(r=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...pU,...r.defaultOptions()},Fg:mU,Wg:r}))(nr(e));return this.Hg(s,t,i)}addSeries(e,t={},i=0){return this.Hg(e,t,i)}removeSeries(e){const t=In(this.Vg.get(e)),i=this.zg.Ec(t);this.Wf.Qt().Ec(t),this.Ug(i),this.Vg.delete(e),this.Ig.delete(t)}Cg(e,t){this.Ug(this.zg.Fw(e,t))}kg(e,t,i){this.Ug(this.zg.Yw(e,t,i))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,t=0){return new jC(this.Wf,e,t)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(wT(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const t=this.Wf.Qt().Uc();return t.zo(e),this.$g(t)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,t){this.Wf.Qt().vc(e,t)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const t=this.Wf.fw(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,i){const s=this.Vg.get(i);if(s===void 0)return;const r=this.Wf.Qt().Hn(s);r!==null&&this.Wf.Qt().Tc(e,t,r)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,t={},i=0){Lt(e.Fg!==void 0),kU(t.priceFormat),e.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(t);const s=On(us(EC),us(e.defaultOptions),t),r=e.Fg,o=new Hf(this.Wf.Qt(),e.type,s,r,e.Wg);this.Wf.Qt().Ic(o,i);const a=new PU(o,this,this,this,this.Lg,l=>this.$g(l));return this.Vg.set(a,o),this.Ig.set(o,a),a}Ug(e){const t=this.Wf.Qt();t.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((i,s)=>s.ht(i.se,i.Zw)),t.Et().j_(),t.pu()}qg(e){return In(this.Ig.get(e))}Og(e){const t=new Map;e.Rw.forEach((s,r)=>{const o=r.Rr(),a=zg(o)(s);if(o!=="Custom")Lt(tU(a));else{const l=r.pa();Lt(!l||l(a)===!1)}t.set(this.qg(r),a)});const i=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:i,hoveredObjectId:e.Dw,seriesData:t,sourceEvent:e.Vw}}$g(e){let t=this.$u.get(e);return t||(t=new bU(this.Wf,i=>this.qg(i),e,this),this.$u.set(e,t)),t}}function RU(n){if(Pc(n)){const e=document.getElementById(n);return Lt(e!==null,`Cannot find element in DOM with id=${n}`),e}return n}function NU(n,e,t){const i=RU(n),s=new xU(i,e,t);return e.setOptions(s.options()),s}function DU(n,e){return NU(n,new iT,iT.ad(e))}class MU extends ey{constructor(e,t){super(e,t,!0)}ug(e,t,i){t._u(this.sg,ec(this.ng)),e.$l(this.sg,i,ec(this.ng))}Yg(e,t){return{wt:e,gt:t,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>{const i=t.Wt[3];return this.jg(t.Re,i,e)})}}function OU(n,e,t,i,s,r,o){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=n,d=e[i.from];let p=r(n,d),g=d;if(i.to-i.from<2){const y=s/2;a.beginPath();const b={_t:d._t-y,ut:d.ut},P={_t:d._t+y,ut:d.ut};a.moveTo(b._t*l,b.ut*c),a.lineTo(P._t*l,P.ut*c),o(n,p,b,P)}else{const y=(P,A)=>{o(n,p,g,A),a.beginPath(),p=P,g=A};let b=g;a.beginPath(),a.moveTo(d._t*l,d.ut*c);for(let P=i.from+1;P<i.to;++P){b=e[P];const A=r(n,b);switch(t){case 0:a.lineTo(b._t*l,b.ut*c);break;case 1:a.lineTo(b._t*l,e[P-1].ut*c),A!==p&&(y(A,b),a.lineTo(b._t*l,e[P-1].ut*c)),a.lineTo(b._t*l,b.ut*c);break;case 2:{const[E,w]=LU(e,P-1,P);a.bezierCurveTo(E._t*l,E.ut*c,w._t*l,w.ut*c,b._t*l,b.ut*c);break}}t!==1&&A!==p&&(y(A,b),a.moveTo(b._t*l,b.ut*c))}(g!==b||g===b&&t===1)&&o(n,p,g,b)}}const ET=6;function vm(n,e){return{_t:n._t-e._t,ut:n.ut-e.ut}}function TT(n,e){return{_t:n._t/e,ut:n.ut/e}}function LU(n,e,t){const i=Math.max(0,e-1),s=Math.min(n.length-1,t+1);var r,o;return[(r=n[e],o=TT(vm(n[t],n[i]),ET),{_t:r._t+o._t,ut:r.ut+o.ut}),vm(n[t],TT(vm(n[s],n[e]),ET))]}function VU(n,e){const t=n.context;t.strokeStyle=e,t.stroke()}class FU extends xo{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:t,lt:i,Kg:s,Xg:r,ct:o,Xt:a,Zg:l}=this.rt;if(i===null)return;const c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,Ha(c,a),c.lineJoin="round";const d=this.Gg.bind(this);r!==void 0&&OU(e,t,r,i,s,d,VU),l&&function(p,g,y,b,P){if(b.to-b.from<=0)return;const{horizontalPixelRatio:A,verticalPixelRatio:E,context:w}=p;let x=null;const M=Math.max(1,Math.floor(A))%2/2,W=y*E+M;for(let Y=b.to-1;Y>=b.from;--Y){const R=g[Y];if(R){const C=P(p,R);C!==x&&(w.beginPath(),x!==null&&w.fill(),w.fillStyle=C,x=C);const k=Math.round(R._t*A)+M,N=R.ut*E;w.moveTo(k,N),w.arc(k,N,W,0,2*Math.PI)}}w.fill()}(e,t,l,i,d)}}class jU extends FU{Gg(e,t){return t.vt}}class UU extends MU{constructor(){super(...arguments),this.hg=new jU}jg(e,t,i){return{...this.Yg(e,t),...i.Dr(e)}}cg(){const e=this.Jn.N(),t={ot:this.sg,Xt:e.lineStyle,Xg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.ng,Kg:this.Qn.Et().vu()};this.hg.ht(t)}}const BU={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(n,e)=>new UU(n,e)};class $U extends ey{constructor(e,t){super(e,t,!1)}ug(e,t,i){t._u(this.sg,ec(this.ng)),e.Yl(this.sg,i,ec(this.ng))}yM(e,t,i){return{wt:e,qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3],_t:NaN,jl:NaN,Kl:NaN,Xl:NaN,Zl:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>this.jg(t.Re,t,e))}}class zU extends xo{constructor(){super(...arguments),this.Yt=null,this.SM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:t}=e;this.SM=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),l=Math.floor(r*a*o),c=Math.floor(r*o),d=Math.min(l,c);return Math.max(Math.floor(o),d)}(this.Yt.vu,t),this.SM>=2&&Math.floor(t)%2!=this.SM%2&&this.SM--;const i=this.Yt.Xs;this.Yt.TM&&this.RM(e,i,this.Yt.lt),this.Yt.Mi&&this._v(e,i,this.Yt.lt);const s=this.DM(t);(!this.Yt.Mi||this.SM>2*s)&&this.VM(e,i,this.Yt.lt)}RM(e,t,i){if(this.Yt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="",l=Math.min(Math.floor(r),Math.floor(this.Yt.vu*r));l=Math.max(Math.floor(r),Math.min(l,this.SM));const c=Math.floor(.5*l);let d=null;for(let p=i.from;p<i.to;p++){const g=t[p];g.pr!==a&&(s.fillStyle=g.pr,a=g.pr);const y=Math.round(Math.min(g.jl,g.Zl)*o),b=Math.round(Math.max(g.jl,g.Zl)*o),P=Math.round(g.Kl*o),A=Math.round(g.Xl*o);let E=Math.round(r*g._t)-c;const w=E+l-1;d!==null&&(E=Math.max(d+1,E),E=Math.min(E,w));const x=w-E+1;s.fillRect(E,P,x,y-P),s.fillRect(E,b+1,x,A-b),d=w}}DM(e){let t=Math.floor(1*e);this.SM<=2*t&&(t=Math.floor(.5*(this.SM-1)));const i=Math.max(Math.floor(e),t);return this.SM<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}_v(e,t,i){if(this.Yt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const l=this.DM(r);let c=null;for(let d=i.from;d<i.to;d++){const p=t[d];p.dr!==a&&(s.fillStyle=p.dr,a=p.dr);let g=Math.round(p._t*r)-Math.floor(.5*this.SM);const y=g+this.SM-1,b=Math.round(Math.min(p.jl,p.Zl)*o),P=Math.round(Math.max(p.jl,p.Zl)*o);if(c!==null&&(g=Math.max(c+1,g),g=Math.min(g,y)),this.Yt.vu*r>2*l)WF(s,g,b,y-g+1,P-b+1,l);else{const A=y-g+1;s.fillRect(g,b,A,P-b+1)}c=y}}VM(e,t,i){if(this.Yt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const l=this.DM(r);for(let c=i.from;c<i.to;c++){const d=t[c];let p=Math.round(Math.min(d.jl,d.Zl)*o),g=Math.round(Math.max(d.jl,d.Zl)*o),y=Math.round(d._t*r)-Math.floor(.5*this.SM),b=y+this.SM-1;if(d.cr!==a){const P=d.cr;s.fillStyle=P,a=P}this.Yt.Mi&&(y+=l,p+=l,b-=l,g-=l),p>g||s.fillRect(y,p,b-y+1,g-p+1)}}}class WU extends $U{constructor(){super(...arguments),this.hg=new zU}jg(e,t,i){return{...this.yM(e,t,i),...i.Dr(e)}}cg(){const e=this.Jn.N();this.hg.ht({Xs:this.sg,vu:this.Qn.Et().vu(),TM:e.wickVisible,Mi:e.borderVisible,lt:this.ng})}}const HU={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Fg:(n,e)=>new WU(n,e)};({...EC});const qU=z.forwardRef(function({data:e=[],interval:t="1m"},i){const s=z.useRef(null),r=z.useRef(null),o=z.useRef(null),a=z.useRef(null),l=z.useRef(!1);return z.useImperativeHandle(i,()=>({setDataOnce:c=>{var d;o.current&&(o.current.setData(c),a.current.setData(_m(c,20)),(d=r.current)==null||d.timeScale().fitContent(),l.current=!0)},append:c=>{o.current&&o.current.update(c)}}),[]),z.useEffect(()=>{if(!s.current)return;const c=["1m","3m","5m","15m","30m","1h","2h"].includes(t),d=DU(s.current,{width:s.current.clientWidth,height:420,layout:{background:{type:"solid",color:"#0b0f17"},textColor:"#cbd5e1"},rightPriceScale:{borderColor:"rgba(100, 114, 139, 0.3)",scaleMargins:{top:.1,bottom:.12}},timeScale:{borderColor:"rgba(100, 114, 139, 0.3)",timeVisible:!0,secondsVisible:c},grid:{vertLines:{color:"rgba(148, 163, 184, 0.08)"},horzLines:{color:"rgba(148, 163, 184, 0.08)"}},crosshair:{mode:0},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,touch:!0},handleScale:{axisPressedMouseMove:!0,pinch:!0,mouseWheel:!0},autoSize:!1,localization:{priceFormatter:b=>`$${Number(b).toFixed(2)}`}}),p=d.addSeries(HU,{upColor:"#10b981",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#10b981",wickDownColor:"#ef4444",priceLineVisible:!0,priceLineColor:"rgba(255,255,255,0.25)"}),g=d.addSeries(BU,{color:"#22d3ee",lineWidth:2,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1});r.current=d,o.current=p,a.current=g;const y=()=>{!s.current||!r.current||r.current.applyOptions({width:s.current.clientWidth})};return window.addEventListener("resize",y),e!=null&&e.length&&!l.current&&(o.current.setData(e),a.current.setData(_m(e,20)),r.current.timeScale().fitContent(),l.current=!0),()=>{window.removeEventListener("resize",y),d.remove(),r.current=null,o.current=null,a.current=null}},[t]),z.useEffect(()=>{var c;!(e!=null&&e.length)||!o.current||l.current||(o.current.setData(e),a.current.setData(_m(e,20)),(c=r.current)==null||c.timeScale().fitContent(),l.current=!0,YU(s.current))},[e]),I.jsx("div",{ref:s,style:{width:"100%",height:"420px",borderRadius:"12px",overflow:"hidden",background:"linear-gradient(180deg,#0b0f17,#0d1320 60%,#0b0f17)",border:"1px solid #1f2937",transition:"box-shadow 0.3s ease"},onMouseEnter:c=>c.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.35)",onMouseLeave:c=>c.currentTarget.style.boxShadow="none"})});function _m(n,e=20){if(!(n!=null&&n.length))return[];const t=[];let i=0;for(let s=0;s<n.length;s++)i+=Number(n[s].close),s>=e&&(i-=Number(n[s-e].close)),s>=e-1&&t.push({time:n[s].time,value:+(i/e).toFixed(2)});return t}function YU(n){n!=null&&n.animate&&n.animate([{boxShadow:"0 0 0px rgba(34,211,238,0.0)"},{boxShadow:"0 0 30px rgba(34,211,238,0.15)"},{boxShadow:"0 0 0px rgba(34,211,238,0.0)"}],{duration:1e3,easing:"ease-in-out"})}const UC="https://api.binance.com",ST={bitcoin:"BTCUSDT",ethereum:"ETHUSDT",solana:"SOLUSDT",cardano:"ADAUSDT",bnb:"BNBUSDT",ripple:"XRPUSDT",dogecoin:"DOGEUSDT",polkadot:"DOTUSDT",litecoin:"LTCUSDT"};function BC(n){if(!n)return null;const e=String(n).toLowerCase();if(ST[e])return ST[e];const t=String(n).toUpperCase();return/[A-Z]{3,}USDT$/.test(t)?t:null}const $C=new Set(["1m","3m","5m","15m","30m","1h","2h","4h","6h","8h","12h","1d","3d","1w","1M"]);async function zC(n){const e=await fetch(n);if(!e.ok){let t="";try{t=await e.text()}catch{}throw new Error(`Binance ${e.status} ${e.statusText} -- ${t||"unknown error"}`)}return e.json()}async function KU(n,e="1d",t=60){let i=BC(n);if(!i)throw new Error(`Не удалось сопоставить "${n}" с символом Binance (например, BTCUSDT).`);$C.has(e)||(e="1d");const s=`${UC}/api/v3/klines?symbol=${i}&interval=${e}&limit=${t}`;return(await zC(s)).map(o=>({time:Math.floor(o[0]/1e3),open:+o[1],high:+o[2],low:+o[3],close:+o[4]}))}async function QU(n,e="1d"){const t=BC(n);if(!t)throw new Error("Bad symbol");$C.has(e)||(e="1d");const i=`${UC}/api/v3/klines?symbol=${t}&interval=${e}&limit=2`,s=await zC(i),r=o=>({time:Math.floor(o[0]/1e3),open:+o[1],high:+o[2],low:+o[3],close:+o[4]});return s.map(r)}function GU({price:n=0,onTrade:e}){const[t,i]=z.useState(1),s=(Number(t)*Number(n)||0).toFixed(2),r=.1;return I.jsxs("form",{onSubmit:o=>o.preventDefault(),className:"p-2",children:[I.jsxs("div",{className:"mb-2",children:["Текущая цена: ",I.jsxs("b",{children:["$",n?Number(n).toFixed(2):"--"]})]}),I.jsxs("div",{className:"qty-control mb-2",children:[I.jsx("button",{type:"button",onClick:()=>i(o=>Math.max(0,o-r)),children:"–"}),I.jsx("input",{type:"number",value:t,onChange:o=>i(+o.target.value)}),I.jsx("button",{type:"button",onClick:()=>i(o=>o+r),children:"+"})]}),I.jsxs("div",{className:"mb-2",children:["Сумма: ",I.jsxs("b",{children:["$",s]})]}),I.jsxs("div",{className:"d-flex gap-2",children:[I.jsx("button",{type:"button",className:"btn btn-success flex-fill",onClick:()=>e("buy",Number(t)),children:"🟢 Купить"}),I.jsx("button",{type:"button",className:"btn btn-danger flex-fill",onClick:()=>e("sell",Number(t)),children:"🔴 Продать"})]})]})}function XU(){const{id:n}=mR(),{user:e}=sl(),t=z.useMemo(()=>Fg.find(M=>M.id===n)||Fg[0],[n]),[i,s]=z.useState("1m"),[r,o]=z.useState(200),[a,l]=z.useState(!0),[c,d]=z.useState(""),[p,g]=z.useState(0),[y,b]=z.useState(null),[P,A]=z.useState(null),E=z.useRef(null),w=id[t.id];z.useEffect(()=>{let M=!0;async function W(){var Y,R,C;try{if(l(!0),d(""),!w)throw new Error("Нет Binance-символа для "+t.id);const k=await KU(w,i,r);if(!M)return;g(((Y=k[k.length-1])==null?void 0:Y.close)??0),(C=(R=E.current)==null?void 0:R.setDataOnce)==null||C.call(R,k)}catch(k){if(!M)return;d((k==null?void 0:k.message)||"Ошибка загрузки")}finally{M&&l(!1)}}return W(),()=>{M=!1}},[t.id,w,i,r]),z.useEffect(()=>{if(!w)return;let M=null,W=!1;const Y=async()=>{var R,C;try{const k=await QU(w,i),N=k==null?void 0:k[1];if(!N||W)return;g(N.close),(C=(R=E.current)==null?void 0:R.append)==null||C.call(R,{time:N.time,open:N.open,high:N.high,low:N.low,close:N.close})}catch{}finally{W||(M=setTimeout(Y,3e3))}};return Y(),()=>{W=!0,M&&clearTimeout(M)}},[w,i]);const x=async(M,W)=>{try{if(!e)throw new Error("Требуется вход.");if(!p||W<=0)throw new Error("Некорректные данные сделки.");M==="buy"?(await TF(e.uid,w,W,p),b({type:"buy",symbol:w,qty:W,price:p})):(await SF(e.uid,w,W,p),b({type:"sell",symbol:w,qty:W,price:p}))}catch(Y){A(Y.message||"Ошибка сделки")}};return I.jsxs("div",{className:"app-max",children:[I.jsx("div",{className:"card p-3 mb-3",children:I.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[I.jsxs("div",{className:"d-flex align-items-center gap-3",children:[I.jsx("div",{className:"logo-badge-svg",dangerouslySetInnerHTML:{__html:t.logoSvg}}),I.jsxs("div",{children:[I.jsxs("h3",{className:"mb-1",children:[t.name," (",t.symbol,")"]}),I.jsxs("div",{className:"h4 mb-0",children:["$",Number(p||t.history.at(-1)).toFixed(4)]}),I.jsx("div",{className:"text-secondary small",children:"Обновление каждые 3 сек"})]})]}),I.jsxs("div",{className:"d-flex gap-2",children:[I.jsxs("select",{className:"form-select",value:i,onChange:M=>s(M.target.value),children:[I.jsx("option",{value:"1m",children:"1m"}),I.jsx("option",{value:"3m",children:"3m"}),I.jsx("option",{value:"5m",children:"5m"}),I.jsx("option",{value:"15m",children:"15m"}),I.jsx("option",{value:"1h",children:"1h"}),I.jsx("option",{value:"4h",children:"4h"}),I.jsx("option",{value:"1d",children:"1d"})]}),I.jsxs("select",{className:"form-select",value:r,onChange:M=>o(Number(M.target.value)),children:[I.jsx("option",{value:100,children:"100"}),I.jsx("option",{value:200,children:"200"}),I.jsx("option",{value:500,children:"500"})]})]})]})}),I.jsxs("div",{className:"card p-3 mb-3",children:[a&&I.jsx("p",{className:"text-secondary",children:"Загрузка графика…"}),c&&I.jsxs("p",{className:"text-danger",children:["Ошибка: ",c]}),I.jsx(qU,{ref:E,data:[],interval:i})]}),I.jsxs("div",{className:"card p-3 mb-3",children:[I.jsx("h5",{className:"mb-3",children:"Совершить сделку"}),I.jsx(GU,{price:p,onTrade:x})]}),y&&I.jsxs(yo,{title:"Сделка выполнена",onClose:()=>b(null),okText:"Отлично",onOk:()=>b(null),children:[y.type==="buy"?"Куплено":"Продано"," ",y.qty," ",y.symbol," по цене $",Number(y.price).toFixed(4),"."]}),P&&I.jsx(yo,{title:"Ошибка",onClose:()=>A(null),okText:"Понятно",onOk:()=>A(null),children:P})]})}function JU(){const[n,e]=z.useState([]),[t,i]=z.useState(0),s=e_();return z.useEffect(()=>{if(!s.currentUser)return;const r=s.currentUser.uid,o=Q_(r,a=>{a&&(i(a.balance??0),e(a.portfolio??[]))});return()=>o()},[s]),I.jsxs("div",{className:"card p-3",children:[I.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[I.jsx("h2",{className:"mb-0",children:"Мой портфель"}),I.jsxs("div",{className:"text-end",children:[I.jsx("div",{className:"small text-secondary",children:"Баланс"}),I.jsxs("div",{className:"h5",children:["$",Number(t).toFixed(2)]})]})]}),n.length===0?I.jsx("p",{className:"text-secondary",children:"Портфель пуст"}):I.jsx("div",{className:"table-responsive",children:I.jsxs("table",{className:"table table-striped table-hover align-middle",children:[I.jsx("thead",{children:I.jsxs("tr",{children:[I.jsx("th",{children:"Тикер"}),I.jsx("th",{className:"text-end",children:"Количество"})]})}),I.jsx("tbody",{children:n.map((r,o)=>I.jsxs("tr",{children:[I.jsx("td",{children:r.symbol}),I.jsx("td",{className:"text-end",children:Number(r.qty)})]},o))})]})})]})}function ZU(){const{user:n}=sl(),e=n==null?void 0:n.uid,[t,i]=z.useState([]);return z.useEffect(()=>{e&&(async()=>i(await EF(e)))()},[e]),e?t.length===0?I.jsx("div",{className:"alert alert-secondary",children:"История пуста."}):I.jsx("div",{className:"card shadow-sm overflow-auto",children:I.jsxs("div",{className:"card-body",children:[I.jsx("h3",{className:"mb-3",children:"📈 История сделок"}),I.jsxs("table",{className:"table table-hover align-middle history-table",children:[I.jsx("thead",{children:I.jsxs("tr",{children:[I.jsx("th",{children:"Дата"}),I.jsx("th",{children:"Тип"}),I.jsx("th",{children:"Тикер"}),I.jsx("th",{className:"text-end",children:"Количество"}),I.jsx("th",{className:"text-end",children:"Цена / Сумма"})]})}),I.jsx("tbody",{children:t.map((s,r)=>I.jsxs("tr",{className:`fade-in ${s.type}`,children:[I.jsx("td",{children:new Date(s.ts).toLocaleString()}),I.jsx("td",{children:I.jsx("span",{className:`badge ${s.type==="buy"?"bg-success":s.type==="sell"?"bg-danger":"bg-info"}`,children:s.type})}),I.jsx("td",{children:s.symbol||"-"}),I.jsx("td",{className:"text-end",children:s.qty??"-"}),I.jsx("td",{className:"text-end",children:s.price?`$${Number(s.price).toFixed(2)}`:s.amount?`+$${s.amount}`:"-"})]},s.id))})]})]})}):I.jsx("div",{className:"alert alert-warning",children:"Войдите в аккаунт."})}function e4(){const[n,e]=z.useState(""),[t,i]=z.useState(""),[s,r]=z.useState(""),[o,a]=z.useState(!1),l=yf(),c=async p=>{p.preventDefault();try{const g=e_(),y=await gM(g,t,s);if(n)try{await Tg(y.user,{displayName:n})}catch(P){console.warn("updateProfile failed:",P)}const b=mi(Zt,"users",y.user.uid);await cC(b,{nickname:n||"",email:t,balance:1e4,createdAt:fC()}),a(!0)}catch(g){alert("Registration error: "+g.message),console.error(g)}},d=()=>{a(!1),l("/dashboard")};return I.jsxs(I.Fragment,{children:[I.jsxs("form",{onSubmit:c,className:"card p-3",style:{maxWidth:420,margin:"40px auto"},children:[I.jsx("h2",{className:"mb-3",children:"Register"}),I.jsx("input",{type:"text",placeholder:"Username",className:"input mb-2",value:n,onChange:p=>e(p.target.value)}),I.jsx("input",{type:"email",placeholder:"Email",className:"input mb-2",value:t,onChange:p=>i(p.target.value)}),I.jsx("input",{type:"password",placeholder:"Password",className:"input mb-3",value:s,onChange:p=>r(p.target.value)}),I.jsx("button",{type:"submit",className:"btn btn-primary",children:"Sign Up"})]}),o&&I.jsx(yo,{message:"You have successfully registered!",onClose:d})]})}function t4(){const[n,e]=z.useState(""),[t,i]=z.useState(""),[s,r]=z.useState(""),[o,a]=z.useState(!1),l=yf(),c=async p=>{p.preventDefault(),r("");try{await vM(bc,n,t),a(!0)}catch(g){switch(g.code){case"auth/invalid-email":r("Invalid email.");break;case"auth/user-disabled":r("This account was disabled.");break;case"auth/user-not-found":r("User not found.");break;case"auth/wrong-password":r("Wrong password.");break;default:r("Login error. Try again.")}}},d=()=>{a(!1),l("/user-profile")};return I.jsxs("div",{className:"flex flex-col items-center justify-center",style:{minHeight:"70vh"},children:[I.jsx("h1",{className:"text-2xl mb-4",children:"Login"}),I.jsxs("form",{onSubmit:c,className:"d-flex flex-column gap-2",style:{width:320},children:[I.jsx("input",{type:"email",placeholder:"Email",className:"border p-2",value:n,onChange:p=>e(p.target.value)}),I.jsx("input",{type:"password",placeholder:"Password",className:"border p-2",value:t,onChange:p=>i(p.target.value)}),I.jsx("button",{type:"submit",className:"btn btn-primary",children:"Login"})]}),I.jsx("div",{className:"mt-2"}),s&&I.jsx("p",{className:"text-danger mt-2",children:s}),o&&I.jsx(yo,{message:"Successfully logged in!",onClose:d})]})}function n4(){return z.useEffect(()=>{const n=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&t.target.classList.add("visible")})},{threshold:.1});return document.querySelectorAll(".fade-in").forEach(e=>n.observe(e)),()=>n.disconnect()},[]),I.jsxs("div",{className:"about-page container py-4",children:[I.jsxs("section",{className:"fade-in card p-4 mb-4 shadow-sm",children:[I.jsx("h2",{children:"💹 Trading Simulator 0.1"}),I.jsx("p",{children:"Уникальная площадка для изучения трейдинга без риска. Получи $10,000 на стартовый баланс и начни торговать прямо сейчас!"})]}),I.jsxs("section",{className:"fade-in card p-4 mb-4 shadow-sm",children:[I.jsx("h3",{children:"📜 История трейдинга"}),I.jsx("p",{children:"От древних рынков до современных криптобирж — трейдинг всегда был движущей силой экономики. Люди изучали поведение цен, создавали инструменты для анализа и искали возможности для прибыли."})]}),I.jsxs("section",{className:"fade-in card p-4 mb-4 shadow-sm",children:[I.jsx("h3",{children:"🚀 Почему это важно"}),I.jsx("p",{children:"В нашем симуляторе ты учишься реагировать на колебания рынка, анализировать графики, управлять портфелем и принимать решения, которые помогут развить навыки настоящего трейдера."})]}),I.jsxs("section",{className:"fade-in card p-4 mb-4 shadow-sm",children:[I.jsx("h3",{children:"⚡ Возможности платформы"}),I.jsxs("ul",{className:"list-group list-group-flush",children:[I.jsx("li",{className:"list-group-item",children:"🤑 Торговля акциями и криптовалютой без риска"}),I.jsx("li",{className:"list-group-item",children:"📊 Графики в реальном времени"}),I.jsx("li",{className:"list-group-item",children:"🏆 Лидерборд и мотивация для улучшения навыков"}),I.jsx("li",{className:"list-group-item",children:"💡 Аналитика и история твоих сделок"})]})]}),I.jsxs("section",{className:"fade-in card p-4 mb-4 shadow-sm",children:[I.jsx("h3",{children:"🎯 Готов начать?"}),I.jsx("p",{children:"Присоединяйся, тренируй навыки трейдинга и стремись к вершине лидерборда! Без риска, только обучение и удовольствие от игры."})]})]})}function i4({url:n,size:e=96}){return n?I.jsx("img",{src:n,alt:"avatar",style:{width:e,height:e,borderRadius:"50%",objectFit:"cover",border:"2px solid #334155",boxShadow:"0 8px 30px rgba(0,0,0,.35)"}}):I.jsx("div",{style:{width:e,height:e,borderRadius:"50%",background:"conic-gradient(from 180deg, #f87171, #f59e0b, #22d3ee, #8b5cf6, #f87171)",padding:3,boxShadow:"0 8px 30px rgba(0,0,0,.35)"},"aria-label":"avatar placeholder",children:I.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"50%",background:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",color:"#94a3b8",fontWeight:700,fontSize:28},children:"👤"})})}const s4=["https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%201.jpg","https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%202.jpg","https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%203.jpg","https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%204.jpg","https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%205.jpg","https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%206.jpg","https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%207.jpg","https://raw.githubusercontent.com/anna1kt/Trading-Simulator/52432c7c1e0cb12e28c6a7cfd1cd7071fa2ec9da/avatars%201/picture%208.jpg"];function r4(){const n=bc.currentUser,[e,t]=z.useState(!0),[i,s]=z.useState(""),[r,o]=z.useState((n==null?void 0:n.email)||""),[a,l]=z.useState(""),[c,d]=z.useState(""),[p,g]=z.useState("");z.useEffect(()=>{if(!n)return;const E=mi(Zt,"users",n.uid),w=Uf(E,x=>{if(!x.exists())return;const M=x.data();s(M.nickname||""),l(M.avatarUrl||""),d(M.avatarUrl||""),t(!1)});return()=>w()},[n==null?void 0:n.uid]);const y=async()=>{if(n){await bF(n.uid,i.trim());try{await Tg(n,{displayName:i.trim()||null})}catch{}A("Никнейм обновлён")}},b=async()=>{if(!(!n||!c))try{await Ic(mi(Zt,"users",n.uid),{avatarUrl:c});try{await Tg(n,{photoURL:c})}catch{}l(c),A("Аватар обновлён")}catch(E){console.error(E),A("Ошибка при сохранении аватара")}},P=async()=>{if(!n)return;const E=prompt("Введите новый пароль (мин. 6 символов):");if(E)try{try{await C0(n,E)}catch(w){if(w.code==="auth/requires-recent-login"){const x=prompt("Повторная аутентификация: введите текущий пароль:");if(!x)return;const M=Po.credential(n.email,x);await mM(n,M),await C0(n,E)}else throw w}A("Пароль обновлён")}catch(w){alert("Ошибка смены пароля: "+w.message)}},A=E=>{g(E),setTimeout(()=>g(""),2e3)};return n?e?I.jsx("div",{className:"text-secondary",children:"Загрузка…"}):I.jsxs("div",{className:"card p-3",style:{maxWidth:760,margin:"0 auto"},children:[I.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-center gap-3 mb-4",children:[I.jsx(i4,{url:a,size:96}),I.jsxs("div",{className:"text-center text-md-start",children:[I.jsx("h3",{className:"mb-1",children:i||"Без никнейма"}),I.jsx("div",{className:"text-secondary",children:r})]})]}),I.jsxs("div",{className:"row g-3 mb-3",children:[I.jsx("div",{className:"col-12 col-md-6",children:I.jsxs("div",{className:"card p-3 h-100",children:[I.jsx("h5",{className:"mb-3",children:"Никнейм"}),I.jsxs("div",{className:"d-flex gap-2",children:[I.jsx("input",{className:"form-control",value:i,onChange:E=>s(E.target.value)}),I.jsx("button",{className:"btn btn-primary",onClick:y,children:"Сохранить"})]}),I.jsx("div",{className:"small text-secondary mt-2",children:"Отображается в лидерборде и истории."})]})}),I.jsx("div",{className:"col-12 col-md-6",children:I.jsxs("div",{className:"card p-3 h-100",children:[I.jsx("h5",{className:"mb-3",children:"Безопасность"}),I.jsxs("div",{className:"d-flex flex-column gap-2",children:[I.jsxs("div",{children:[I.jsx("div",{className:"small text-secondary mb-1",children:"Почта"}),I.jsx("input",{className:"form-control",value:r,disabled:!0,readOnly:!0})]}),I.jsx("button",{className:"btn btn-outline-secondary",onClick:P,children:"Сменить пароль"})]})]})})]}),I.jsxs("div",{className:"card p-3 mb-4",children:[I.jsx("h5",{className:"mb-3",children:"Выберите аватар"}),I.jsx("div",{className:"d-flex flex-wrap gap-2",children:s4.map(E=>I.jsx("img",{src:E,alt:"avatar",style:{width:60,height:60,borderRadius:"50%",cursor:"pointer",objectFit:"cover",border:c===E?"3px solid #0d6efd":"2px solid #ccc",transition:"transform 0.2s"},onClick:()=>d(E),onMouseEnter:w=>w.currentTarget.style.transform="scale(1.1)",onMouseLeave:w=>w.currentTarget.style.transform="scale(1)"},E))}),I.jsx("button",{className:"btn btn-success mt-2",onClick:b,children:"Сохранить аватар"})]}),p&&I.jsx("div",{className:"alert alert-success py-2 mt-3",children:p})]}):I.jsx("div",{className:"alert alert-warning",children:"Требуется вход."})}function o4(){var t;const[n,e]=z.useState([]);return z.useEffect(()=>{const i=Lf(Zt,"users"),s=rC(i,oC("balance","desc")),r=Uf(s,o=>{const a=[];o.forEach(l=>a.push({id:l.id,...l.data()})),e(a)});return()=>r()},[]),n.length?I.jsxs("div",{className:"container py-4",children:[I.jsx("h1",{className:"h3 mb-4 text-center",children:"🏆 Лидерборд"}),I.jsxs("div",{className:"card mb-4 shadow-sm p-3 text-center",children:[I.jsx("h5",{className:"mb-2",children:"🥇 Лидер"}),I.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-3",children:[n[0].avatarUrl?I.jsx("img",{src:n[0].avatarUrl,alt:"",className:"rounded-circle border border-warning",style:{width:"64px",height:"64px",objectFit:"cover"}}):I.jsx("div",{className:"rounded-circle bg-secondary d-flex align-items-center justify-content-center text-white border border-warning",style:{width:"64px",height:"64px",fontSize:"28px"},children:"👤"}),I.jsxs("div",{children:[I.jsx("div",{className:"fw-bold fs-5",children:n[0].nickname||"Без имени"}),I.jsxs("div",{className:"text-secondary",children:["$",(t=n[0].balance)==null?void 0:t.toLocaleString()]})]})]})]}),I.jsx("div",{className:"table-responsive",children:I.jsxs("table",{className:"table table-striped table-hover align-middle",children:[I.jsx("thead",{className:"table-dark",children:I.jsxs("tr",{children:[I.jsx("th",{scope:"col",children:"#"}),I.jsx("th",{scope:"col",children:"Игрок"}),I.jsx("th",{scope:"col",children:"Баланс"})]})}),I.jsx("tbody",{children:n.map((i,s)=>{var r;return I.jsxs("tr",{className:s===0?"table-warning fw-bold":"",children:[I.jsx("td",{children:s+1}),I.jsx("td",{children:I.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.avatarUrl?I.jsx("img",{src:i.avatarUrl,alt:"",className:"rounded-circle border",style:{width:"32px",height:"32px",objectFit:"cover"}}):I.jsx("div",{className:"rounded-circle bg-secondary d-flex align-items-center justify-content-center text-white",style:{width:"32px",height:"32px"},children:"👤"}),I.jsx("span",{children:i.nickname||"Без имени"})]})}),I.jsxs("td",{className:"fw-semibold",children:["$",(r=i.balance)==null?void 0:r.toLocaleString()]})]},i.id)})})]})})]}):I.jsx("div",{className:"text-center py-4",children:"Нет пользователей для отображения…"})}function a4(){const{user:n}=sl();return n?I.jsx("button",{className:"btn btn-outline-light",onClick:()=>SM(bc),children:"Sign out"}):I.jsxs(I.Fragment,{children:[I.jsx(ai,{className:"btn btn-outline-light me-2",to:"/login",children:"Login"}),I.jsx(ai,{className:"btn btn-outline-light",to:"/register",children:"Register"})]})}function l4(){const{user:n}=sl(),[e,t]=z.useState(!1),[i,s]=z.useState(null);z.useEffect(()=>{if(!n)return;let a=()=>{};return(async()=>{await _C(n.uid),a=Q_(n.uid,c=>{(c==null?void 0:c.welcomed)===!1&&t(!0)});const l=await wC(n.uid);l!=null&&l.amount&&s({amount:l.amount})})(),()=>a()},[n]);const r=async()=>{t(!1),await IF(bc.currentUser.uid)},o=()=>s(null);return I.jsxs(I.Fragment,{children:[e&&I.jsx(yo,{title:"Welcome!",onClose:r,okText:"Start",onOk:r,children:"You received $10,000 as a starting balance. Good luck with your trading!"}),i&&I.jsxs(yo,{title:"Начисление средств",onClose:o,okText:"Ок",onOk:o,children:["На ваш баланс зачислено +$",i.amount,". Успешного трейдинга!"]})]})}function u4(){return I.jsxs(pF,{children:[I.jsx(l4,{}),I.jsx("div",{className:"app",children:I.jsxs("div",{className:"min-vh-100 d-flex flex-column",children:[I.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-secondary",children:I.jsxs("div",{className:"container",children:[I.jsxs(ai,{className:"navbar-brand fw-bold brand",to:"/",children:["💹 ",I.jsx("span",{children:"Trading Simulator 0.1"})]}),I.jsxs("div",{className:"collapse navbar-collapse",id:"nav",children:[I.jsxs("ul",{className:"navbar-nav me-auto",children:[I.jsx("li",{className:"nav-item",children:I.jsx(ai,{className:"nav-link",to:"/",children:"Dashboard"})}),I.jsx("li",{className:"nav-item",children:I.jsx(ai,{className:"nav-link",to:"/portfolio",children:"Portfolio"})}),I.jsx("li",{className:"nav-item",children:I.jsx(ai,{className:"nav-link",to:"/history",children:"History"})}),I.jsx("li",{className:"nav-item",children:I.jsx(ai,{className:"nav-link",to:"/leaderboard",children:"Leaderboard"})}),I.jsx("li",{className:"nav-item",children:I.jsx(ai,{className:"nav-link",to:"/about",children:"About"})}),I.jsx("li",{className:"nav-item",children:I.jsx(ai,{className:"nav-link",to:"/user-profile",children:"User Profile"})})]}),I.jsx(a4,{})]})]})}),I.jsx("main",{className:"container flex-grow-1 py-3",children:I.jsxs(NR,{children:[I.jsx(Ci,{path:"/login",element:I.jsx(t4,{})}),I.jsx(Ci,{path:"/register",element:I.jsx(e4,{})}),I.jsx(Ci,{path:"/about",element:I.jsx(n4,{})}),I.jsx(Ci,{path:"/leaderboard",element:I.jsx(o4,{})}),I.jsx(Ci,{path:"/",element:I.jsx(Kl,{children:I.jsx(CF,{})})}),I.jsx(Ci,{path:"/asset/:id",element:I.jsx(Kl,{children:I.jsx(XU,{})})}),I.jsx(Ci,{path:"/portfolio",element:I.jsx(Kl,{children:I.jsx(JU,{})})}),I.jsx(Ci,{path:"/history",element:I.jsx(Kl,{children:I.jsx(ZU,{})})}),I.jsx(Ci,{path:"/user-profile",element:I.jsx(Kl,{children:I.jsx(r4,{})})})]})}),I.jsxs("footer",{children:["© ",new Date().getFullYear()," Trading Simulator 0.1"]})]})})]})}function Kl({children:n}){const{user:e,ready:t}=sl();return t?e?n:I.jsx(xR,{to:"/login",replace:!0}):I.jsx("div",{className:"container py-5 text-center",children:"Loading…"})}var c4={exports:{}};/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(n,e){(function(t,i){n.exports=i()})(hA,function(){const t=new Map,i={set(_,h,m){t.has(_)||t.set(_,new Map);const T=t.get(_);T.has(h)||T.size===0?T.set(h,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(T.keys())[0]}.`)},get:(_,h)=>t.has(_)&&t.get(_).get(h)||null,remove(_,h){if(!t.has(_))return;const m=t.get(_);m.delete(h),m.size===0&&t.delete(_)}},s="transitionend",r=_=>(_&&window.CSS&&window.CSS.escape&&(_=_.replace(/#([^\s"#']+)/g,(h,m)=>`#${CSS.escape(m)}`)),_),o=_=>{_.dispatchEvent(new Event(s))},a=_=>!(!_||typeof _!="object")&&(_.jquery!==void 0&&(_=_[0]),_.nodeType!==void 0),l=_=>a(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(r(_)):null,c=_=>{if(!a(_)||_.getClientRects().length===0)return!1;const h=getComputedStyle(_).getPropertyValue("visibility")==="visible",m=_.closest("details:not([open])");if(!m)return h;if(m!==_){const T=_.closest("summary");if(T&&T.parentNode!==m||T===null)return!1}return h},d=_=>!_||_.nodeType!==Node.ELEMENT_NODE||!!_.classList.contains("disabled")||(_.disabled!==void 0?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false"),p=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const h=_.getRootNode();return h instanceof ShadowRoot?h:null}return _ instanceof ShadowRoot?_:_.parentNode?p(_.parentNode):null},g=()=>{},y=_=>{_.offsetHeight},b=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,P=[],A=()=>document.documentElement.dir==="rtl",E=_=>{var h;h=()=>{const m=b();if(m){const T=_.NAME,L=m.fn[T];m.fn[T]=_.jQueryInterface,m.fn[T].Constructor=_,m.fn[T].noConflict=()=>(m.fn[T]=L,_.jQueryInterface)}},document.readyState==="loading"?(P.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of P)m()}),P.push(h)):h()},w=(_,h=[],m=_)=>typeof _=="function"?_.call(...h):m,x=(_,h,m=!0)=>{if(!m)return void w(_);const T=($=>{if(!$)return 0;let{transitionDuration:q,transitionDelay:J}=window.getComputedStyle($);const ne=Number.parseFloat(q),se=Number.parseFloat(J);return ne||se?(q=q.split(",")[0],J=J.split(",")[0],1e3*(Number.parseFloat(q)+Number.parseFloat(J))):0})(h)+5;let L=!1;const V=({target:$})=>{$===h&&(L=!0,h.removeEventListener(s,V),w(_))};h.addEventListener(s,V),setTimeout(()=>{L||o(h)},T)},M=(_,h,m,T)=>{const L=_.length;let V=_.indexOf(h);return V===-1?!m&&T?_[L-1]:_[0]:(V+=m?1:-1,T&&(V=(V+L)%L),_[Math.max(0,Math.min(V,L-1))])},W=/[^.]*(?=\..*)\.|.*/,Y=/\..*/,R=/::\d+$/,C={};let k=1;const N={mouseenter:"mouseover",mouseleave:"mouseout"},O=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function F(_,h){return h&&`${h}::${k++}`||_.uidEvent||k++}function D(_){const h=F(_);return _.uidEvent=h,C[h]=C[h]||{},C[h]}function Et(_,h,m=null){return Object.values(_).find(T=>T.callable===h&&T.delegationSelector===m)}function en(_,h,m){const T=typeof h=="string",L=T?m:h||m;let V=le(_);return O.has(V)||(V=_),[T,L,V]}function Jn(_,h,m,T,L){if(typeof h!="string"||!_)return;let[V,$,q]=en(h,m,T);h in N&&($=(me=>function(fe){if(!fe.relatedTarget||fe.relatedTarget!==fe.delegateTarget&&!fe.delegateTarget.contains(fe.relatedTarget))return me.call(this,fe)})($));const J=D(_),ne=J[q]||(J[q]={}),se=Et(ne,$,V?m:null);if(se)return void(se.oneOff=se.oneOff&&L);const te=F($,h.replace(W,"")),ve=V?function(ce,me,fe){return function ge(Le){const ze=ce.querySelectorAll(me);for(let{target:ye}=Le;ye&&ye!==this;ye=ye.parentNode)for(const xe of ze)if(xe===ye)return Fe(Le,{delegateTarget:ye}),ge.oneOff&&U.off(ce,Le.type,me,fe),fe.apply(ye,[Le])}}(_,m,$):function(ce,me){return function fe(ge){return Fe(ge,{delegateTarget:ce}),fe.oneOff&&U.off(ce,ge.type,me),me.apply(ce,[ge])}}(_,$);ve.delegationSelector=V?m:null,ve.callable=$,ve.oneOff=L,ve.uidEvent=te,ne[te]=ve,_.addEventListener(q,ve,V)}function ft(_,h,m,T,L){const V=Et(h[m],T,L);V&&(_.removeEventListener(m,V,!!L),delete h[m][V.uidEvent])}function Z(_,h,m,T){const L=h[m]||{};for(const[V,$]of Object.entries(L))V.includes(T)&&ft(_,h,m,$.callable,$.delegationSelector)}function le(_){return _=_.replace(Y,""),N[_]||_}const U={on(_,h,m,T){Jn(_,h,m,T,!1)},one(_,h,m,T){Jn(_,h,m,T,!0)},off(_,h,m,T){if(typeof h!="string"||!_)return;const[L,V,$]=en(h,m,T),q=$!==h,J=D(_),ne=J[$]||{},se=h.startsWith(".");if(V===void 0){if(se)for(const te of Object.keys(J))Z(_,J,te,h.slice(1));for(const[te,ve]of Object.entries(ne)){const ce=te.replace(R,"");q&&!h.includes(ce)||ft(_,J,$,ve.callable,ve.delegationSelector)}}else{if(!Object.keys(ne).length)return;ft(_,J,$,V,L?m:null)}},trigger(_,h,m){if(typeof h!="string"||!_)return null;const T=b();let L=null,V=!0,$=!0,q=!1;h!==le(h)&&T&&(L=T.Event(h,m),T(_).trigger(L),V=!L.isPropagationStopped(),$=!L.isImmediatePropagationStopped(),q=L.isDefaultPrevented());const J=Fe(new Event(h,{bubbles:V,cancelable:!0}),m);return q&&J.preventDefault(),$&&_.dispatchEvent(J),J.defaultPrevented&&L&&L.preventDefault(),J}};function Fe(_,h={}){for(const[m,T]of Object.entries(h))try{_[m]=T}catch{Object.defineProperty(_,m,{configurable:!0,get:()=>T})}return _}function Re(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function He(_){return _.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const pt={setDataAttribute(_,h,m){_.setAttribute(`data-bs-${He(h)}`,m)},removeDataAttribute(_,h){_.removeAttribute(`data-bs-${He(h)}`)},getDataAttributes(_){if(!_)return{};const h={},m=Object.keys(_.dataset).filter(T=>T.startsWith("bs")&&!T.startsWith("bsConfig"));for(const T of m){let L=T.replace(/^bs/,"");L=L.charAt(0).toLowerCase()+L.slice(1),h[L]=Re(_.dataset[T])}return h},getDataAttribute:(_,h)=>Re(_.getAttribute(`data-bs-${He(h)}`))};class tn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,m){const T=a(m)?pt.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof T=="object"?T:{},...a(m)?pt.getDataAttributes(m):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,m=this.constructor.DefaultType){for(const[L,V]of Object.entries(m)){const $=h[L],q=a($)?"element":(T=$)==null?`${T}`:Object.prototype.toString.call(T).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(V).test(q))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${L}" provided type "${q}" but expected type "${V}".`)}var T}}class it extends tn{constructor(h,m){super(),(h=l(h))&&(this._element=h,this._config=this._getConfig(m),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),U.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,m,T=!0){x(h,m,T)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return i.get(l(h),this.DATA_KEY)}static getOrCreateInstance(h,m={}){return this.getInstance(h)||new this(h,typeof m=="object"?m:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const bn=_=>{let h=_.getAttribute("data-bs-target");if(!h||h==="#"){let m=_.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),h=m&&m!=="#"?m.trim():null}return h?h.split(",").map(m=>r(m)).join(","):null},oe={find:(_,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,_)),findOne:(_,h=document.documentElement)=>Element.prototype.querySelector.call(h,_),children:(_,h)=>[].concat(..._.children).filter(m=>m.matches(h)),parents(_,h){const m=[];let T=_.parentNode.closest(h);for(;T;)m.push(T),T=T.parentNode.closest(h);return m},prev(_,h){let m=_.previousElementSibling;for(;m;){if(m.matches(h))return[m];m=m.previousElementSibling}return[]},next(_,h){let m=_.nextElementSibling;for(;m;){if(m.matches(h))return[m];m=m.nextElementSibling}return[]},focusableChildren(_){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(h,_).filter(m=>!d(m)&&c(m))},getSelectorFromElement(_){const h=bn(_);return h&&oe.findOne(h)?h:null},getElementFromSelector(_){const h=bn(_);return h?oe.findOne(h):null},getMultipleElementsFromSelector(_){const h=bn(_);return h?oe.find(h):[]}},Ro=(_,h="hide")=>{const m=`click.dismiss${_.EVENT_KEY}`,T=_.NAME;U.on(document,m,`[data-bs-dismiss="${T}"]`,function(L){if(["A","AREA"].includes(this.tagName)&&L.preventDefault(),d(this))return;const V=oe.getElementFromSelector(this)||this.closest(`.${T}`);_.getOrCreateInstance(V)[h]()})},Pr=".bs.alert",No=`close${Pr}`,rl=`closed${Pr}`;class $i extends it{static get NAME(){return"alert"}close(){if(U.trigger(this._element,No).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),U.trigger(this._element,rl),this.dispose()}static jQueryInterface(h){return this.each(function(){const m=$i.getOrCreateInstance(this);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h](this)}})}}Ro($i,"close"),E($i);const Do='[data-bs-toggle="button"]';class zi extends it{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const m=zi.getOrCreateInstance(this);h==="toggle"&&m[h]()})}}U.on(document,"click.bs.button.data-api",Do,_=>{_.preventDefault();const h=_.target.closest(Do);zi.getOrCreateInstance(h).toggle()}),E(zi);const Wi=".bs.swipe",Yf=`touchstart${Wi}`,Kf=`touchmove${Wi}`,Ac=`touchend${Wi}`,ol=`pointerdown${Wi}`,kc=`pointerup${Wi}`,Qf={endCallback:null,leftCallback:null,rightCallback:null},al={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class bs extends tn{constructor(h,m){super(),this._element=h,h&&bs.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Qf}static get DefaultType(){return al}static get NAME(){return"swipe"}dispose(){U.off(this._element,Wi)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),w(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const m=h/this._deltaX;this._deltaX=0,m&&w(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(U.on(this._element,ol,h=>this._start(h)),U.on(this._element,kc,h=>this._end(h)),this._element.classList.add("pointer-event")):(U.on(this._element,Yf,h=>this._start(h)),U.on(this._element,Kf,h=>this._move(h)),U.on(this._element,Ac,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Zn=".bs.carousel",mt=".data-api",Rt="ArrowLeft",Mo="ArrowRight",Cs="next",Hi="prev",Ps="left",gi="right",xc=`slide${Zn}`,Oo=`slid${Zn}`,ll=`keydown${Zn}`,Gf=`mouseenter${Zn}`,Xf=`mouseleave${Zn}`,ul=`dragstart${Zn}`,Rc=`load${Zn}${mt}`,Nc=`click${Zn}${mt}`,As="carousel",ks="active",Lo=".active",vi=".carousel-item",Dc=Lo+vi,Vo={[Rt]:gi,[Mo]:Ps},Mc={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ar={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class qi extends it{constructor(h,m){super(h,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=oe.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===As&&this.cycle()}static get Default(){return Mc}static get DefaultType(){return Ar}static get NAME(){return"carousel"}next(){this._slide(Cs)}nextWhenVisible(){!document.hidden&&c(this._element)&&this.next()}prev(){this._slide(Hi)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?U.one(this._element,Oo,()=>this.cycle()):this.cycle())}to(h){const m=this._getItems();if(h>m.length-1||h<0)return;if(this._isSliding)return void U.one(this._element,Oo,()=>this.to(h));const T=this._getItemIndex(this._getActive());if(T===h)return;const L=h>T?Cs:Hi;this._slide(L,m[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&U.on(this._element,ll,h=>this._keydown(h)),this._config.pause==="hover"&&(U.on(this._element,Gf,()=>this.pause()),U.on(this._element,Xf,()=>this._maybeEnableCycle())),this._config.touch&&bs.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of oe.find(".carousel-item img",this._element))U.on(m,ul,T=>T.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder(Ps)),rightCallback:()=>this._slide(this._directionToOrder(gi)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new bs(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const m=Vo[h.key];m&&(h.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const m=oe.findOne(Lo,this._indicatorsElement);m.classList.remove(ks),m.removeAttribute("aria-current");const T=oe.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);T&&(T.classList.add(ks),T.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const m=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(h,m=null){if(this._isSliding)return;const T=this._getActive(),L=h===Cs,V=m||M(this._getItems(),T,L,this._config.wrap);if(V===T)return;const $=this._getItemIndex(V),q=te=>U.trigger(this._element,te,{relatedTarget:V,direction:this._orderToDirection(h),from:this._getItemIndex(T),to:$});if(q(xc).defaultPrevented||!T||!V)return;const J=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement($),this._activeElement=V;const ne=L?"carousel-item-start":"carousel-item-end",se=L?"carousel-item-next":"carousel-item-prev";V.classList.add(se),y(V),T.classList.add(ne),V.classList.add(ne),this._queueCallback(()=>{V.classList.remove(ne,se),V.classList.add(ks),T.classList.remove(ks,se,ne),this._isSliding=!1,q(Oo)},T,this._isAnimated()),J&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return oe.findOne(Dc,this._element)}_getItems(){return oe.find(vi,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return A()?h===Ps?Hi:Cs:h===Ps?Cs:Hi}_orderToDirection(h){return A()?h===Hi?Ps:gi:h===Hi?gi:Ps}static jQueryInterface(h){return this.each(function(){const m=qi.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}}else m.to(h)})}}U.on(document,Nc,"[data-bs-slide], [data-bs-slide-to]",function(_){const h=oe.getElementFromSelector(this);if(!h||!h.classList.contains(As))return;_.preventDefault();const m=qi.getOrCreateInstance(h),T=this.getAttribute("data-bs-slide-to");return T?(m.to(T),void m._maybeEnableCycle()):pt.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),U.on(window,Rc,()=>{const _=oe.find('[data-bs-ride="carousel"]');for(const h of _)qi.getOrCreateInstance(h)}),E(qi);const st=".bs.collapse",Oc=`show${st}`,kr=`shown${st}`,xr=`hide${st}`,Jf=`hidden${st}`,Zf=`click${st}.data-api`,_i="show",xs="collapse",Fo="collapsing",jo=`:scope .${xs} .${xs}`,Uo='[data-bs-toggle="collapse"]',cl={parent:null,toggle:!0},Bo={parent:"(null|element)",toggle:"boolean"};class nn extends it{constructor(h,m){super(h,m),this._isTransitioning=!1,this._triggerArray=[];const T=oe.find(Uo);for(const L of T){const V=oe.getSelectorFromElement(L),$=oe.find(V).filter(q=>q===this._element);V!==null&&$.length&&this._triggerArray.push(L)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return cl}static get DefaultType(){return Bo}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(L=>L!==this._element).map(L=>nn.getOrCreateInstance(L,{toggle:!1}))),h.length&&h[0]._isTransitioning||U.trigger(this._element,Oc).defaultPrevented)return;for(const L of h)L.hide();const m=this._getDimension();this._element.classList.remove(xs),this._element.classList.add(Fo),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const T=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fo),this._element.classList.add(xs,_i),this._element.style[m]="",U.trigger(this._element,kr)},this._element,!0),this._element.style[m]=`${this._element[T]}px`}hide(){if(this._isTransitioning||!this._isShown()||U.trigger(this._element,xr).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,y(this._element),this._element.classList.add(Fo),this._element.classList.remove(xs,_i);for(const m of this._triggerArray){const T=oe.getElementFromSelector(m);T&&!this._isShown(T)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fo),this._element.classList.add(xs),U.trigger(this._element,Jf)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(_i)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=l(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(Uo);for(const m of h){const T=oe.getElementFromSelector(m);T&&this._addAriaAndCollapsedClass([m],this._isShown(T))}}_getFirstLevelChildren(h){const m=oe.find(jo,this._config.parent);return oe.find(h,this._config.parent).filter(T=>!m.includes(T))}_addAriaAndCollapsedClass(h,m){if(h.length)for(const T of h)T.classList.toggle("collapsed",!m),T.setAttribute("aria-expanded",m)}static jQueryInterface(h){const m={};return typeof h=="string"&&/show|hide/.test(h)&&(m.toggle=!1),this.each(function(){const T=nn.getOrCreateInstance(this,m);if(typeof h=="string"){if(T[h]===void 0)throw new TypeError(`No method named "${h}"`);T[h]()}})}}U.on(document,Zf,Uo,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();for(const h of oe.getMultipleElementsFromSelector(this))nn.getOrCreateInstance(h,{toggle:!1}).toggle()}),E(nn);var Tt="top",zt="bottom",Nt="right",gt="left",Rr="auto",Yi=[Tt,zt,Nt,gt],Ki="start",ei="end",hl="clippingParents",Nr="viewport",jn="popper",yi="reference",Dr=Yi.reduce(function(_,h){return _.concat([h+"-"+Ki,h+"-"+ei])},[]),dl=[].concat(Yi,[Rr]).reduce(function(_,h){return _.concat([h,h+"-"+Ki,h+"-"+ei])},[]),fl="beforeRead",pl="read",ml="afterRead",$o="beforeMain",zo="main",gl="afterMain",vl="beforeWrite",Lc="write",Vc="afterWrite",_l=[fl,pl,ml,$o,zo,gl,vl,Lc,Vc];function Cn(_){return _?(_.nodeName||"").toLowerCase():null}function sn(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var h=_.ownerDocument;return h&&h.defaultView||window}return _}function rn(_){return _ instanceof sn(_).Element||_ instanceof Element}function et(_){return _ instanceof sn(_).HTMLElement||_ instanceof HTMLElement}function Rs(_){return typeof ShadowRoot<"u"&&(_ instanceof sn(_).ShadowRoot||_ instanceof ShadowRoot)}const Ns={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var h=_.state;Object.keys(h.elements).forEach(function(m){var T=h.styles[m]||{},L=h.attributes[m]||{},V=h.elements[m];et(V)&&Cn(V)&&(Object.assign(V.style,T),Object.keys(L).forEach(function($){var q=L[$];q===!1?V.removeAttribute($):V.setAttribute($,q===!0?"":q)}))})},effect:function(_){var h=_.state,m={popper:{position:h.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(h.elements.popper.style,m.popper),h.styles=m,h.elements.arrow&&Object.assign(h.elements.arrow.style,m.arrow),function(){Object.keys(h.elements).forEach(function(T){var L=h.elements[T],V=h.attributes[T]||{},$=Object.keys(h.styles.hasOwnProperty(T)?h.styles[T]:m[T]).reduce(function(q,J){return q[J]="",q},{});et(L)&&Cn(L)&&(Object.assign(L.style,$),Object.keys(V).forEach(function(q){L.removeAttribute(q)}))})}},requires:["computeStyles"]};function Pn(_){return _.split("-")[0]}var Ce=Math.max,Qi=Math.min,Un=Math.round;function Gi(){var _=navigator.userAgentData;return _!=null&&_.brands&&Array.isArray(_.brands)?_.brands.map(function(h){return h.brand+"/"+h.version}).join(" "):navigator.userAgent}function Fc(){return!/^((?!chrome|android).)*safari/i.test(Gi())}function Xi(_,h,m){h===void 0&&(h=!1),m===void 0&&(m=!1);var T=_.getBoundingClientRect(),L=1,V=1;h&&et(_)&&(L=_.offsetWidth>0&&Un(T.width)/_.offsetWidth||1,V=_.offsetHeight>0&&Un(T.height)/_.offsetHeight||1);var $=(rn(_)?sn(_):window).visualViewport,q=!Fc()&&m,J=(T.left+(q&&$?$.offsetLeft:0))/L,ne=(T.top+(q&&$?$.offsetTop:0))/V,se=T.width/L,te=T.height/V;return{width:se,height:te,top:ne,right:J+se,bottom:ne+te,left:J,x:J,y:ne}}function yl(_){var h=Xi(_),m=_.offsetWidth,T=_.offsetHeight;return Math.abs(h.width-m)<=1&&(m=h.width),Math.abs(h.height-T)<=1&&(T=h.height),{x:_.offsetLeft,y:_.offsetTop,width:m,height:T}}function jc(_,h){var m=h.getRootNode&&h.getRootNode();if(_.contains(h))return!0;if(m&&Rs(m)){var T=h;do{if(T&&_.isSameNode(T))return!0;T=T.parentNode||T.host}while(T)}return!1}function ti(_){return sn(_).getComputedStyle(_)}function ep(_){return["table","td","th"].indexOf(Cn(_))>=0}function gn(_){return((rn(_)?_.ownerDocument:_.document)||window.document).documentElement}function An(_){return Cn(_)==="html"?_:_.assignedSlot||_.parentNode||(Rs(_)?_.host:null)||gn(_)}function wl(_){return et(_)&&ti(_).position!=="fixed"?_.offsetParent:null}function Ds(_){for(var h=sn(_),m=wl(_);m&&ep(m)&&ti(m).position==="static";)m=wl(m);return m&&(Cn(m)==="html"||Cn(m)==="body"&&ti(m).position==="static")?h:m||function(T){var L=/firefox/i.test(Gi());if(/Trident/i.test(Gi())&&et(T)&&ti(T).position==="fixed")return null;var V=An(T);for(Rs(V)&&(V=V.host);et(V)&&["html","body"].indexOf(Cn(V))<0;){var $=ti(V);if($.transform!=="none"||$.perspective!=="none"||$.contain==="paint"||["transform","perspective"].indexOf($.willChange)!==-1||L&&$.willChange==="filter"||L&&$.filter&&$.filter!=="none")return V;V=V.parentNode}return null}(_)||h}function Wo(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function Bn(_,h,m){return Ce(_,Qi(h,m))}function Uc(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function Bc(_,h){return h.reduce(function(m,T){return m[T]=_,m},{})}const $c={name:"arrow",enabled:!0,phase:"main",fn:function(_){var h,m=_.state,T=_.name,L=_.options,V=m.elements.arrow,$=m.modifiersData.popperOffsets,q=Pn(m.placement),J=Wo(q),ne=[gt,Nt].indexOf(q)>=0?"height":"width";if(V&&$){var se=function(Ve,Me){return Uc(typeof(Ve=typeof Ve=="function"?Ve(Object.assign({},Me.rects,{placement:Me.placement})):Ve)!="number"?Ve:Bc(Ve,Yi))}(L.padding,m),te=yl(V),ve=J==="y"?Tt:gt,ce=J==="y"?zt:Nt,me=m.rects.reference[ne]+m.rects.reference[J]-$[J]-m.rects.popper[ne],fe=$[J]-m.rects.reference[J],ge=Ds(V),Le=ge?J==="y"?ge.clientHeight||0:ge.clientWidth||0:0,ze=me/2-fe/2,ye=se[ve],xe=Le-te[ne]-se[ce],_e=Le/2-te[ne]/2+ze,Te=Bn(ye,_e,xe),De=J;m.modifiersData[T]=((h={})[De]=Te,h.centerOffset=Te-_e,h)}},effect:function(_){var h=_.state,m=_.options.element,T=m===void 0?"[data-popper-arrow]":m;T!=null&&(typeof T!="string"||(T=h.elements.popper.querySelector(T)))&&jc(h.elements.popper,T)&&(h.elements.arrow=T)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function on(_){return _.split("-")[1]}var tp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zc(_){var h,m=_.popper,T=_.popperRect,L=_.placement,V=_.variation,$=_.offsets,q=_.position,J=_.gpuAcceleration,ne=_.adaptive,se=_.roundOffsets,te=_.isFixed,ve=$.x,ce=ve===void 0?0:ve,me=$.y,fe=me===void 0?0:me,ge=typeof se=="function"?se({x:ce,y:fe}):{x:ce,y:fe};ce=ge.x,fe=ge.y;var Le=$.hasOwnProperty("x"),ze=$.hasOwnProperty("y"),ye=gt,xe=Tt,_e=window;if(ne){var Te=Ds(m),De="clientHeight",Ve="clientWidth";Te===sn(m)&&ti(Te=gn(m)).position!=="static"&&q==="absolute"&&(De="scrollHeight",Ve="scrollWidth"),(L===Tt||(L===gt||L===Nt)&&V===ei)&&(xe=zt,fe-=(te&&Te===_e&&_e.visualViewport?_e.visualViewport.height:Te[De])-T.height,fe*=J?1:-1),L!==gt&&(L!==Tt&&L!==zt||V!==ei)||(ye=Nt,ce-=(te&&Te===_e&&_e.visualViewport?_e.visualViewport.width:Te[Ve])-T.width,ce*=J?1:-1)}var Me,rt=Object.assign({position:q},ne&&tp),kn=se===!0?function(ii,ln){var zn=ii.x,Wn=ii.y,tt=ln.devicePixelRatio||1;return{x:Un(zn*tt)/tt||0,y:Un(Wn*tt)/tt||0}}({x:ce,y:fe},sn(m)):{x:ce,y:fe};return ce=kn.x,fe=kn.y,J?Object.assign({},rt,((Me={})[xe]=ze?"0":"",Me[ye]=Le?"0":"",Me.transform=(_e.devicePixelRatio||1)<=1?"translate("+ce+"px, "+fe+"px)":"translate3d("+ce+"px, "+fe+"px, 0)",Me)):Object.assign({},rt,((h={})[xe]=ze?fe+"px":"",h[ye]=Le?ce+"px":"",h.transform="",h))}const Ms={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var h=_.state,m=_.options,T=m.gpuAcceleration,L=T===void 0||T,V=m.adaptive,$=V===void 0||V,q=m.roundOffsets,J=q===void 0||q,ne={placement:Pn(h.placement),variation:on(h.placement),popper:h.elements.popper,popperRect:h.rects.popper,gpuAcceleration:L,isFixed:h.options.strategy==="fixed"};h.modifiersData.popperOffsets!=null&&(h.styles.popper=Object.assign({},h.styles.popper,zc(Object.assign({},ne,{offsets:h.modifiersData.popperOffsets,position:h.options.strategy,adaptive:$,roundOffsets:J})))),h.modifiersData.arrow!=null&&(h.styles.arrow=Object.assign({},h.styles.arrow,zc(Object.assign({},ne,{offsets:h.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:J})))),h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-placement":h.placement})},data:{}};var Ji={passive:!0};const Ho={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var h=_.state,m=_.instance,T=_.options,L=T.scroll,V=L===void 0||L,$=T.resize,q=$===void 0||$,J=sn(h.elements.popper),ne=[].concat(h.scrollParents.reference,h.scrollParents.popper);return V&&ne.forEach(function(se){se.addEventListener("scroll",m.update,Ji)}),q&&J.addEventListener("resize",m.update,Ji),function(){V&&ne.forEach(function(se){se.removeEventListener("scroll",m.update,Ji)}),q&&J.removeEventListener("resize",m.update,Ji)}},data:{}};var Mr={left:"right",right:"left",bottom:"top",top:"bottom"};function wi(_){return _.replace(/left|right|bottom|top/g,function(h){return Mr[h]})}var Wc={start:"end",end:"start"};function qo(_){return _.replace(/start|end/g,function(h){return Wc[h]})}function $e(_){var h=sn(_);return{scrollLeft:h.pageXOffset,scrollTop:h.pageYOffset}}function El(_){return Xi(gn(_)).left+$e(_).scrollLeft}function Tl(_){var h=ti(_),m=h.overflow,T=h.overflowX,L=h.overflowY;return/auto|scroll|overlay|hidden/.test(m+L+T)}function Sl(_){return["html","body","#document"].indexOf(Cn(_))>=0?_.ownerDocument.body:et(_)&&Tl(_)?_:Sl(An(_))}function Os(_,h){var m;h===void 0&&(h=[]);var T=Sl(_),L=T===((m=_.ownerDocument)==null?void 0:m.body),V=sn(T),$=L?[V].concat(V.visualViewport||[],Tl(T)?T:[]):T,q=h.concat($);return L?q:q.concat(Os(An($)))}function Yo(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function Or(_,h,m){return h===Nr?Yo(function(T,L){var V=sn(T),$=gn(T),q=V.visualViewport,J=$.clientWidth,ne=$.clientHeight,se=0,te=0;if(q){J=q.width,ne=q.height;var ve=Fc();(ve||!ve&&L==="fixed")&&(se=q.offsetLeft,te=q.offsetTop)}return{width:J,height:ne,x:se+El(T),y:te}}(_,m)):rn(h)?function(T,L){var V=Xi(T,!1,L==="fixed");return V.top=V.top+T.clientTop,V.left=V.left+T.clientLeft,V.bottom=V.top+T.clientHeight,V.right=V.left+T.clientWidth,V.width=T.clientWidth,V.height=T.clientHeight,V.x=V.left,V.y=V.top,V}(h,m):Yo(function(T){var L,V=gn(T),$=$e(T),q=(L=T.ownerDocument)==null?void 0:L.body,J=Ce(V.scrollWidth,V.clientWidth,q?q.scrollWidth:0,q?q.clientWidth:0),ne=Ce(V.scrollHeight,V.clientHeight,q?q.scrollHeight:0,q?q.clientHeight:0),se=-$.scrollLeft+El(T),te=-$.scrollTop;return ti(q||V).direction==="rtl"&&(se+=Ce(V.clientWidth,q?q.clientWidth:0)-J),{width:J,height:ne,x:se,y:te}}(gn(_)))}function Il(_){var h,m=_.reference,T=_.element,L=_.placement,V=L?Pn(L):null,$=L?on(L):null,q=m.x+m.width/2-T.width/2,J=m.y+m.height/2-T.height/2;switch(V){case Tt:h={x:q,y:m.y-T.height};break;case zt:h={x:q,y:m.y+m.height};break;case Nt:h={x:m.x+m.width,y:J};break;case gt:h={x:m.x-T.width,y:J};break;default:h={x:m.x,y:m.y}}var ne=V?Wo(V):null;if(ne!=null){var se=ne==="y"?"height":"width";switch($){case Ki:h[ne]=h[ne]-(m[se]/2-T[se]/2);break;case ei:h[ne]=h[ne]+(m[se]/2-T[se]/2)}}return h}function Wt(_,h){h===void 0&&(h={});var m=h,T=m.placement,L=T===void 0?_.placement:T,V=m.strategy,$=V===void 0?_.strategy:V,q=m.boundary,J=q===void 0?hl:q,ne=m.rootBoundary,se=ne===void 0?Nr:ne,te=m.elementContext,ve=te===void 0?jn:te,ce=m.altBoundary,me=ce!==void 0&&ce,fe=m.padding,ge=fe===void 0?0:fe,Le=Uc(typeof ge!="number"?ge:Bc(ge,Yi)),ze=ve===jn?yi:jn,ye=_.rects.popper,xe=_.elements[me?ze:ve],_e=function(ln,zn,Wn,tt){var Ti=zn==="clippingParents"?function(je){var un=Os(An(je)),Hn=["absolute","fixed"].indexOf(ti(je).position)>=0&&et(je)?Ds(je):je;return rn(Hn)?un.filter(function(Us){return rn(Us)&&jc(Us,Hn)&&Cn(Us)!=="body"}):[]}(ln):[].concat(zn),Si=[].concat(Ti,[Wn]),ea=Si[0],Ct=Si.reduce(function(je,un){var Hn=Or(ln,un,tt);return je.top=Ce(Hn.top,je.top),je.right=Qi(Hn.right,je.right),je.bottom=Qi(Hn.bottom,je.bottom),je.left=Ce(Hn.left,je.left),je},Or(ln,ea,tt));return Ct.width=Ct.right-Ct.left,Ct.height=Ct.bottom-Ct.top,Ct.x=Ct.left,Ct.y=Ct.top,Ct}(rn(xe)?xe:xe.contextElement||gn(_.elements.popper),J,se,$),Te=Xi(_.elements.reference),De=Il({reference:Te,element:ye,placement:L}),Ve=Yo(Object.assign({},ye,De)),Me=ve===jn?Ve:Te,rt={top:_e.top-Me.top+Le.top,bottom:Me.bottom-_e.bottom+Le.bottom,left:_e.left-Me.left+Le.left,right:Me.right-_e.right+Le.right},kn=_.modifiersData.offset;if(ve===jn&&kn){var ii=kn[L];Object.keys(rt).forEach(function(ln){var zn=[Nt,zt].indexOf(ln)>=0?1:-1,Wn=[Tt,zt].indexOf(ln)>=0?"y":"x";rt[ln]+=ii[Wn]*zn})}return rt}function Hc(_,h){h===void 0&&(h={});var m=h,T=m.placement,L=m.boundary,V=m.rootBoundary,$=m.padding,q=m.flipVariations,J=m.allowedAutoPlacements,ne=J===void 0?dl:J,se=on(T),te=se?q?Dr:Dr.filter(function(me){return on(me)===se}):Yi,ve=te.filter(function(me){return ne.indexOf(me)>=0});ve.length===0&&(ve=te);var ce=ve.reduce(function(me,fe){return me[fe]=Wt(_,{placement:fe,boundary:L,rootBoundary:V,padding:$})[Pn(fe)],me},{});return Object.keys(ce).sort(function(me,fe){return ce[me]-ce[fe]})}const qc={name:"flip",enabled:!0,phase:"main",fn:function(_){var h=_.state,m=_.options,T=_.name;if(!h.modifiersData[T]._skip){for(var L=m.mainAxis,V=L===void 0||L,$=m.altAxis,q=$===void 0||$,J=m.fallbackPlacements,ne=m.padding,se=m.boundary,te=m.rootBoundary,ve=m.altBoundary,ce=m.flipVariations,me=ce===void 0||ce,fe=m.allowedAutoPlacements,ge=h.options.placement,Le=Pn(ge),ze=J||(Le!==ge&&me?function(je){if(Pn(je)===Rr)return[];var un=wi(je);return[qo(je),un,qo(un)]}(ge):[wi(ge)]),ye=[ge].concat(ze).reduce(function(je,un){return je.concat(Pn(un)===Rr?Hc(h,{placement:un,boundary:se,rootBoundary:te,padding:ne,flipVariations:me,allowedAutoPlacements:fe}):un)},[]),xe=h.rects.reference,_e=h.rects.popper,Te=new Map,De=!0,Ve=ye[0],Me=0;Me<ye.length;Me++){var rt=ye[Me],kn=Pn(rt),ii=on(rt)===Ki,ln=[Tt,zt].indexOf(kn)>=0,zn=ln?"width":"height",Wn=Wt(h,{placement:rt,boundary:se,rootBoundary:te,altBoundary:ve,padding:ne}),tt=ln?ii?Nt:gt:ii?zt:Tt;xe[zn]>_e[zn]&&(tt=wi(tt));var Ti=wi(tt),Si=[];if(V&&Si.push(Wn[kn]<=0),q&&Si.push(Wn[tt]<=0,Wn[Ti]<=0),Si.every(function(je){return je})){Ve=rt,De=!1;break}Te.set(rt,Si)}if(De)for(var ea=function(je){var un=ye.find(function(Hn){var Us=Te.get(Hn);if(Us)return Us.slice(0,je).every(function(ih){return ih})});if(un)return Ve=un,"break"},Ct=me?3:1;Ct>0&&ea(Ct)!=="break";Ct--);h.placement!==Ve&&(h.modifiersData[T]._skip=!0,h.placement=Ve,h.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ls(_,h,m){return m===void 0&&(m={x:0,y:0}),{top:_.top-h.height-m.y,right:_.right-h.width+m.x,bottom:_.bottom-h.height+m.y,left:_.left-h.width-m.x}}function bl(_){return[Tt,Nt,zt,gt].some(function(h){return _[h]>=0})}const Ko={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var h=_.state,m=_.name,T=h.rects.reference,L=h.rects.popper,V=h.modifiersData.preventOverflow,$=Wt(h,{elementContext:"reference"}),q=Wt(h,{altBoundary:!0}),J=Ls($,T),ne=Ls(q,L,V),se=bl(J),te=bl(ne);h.modifiersData[m]={referenceClippingOffsets:J,popperEscapeOffsets:ne,isReferenceHidden:se,hasPopperEscaped:te},h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-reference-hidden":se,"data-popper-escaped":te})}},Lr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var h=_.state,m=_.options,T=_.name,L=m.offset,V=L===void 0?[0,0]:L,$=dl.reduce(function(se,te){return se[te]=function(ve,ce,me){var fe=Pn(ve),ge=[gt,Tt].indexOf(fe)>=0?-1:1,Le=typeof me=="function"?me(Object.assign({},ce,{placement:ve})):me,ze=Le[0],ye=Le[1];return ze=ze||0,ye=(ye||0)*ge,[gt,Nt].indexOf(fe)>=0?{x:ye,y:ze}:{x:ze,y:ye}}(te,h.rects,V),se},{}),q=$[h.placement],J=q.x,ne=q.y;h.modifiersData.popperOffsets!=null&&(h.modifiersData.popperOffsets.x+=J,h.modifiersData.popperOffsets.y+=ne),h.modifiersData[T]=$}},Qo={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var h=_.state,m=_.name;h.modifiersData[m]=Il({reference:h.rects.reference,element:h.rects.popper,placement:h.placement})},data:{}},Vr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var h=_.state,m=_.options,T=_.name,L=m.mainAxis,V=L===void 0||L,$=m.altAxis,q=$!==void 0&&$,J=m.boundary,ne=m.rootBoundary,se=m.altBoundary,te=m.padding,ve=m.tether,ce=ve===void 0||ve,me=m.tetherOffset,fe=me===void 0?0:me,ge=Wt(h,{boundary:J,rootBoundary:ne,padding:te,altBoundary:se}),Le=Pn(h.placement),ze=on(h.placement),ye=!ze,xe=Wo(Le),_e=xe==="x"?"y":"x",Te=h.modifiersData.popperOffsets,De=h.rects.reference,Ve=h.rects.popper,Me=typeof fe=="function"?fe(Object.assign({},h.rects,{placement:h.placement})):fe,rt=typeof Me=="number"?{mainAxis:Me,altAxis:Me}:Object.assign({mainAxis:0,altAxis:0},Me),kn=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,ii={x:0,y:0};if(Te){if(V){var ln,zn=xe==="y"?Tt:gt,Wn=xe==="y"?zt:Nt,tt=xe==="y"?"height":"width",Ti=Te[xe],Si=Ti+ge[zn],ea=Ti-ge[Wn],Ct=ce?-Ve[tt]/2:0,je=ze===Ki?De[tt]:Ve[tt],un=ze===Ki?-Ve[tt]:-De[tt],Hn=h.elements.arrow,Us=ce&&Hn?yl(Hn):{width:0,height:0},ih=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ry=ih[zn],Ny=ih[Wn],sh=Bn(0,De[tt],Us[tt]),nA=ye?De[tt]/2-Ct-sh-Ry-rt.mainAxis:je-sh-Ry-rt.mainAxis,iA=ye?-De[tt]/2+Ct+sh+Ny+rt.mainAxis:un+sh+Ny+rt.mainAxis,pp=h.elements.arrow&&Ds(h.elements.arrow),sA=pp?xe==="y"?pp.clientTop||0:pp.clientLeft||0:0,Dy=(ln=kn==null?void 0:kn[xe])!=null?ln:0,rA=Ti+iA-Dy,My=Bn(ce?Qi(Si,Ti+nA-Dy-sA):Si,Ti,ce?Ce(ea,rA):ea);Te[xe]=My,ii[xe]=My-Ti}if(q){var Oy,oA=xe==="x"?Tt:gt,aA=xe==="x"?zt:Nt,qr=Te[_e],rh=_e==="y"?"height":"width",Ly=qr+ge[oA],Vy=qr-ge[aA],mp=[Tt,gt].indexOf(Le)!==-1,Fy=(Oy=kn==null?void 0:kn[_e])!=null?Oy:0,jy=mp?Ly:qr-De[rh]-Ve[rh]-Fy+rt.altAxis,Uy=mp?qr+De[rh]+Ve[rh]-Fy-rt.altAxis:Vy,By=ce&&mp?function(lA,uA,gp){var $y=Bn(lA,uA,gp);return $y>gp?gp:$y}(jy,qr,Uy):Bn(ce?jy:Ly,qr,ce?Uy:Vy);Te[_e]=By,ii[_e]=By-qr}h.modifiersData[T]=ii}},requiresIfExists:["offset"]};function np(_,h,m){m===void 0&&(m=!1);var T,L,V=et(h),$=et(h)&&function(te){var ve=te.getBoundingClientRect(),ce=Un(ve.width)/te.offsetWidth||1,me=Un(ve.height)/te.offsetHeight||1;return ce!==1||me!==1}(h),q=gn(h),J=Xi(_,$,m),ne={scrollLeft:0,scrollTop:0},se={x:0,y:0};return(V||!V&&!m)&&((Cn(h)!=="body"||Tl(q))&&(ne=(T=h)!==sn(T)&&et(T)?{scrollLeft:(L=T).scrollLeft,scrollTop:L.scrollTop}:$e(T)),et(h)?((se=Xi(h,!0)).x+=h.clientLeft,se.y+=h.clientTop):q&&(se.x=El(q))),{x:J.left+ne.scrollLeft-se.x,y:J.top+ne.scrollTop-se.y,width:J.width,height:J.height}}function Yc(_){var h=new Map,m=new Set,T=[];function L(V){m.add(V.name),[].concat(V.requires||[],V.requiresIfExists||[]).forEach(function($){if(!m.has($)){var q=h.get($);q&&L(q)}}),T.push(V)}return _.forEach(function(V){h.set(V.name,V)}),_.forEach(function(V){m.has(V.name)||L(V)}),T}var Vs={placement:"bottom",modifiers:[],strategy:"absolute"};function Cl(){for(var _=arguments.length,h=new Array(_),m=0;m<_;m++)h[m]=arguments[m];return!h.some(function(T){return!(T&&typeof T.getBoundingClientRect=="function")})}function Fr(_){_===void 0&&(_={});var h=_,m=h.defaultModifiers,T=m===void 0?[]:m,L=h.defaultOptions,V=L===void 0?Vs:L;return function($,q,J){J===void 0&&(J=V);var ne,se,te={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vs,V),modifiersData:{},elements:{reference:$,popper:q},attributes:{},styles:{}},ve=[],ce=!1,me={state:te,setOptions:function(ge){var Le=typeof ge=="function"?ge(te.options):ge;fe(),te.options=Object.assign({},V,te.options,Le),te.scrollParents={reference:rn($)?Os($):$.contextElement?Os($.contextElement):[],popper:Os(q)};var ze,ye,xe=function(_e){var Te=Yc(_e);return _l.reduce(function(De,Ve){return De.concat(Te.filter(function(Me){return Me.phase===Ve}))},[])}((ze=[].concat(T,te.options.modifiers),ye=ze.reduce(function(_e,Te){var De=_e[Te.name];return _e[Te.name]=De?Object.assign({},De,Te,{options:Object.assign({},De.options,Te.options),data:Object.assign({},De.data,Te.data)}):Te,_e},{}),Object.keys(ye).map(function(_e){return ye[_e]})));return te.orderedModifiers=xe.filter(function(_e){return _e.enabled}),te.orderedModifiers.forEach(function(_e){var Te=_e.name,De=_e.options,Ve=De===void 0?{}:De,Me=_e.effect;if(typeof Me=="function"){var rt=Me({state:te,name:Te,instance:me,options:Ve});ve.push(rt||function(){})}}),me.update()},forceUpdate:function(){if(!ce){var ge=te.elements,Le=ge.reference,ze=ge.popper;if(Cl(Le,ze)){te.rects={reference:np(Le,Ds(ze),te.options.strategy==="fixed"),popper:yl(ze)},te.reset=!1,te.placement=te.options.placement,te.orderedModifiers.forEach(function(Me){return te.modifiersData[Me.name]=Object.assign({},Me.data)});for(var ye=0;ye<te.orderedModifiers.length;ye++)if(te.reset!==!0){var xe=te.orderedModifiers[ye],_e=xe.fn,Te=xe.options,De=Te===void 0?{}:Te,Ve=xe.name;typeof _e=="function"&&(te=_e({state:te,options:De,name:Ve,instance:me})||te)}else te.reset=!1,ye=-1}}},update:(ne=function(){return new Promise(function(ge){me.forceUpdate(),ge(te)})},function(){return se||(se=new Promise(function(ge){Promise.resolve().then(function(){se=void 0,ge(ne())})})),se}),destroy:function(){fe(),ce=!0}};if(!Cl($,q))return me;function fe(){ve.forEach(function(ge){return ge()}),ve=[]}return me.setOptions(J).then(function(ge){!ce&&J.onFirstUpdate&&J.onFirstUpdate(ge)}),me}}var Pl=Fr(),Al=Fr({defaultModifiers:[Ho,Qo,Ms,Ns]}),Go=Fr({defaultModifiers:[Ho,Qo,Ms,Ns,Lr,qc,Vr,$c,Ko]});const jr=Object.freeze(Object.defineProperty({__proto__:null,afterMain:gl,afterRead:ml,afterWrite:Vc,applyStyles:Ns,arrow:$c,auto:Rr,basePlacements:Yi,beforeMain:$o,beforeRead:fl,beforeWrite:vl,bottom:zt,clippingParents:hl,computeStyles:Ms,createPopper:Go,createPopperBase:Pl,createPopperLite:Al,detectOverflow:Wt,end:ei,eventListeners:Ho,flip:qc,hide:Ko,left:gt,main:zo,modifierPhases:_l,offset:Lr,placements:dl,popper:jn,popperGenerator:Fr,popperOffsets:Qo,preventOverflow:Vr,read:pl,reference:yi,right:Nt,start:Ki,top:Tt,variationPlacements:Dr,viewport:Nr,write:Lc},Symbol.toStringTag,{value:"Module"})),kl="dropdown",Ei=".bs.dropdown",ni=".data-api",Kc="ArrowUp",xl="ArrowDown",Qc=`hide${Ei}`,Gc=`hidden${Ei}`,Xo=`show${Ei}`,an=`shown${Ei}`,Rl=`click${Ei}${ni}`,Nl=`keydown${Ei}${ni}`,Fs=`keyup${Ei}${ni}`,u="show",f='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',v=`${f}.${u}`,S=".dropdown-menu",j=A()?"top-end":"top-start",B=A()?"top-start":"top-end",X=A()?"bottom-end":"bottom-start",Ne=A()?"bottom-start":"bottom-end",vt=A()?"left-start":"right-start",Ie=A()?"right-start":"left-start",St={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},It={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class bt extends it{constructor(h,m){super(h,m),this._popper=null,this._parent=this._element.parentNode,this._menu=oe.next(this._element,S)[0]||oe.prev(this._element,S)[0]||oe.findOne(S,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return St}static get DefaultType(){return It}static get NAME(){return kl}toggle(){return this._isShown()?this.hide():this.show()}show(){if(d(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!U.trigger(this._element,Xo,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))U.on(m,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(u),this._element.classList.add(u),U.trigger(this._element,an,h)}}hide(){if(d(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!U.trigger(this._element,Qc,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))U.off(m,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(u),this._element.classList.remove(u),this._element.setAttribute("aria-expanded","false"),pt.removeDataAttribute(this._menu,"popper"),U.trigger(this._element,Gc,h),this._element.focus()}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!a(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${kl.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(jr===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let h=this._element;this._config.reference==="parent"?h=this._parent:a(this._config.reference)?h=l(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const m=this._getPopperConfig();this._popper=Go(h,this._menu,m)}_isShown(){return this._menu.classList.contains(u)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return vt;if(h.classList.contains("dropstart"))return Ie;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?m?B:j:m?Ne:X}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(m=>Number.parseInt(m,10)):typeof h=="function"?m=>h(m,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(pt.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...w(this._config.popperConfig,[void 0,h])}}_selectMenuItem({key:h,target:m}){const T=oe.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(L=>c(L));T.length&&M(T,m,h===xl,!T.includes(m)).focus()}static jQueryInterface(h){return this.each(function(){const m=bt.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const m=oe.find(v);for(const T of m){const L=bt.getInstance(T);if(!L||L._config.autoClose===!1)continue;const V=h.composedPath(),$=V.includes(L._menu);if(V.includes(L._element)||L._config.autoClose==="inside"&&!$||L._config.autoClose==="outside"&&$||L._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const q={relatedTarget:L._element};h.type==="click"&&(q.clickEvent=h),L._completeHide(q)}}static dataApiKeydownHandler(h){const m=/input|textarea/i.test(h.target.tagName),T=h.key==="Escape",L=[Kc,xl].includes(h.key);if(!L&&!T||m&&!T)return;h.preventDefault();const V=this.matches(f)?this:oe.prev(this,f)[0]||oe.next(this,f)[0]||oe.findOne(f,h.delegateTarget.parentNode),$=bt.getOrCreateInstance(V);if(L)return h.stopPropagation(),$.show(),void $._selectMenuItem(h);$._isShown()&&(h.stopPropagation(),$.hide(),V.focus())}}U.on(document,Nl,f,bt.dataApiKeydownHandler),U.on(document,Nl,S,bt.dataApiKeydownHandler),U.on(document,Rl,bt.clearMenus),U.on(document,Fs,bt.clearMenus),U.on(document,Rl,f,function(_){_.preventDefault(),bt.getOrCreateInstance(this).toggle()}),E(bt);const vn="backdrop",Ur="show",Jo=`mousedown.bs.${vn}`,WC={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},HC={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ny extends tn{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return WC}static get DefaultType(){return HC}static get NAME(){return vn}show(h){if(!this._config.isVisible)return void w(h);this._append();const m=this._getElement();this._config.isAnimated&&y(m),m.classList.add(Ur),this._emulateAnimation(()=>{w(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(Ur),this._emulateAnimation(()=>{this.dispose(),w(h)})):w(h)}dispose(){this._isAppended&&(U.off(this._element,Jo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=l(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),U.on(h,Jo,()=>{w(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){x(h,this._getElement(),this._config.isAnimated)}}const Xc=".bs.focustrap",qC=`focusin${Xc}`,YC=`keydown.tab${Xc}`,iy="backward",KC={autofocus:!0,trapElement:null},QC={autofocus:"boolean",trapElement:"element"};class sy extends tn{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return KC}static get DefaultType(){return QC}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),U.off(document,Xc),U.on(document,qC,h=>this._handleFocusin(h)),U.on(document,YC,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,U.off(document,Xc))}_handleFocusin(h){const{trapElement:m}=this._config;if(h.target===document||h.target===m||m.contains(h.target))return;const T=oe.focusableChildren(m);T.length===0?m.focus():this._lastTabNavDirection===iy?T[T.length-1].focus():T[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?iy:"forward")}}const ry=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",oy=".sticky-top",Jc="padding-right",ay="margin-right";class ip{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Jc,m=>m+h),this._setElementAttributes(ry,Jc,m=>m+h),this._setElementAttributes(oy,ay,m=>m-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Jc),this._resetElementAttributes(ry,Jc),this._resetElementAttributes(oy,ay)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,m,T){const L=this.getWidth();this._applyManipulationCallback(h,V=>{if(V!==this._element&&window.innerWidth>V.clientWidth+L)return;this._saveInitialAttribute(V,m);const $=window.getComputedStyle(V).getPropertyValue(m);V.style.setProperty(m,`${T(Number.parseFloat($))}px`)})}_saveInitialAttribute(h,m){const T=h.style.getPropertyValue(m);T&&pt.setDataAttribute(h,m,T)}_resetElementAttributes(h,m){this._applyManipulationCallback(h,T=>{const L=pt.getDataAttribute(T,m);L!==null?(pt.removeDataAttribute(T,m),T.style.setProperty(m,L)):T.style.removeProperty(m)})}_applyManipulationCallback(h,m){if(a(h))m(h);else for(const T of oe.find(h,this._element))m(T)}}const $n=".bs.modal",GC=`hide${$n}`,XC=`hidePrevented${$n}`,ly=`hidden${$n}`,uy=`show${$n}`,JC=`shown${$n}`,ZC=`resize${$n}`,eP=`click.dismiss${$n}`,tP=`mousedown.dismiss${$n}`,nP=`keydown.dismiss${$n}`,iP=`click${$n}.data-api`,cy="modal-open",hy="show",sp="modal-static",sP={backdrop:!0,focus:!0,keyboard:!0},rP={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Br extends it{constructor(h,m){super(h,m),this._dialog=oe.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ip,this._addEventListeners()}static get Default(){return sP}static get DefaultType(){return rP}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||U.trigger(this._element,uy,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(cy),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(U.trigger(this._element,GC).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(hy),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){U.off(window,$n),U.off(this._dialog,$n),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ny({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new sy({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=oe.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),y(this._element),this._element.classList.add(hy),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,U.trigger(this._element,JC,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){U.on(this._element,nP,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),U.on(window,ZC,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),U.on(this._element,tP,h=>{U.one(this._element,eP,m=>{this._element===h.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(cy),this._resetAdjustments(),this._scrollBar.reset(),U.trigger(this._element,ly)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(U.trigger(this._element,XC).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(sp)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(sp),this._queueCallback(()=>{this._element.classList.remove(sp),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),T=m>0;if(T&&!h){const L=A()?"paddingLeft":"paddingRight";this._element.style[L]=`${m}px`}if(!T&&h){const L=A()?"paddingRight":"paddingLeft";this._element.style[L]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,m){return this.each(function(){const T=Br.getOrCreateInstance(this,h);if(typeof h=="string"){if(T[h]===void 0)throw new TypeError(`No method named "${h}"`);T[h](m)}})}}U.on(document,iP,'[data-bs-toggle="modal"]',function(_){const h=oe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),U.one(h,uy,T=>{T.defaultPrevented||U.one(h,ly,()=>{c(this)&&this.focus()})});const m=oe.findOne(".modal.show");m&&Br.getInstance(m).hide(),Br.getOrCreateInstance(h).toggle(this)}),Ro(Br),E(Br);const Zi=".bs.offcanvas",dy=".data-api",oP=`load${Zi}${dy}`,fy="show",py="showing",my="hiding",gy=".offcanvas.show",aP=`show${Zi}`,lP=`shown${Zi}`,uP=`hide${Zi}`,vy=`hidePrevented${Zi}`,_y=`hidden${Zi}`,cP=`resize${Zi}`,hP=`click${Zi}${dy}`,dP=`keydown.dismiss${Zi}`,fP={backdrop:!0,keyboard:!0,scroll:!1},pP={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class es extends it{constructor(h,m){super(h,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return fP}static get DefaultType(){return pP}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||U.trigger(this._element,aP,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ip().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(py),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(fy),this._element.classList.remove(py),U.trigger(this._element,lP,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(U.trigger(this._element,uP).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(my),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(fy,my),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ip().reset(),U.trigger(this._element,_y)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new ny({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():U.trigger(this._element,vy)}:null})}_initializeFocusTrap(){return new sy({trapElement:this._element})}_addEventListeners(){U.on(this._element,dP,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():U.trigger(this._element,vy))})}static jQueryInterface(h){return this.each(function(){const m=es.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h](this)}})}}U.on(document,hP,'[data-bs-toggle="offcanvas"]',function(_){const h=oe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),d(this))return;U.one(h,_y,()=>{c(this)&&this.focus()});const m=oe.findOne(gy);m&&m!==h&&es.getInstance(m).hide(),es.getOrCreateInstance(h).toggle(this)}),U.on(window,oP,()=>{for(const _ of oe.find(gy))es.getOrCreateInstance(_).show()}),U.on(window,cP,()=>{for(const _ of oe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&es.getOrCreateInstance(_).hide()}),Ro(es),E(es);const yy={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},mP=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),gP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,vP=(_,h)=>{const m=_.nodeName.toLowerCase();return h.includes(m)?!mP.has(m)||!!gP.test(_.nodeValue):h.filter(T=>T instanceof RegExp).some(T=>T.test(m))},_P={allowList:yy,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},yP={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},wP={entry:"(string|element|function|null)",selector:"(string|element)"};class EP extends tn{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return _P}static get DefaultType(){return yP}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[L,V]of Object.entries(this._config.content))this._setContent(h,V,L);const m=h.children[0],T=this._resolvePossibleFunction(this._config.extraClass);return T&&m.classList.add(...T.split(" ")),m}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[m,T]of Object.entries(h))super._typeCheckConfig({selector:m,entry:T},wP)}_setContent(h,m,T){const L=oe.findOne(T,h);L&&((m=this._resolvePossibleFunction(m))?a(m)?this._putElementInTemplate(l(m),L):this._config.html?L.innerHTML=this._maybeSanitize(m):L.textContent=m:L.remove())}_maybeSanitize(h){return this._config.sanitize?function(m,T,L){if(!m.length)return m;if(L&&typeof L=="function")return L(m);const V=new window.DOMParser().parseFromString(m,"text/html"),$=[].concat(...V.body.querySelectorAll("*"));for(const q of $){const J=q.nodeName.toLowerCase();if(!Object.keys(T).includes(J)){q.remove();continue}const ne=[].concat(...q.attributes),se=[].concat(T["*"]||[],T[J]||[]);for(const te of ne)vP(te,se)||q.removeAttribute(te.nodeName)}return V.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return w(h,[void 0,this])}_putElementInTemplate(h,m){if(this._config.html)return m.innerHTML="",void m.append(h);m.textContent=h.textContent}}const TP=new Set(["sanitize","allowList","sanitizeFn"]),rp="fade",Zc="show",SP=".tooltip-inner",wy=".modal",Ey="hide.bs.modal",Dl="hover",op="focus",ap="click",IP={AUTO:"auto",TOP:"top",RIGHT:A()?"left":"right",BOTTOM:"bottom",LEFT:A()?"right":"left"},bP={allowList:yy,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},CP={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class $r extends it{constructor(h,m){if(jr===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(h,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return bP}static get DefaultType(){return CP}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),U.off(this._element.closest(wy),Ey,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=U.trigger(this._element,this.constructor.eventName("show")),m=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!m)return;this._disposePopper();const T=this._getTipElement();this._element.setAttribute("aria-describedby",T.getAttribute("id"));const{container:L}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(L.append(T),U.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(T),T.classList.add(Zc),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))U.on(V,"mouseover",g);this._queueCallback(()=>{U.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!U.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Zc),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))U.off(h,"mouseover",g);this._activeTrigger[ap]=!1,this._activeTrigger[op]=!1,this._activeTrigger[Dl]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),U.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const m=this._getTemplateFactory(h).toHtml();if(!m)return null;m.classList.remove(rp,Zc),m.classList.add(`bs-${this.constructor.NAME}-auto`);const T=(L=>{do L+=Math.floor(1e6*Math.random());while(document.getElementById(L));return L})(this.constructor.NAME).toString();return m.setAttribute("id",T),this._isAnimated()&&m.classList.add(rp),m}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new EP({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SP]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(rp)}_isShown(){return this.tip&&this.tip.classList.contains(Zc)}_createPopper(h){const m=w(this._config.placement,[this,h,this._element]),T=IP[m.toUpperCase()];return Go(this._element,h,this._getPopperConfig(T))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(m=>Number.parseInt(m,10)):typeof h=="function"?m=>h(m,this._element):h}_resolvePossibleFunction(h){return w(h,[this._element,this._element])}_getPopperConfig(h){const m={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:T=>{this._getTipElement().setAttribute("data-popper-placement",T.state.placement)}}]};return{...m,...w(this._config.popperConfig,[void 0,m])}}_setListeners(){const h=this._config.trigger.split(" ");for(const m of h)if(m==="click")U.on(this._element,this.constructor.eventName("click"),this._config.selector,T=>{const L=this._initializeOnDelegatedTarget(T);L._activeTrigger[ap]=!(L._isShown()&&L._activeTrigger[ap]),L.toggle()});else if(m!=="manual"){const T=m===Dl?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),L=m===Dl?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");U.on(this._element,T,this._config.selector,V=>{const $=this._initializeOnDelegatedTarget(V);$._activeTrigger[V.type==="focusin"?op:Dl]=!0,$._enter()}),U.on(this._element,L,this._config.selector,V=>{const $=this._initializeOnDelegatedTarget(V);$._activeTrigger[V.type==="focusout"?op:Dl]=$._element.contains(V.relatedTarget),$._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},U.on(this._element.closest(wy),Ey,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,m){clearTimeout(this._timeout),this._timeout=setTimeout(h,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const m=pt.getDataAttributes(this._element);for(const T of Object.keys(m))TP.has(T)&&delete m[T];return h={...m,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:l(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[m,T]of Object.entries(this._config))this.constructor.Default[m]!==T&&(h[m]=T);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const m=$r.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h]()}})}}E($r);const PP=".popover-header",AP=".popover-body",kP={...$r.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},xP={...$r.DefaultType,content:"(null|string|element|function)"};class eh extends $r{static get Default(){return kP}static get DefaultType(){return xP}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[PP]:this._getTitle(),[AP]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const m=eh.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h]()}})}}E(eh);const lp=".bs.scrollspy",RP=`activate${lp}`,Ty=`click${lp}`,NP=`load${lp}.data-api`,Zo="active",up="[href]",Sy=".nav-link",DP=`${Sy}, .nav-item > ${Sy}, .list-group-item`,MP={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},OP={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ml extends it{constructor(h,m){super(h,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return MP}static get DefaultType(){return OP}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=l(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(m=>Number.parseFloat(m))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(U.off(this._config.target,Ty),U.on(this._config.target,Ty,up,h=>{const m=this._observableSections.get(h.target.hash);if(m){h.preventDefault();const T=this._rootElement||window,L=m.offsetTop-this._element.offsetTop;if(T.scrollTo)return void T.scrollTo({top:L,behavior:"smooth"});T.scrollTop=L}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),h)}_observerCallback(h){const m=$=>this._targetLinks.get(`#${$.target.id}`),T=$=>{this._previousScrollData.visibleEntryTop=$.target.offsetTop,this._process(m($))},L=(this._rootElement||document.documentElement).scrollTop,V=L>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=L;for(const $ of h){if(!$.isIntersecting){this._activeTarget=null,this._clearActiveClass(m($));continue}const q=$.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(V&&q){if(T($),!L)return}else V||q||T($)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=oe.find(up,this._config.target);for(const m of h){if(!m.hash||d(m))continue;const T=oe.findOne(decodeURI(m.hash),this._element);c(T)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,T))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(Zo),this._activateParents(h),U.trigger(this._element,RP,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))oe.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(Zo);else for(const m of oe.parents(h,".nav, .list-group"))for(const T of oe.prev(m,DP))T.classList.add(Zo)}_clearActiveClass(h){h.classList.remove(Zo);const m=oe.find(`${up}.${Zo}`,h);for(const T of m)T.classList.remove(Zo)}static jQueryInterface(h){return this.each(function(){const m=Ml.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}})}}U.on(window,NP,()=>{for(const _ of oe.find('[data-bs-spy="scroll"]'))Ml.getOrCreateInstance(_)}),E(Ml);const zr=".bs.tab",LP=`hide${zr}`,VP=`hidden${zr}`,FP=`show${zr}`,jP=`shown${zr}`,UP=`click${zr}`,BP=`keydown${zr}`,$P=`load${zr}`,zP="ArrowLeft",Iy="ArrowRight",WP="ArrowUp",by="ArrowDown",cp="Home",Cy="End",Wr="active",Py="fade",hp="show",Ay=".dropdown-toggle",dp=`:not(${Ay})`,ky='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',fp=`.nav-link${dp}, .list-group-item${dp}, [role="tab"]${dp}, ${ky}`,HP=`.${Wr}[data-bs-toggle="tab"], .${Wr}[data-bs-toggle="pill"], .${Wr}[data-bs-toggle="list"]`;class Hr extends it{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),U.on(this._element,BP,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const m=this._getActiveElem(),T=m?U.trigger(m,LP,{relatedTarget:h}):null;U.trigger(h,FP,{relatedTarget:m}).defaultPrevented||T&&T.defaultPrevented||(this._deactivate(m,h),this._activate(h,m))}_activate(h,m){h&&(h.classList.add(Wr),this._activate(oe.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),U.trigger(h,jP,{relatedTarget:m})):h.classList.add(hp)},h,h.classList.contains(Py)))}_deactivate(h,m){h&&(h.classList.remove(Wr),h.blur(),this._deactivate(oe.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),U.trigger(h,VP,{relatedTarget:m})):h.classList.remove(hp)},h,h.classList.contains(Py)))}_keydown(h){if(![zP,Iy,WP,by,cp,Cy].includes(h.key))return;h.stopPropagation(),h.preventDefault();const m=this._getChildren().filter(L=>!d(L));let T;if([cp,Cy].includes(h.key))T=m[h.key===cp?0:m.length-1];else{const L=[Iy,by].includes(h.key);T=M(m,h.target,L,!0)}T&&(T.focus({preventScroll:!0}),Hr.getOrCreateInstance(T).show())}_getChildren(){return oe.find(fp,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,m){this._setAttributeIfNotExists(h,"role","tablist");for(const T of m)this._setInitialAttributesOnChild(T)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const m=this._elemIsActive(h),T=this._getOuterElement(h);h.setAttribute("aria-selected",m),T!==h&&this._setAttributeIfNotExists(T,"role","presentation"),m||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const m=oe.getElementFromSelector(h);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,m){const T=this._getOuterElement(h);if(!T.classList.contains("dropdown"))return;const L=(V,$)=>{const q=oe.findOne(V,T);q&&q.classList.toggle($,m)};L(Ay,Wr),L(".dropdown-menu",hp),T.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(h,m,T){h.hasAttribute(m)||h.setAttribute(m,T)}_elemIsActive(h){return h.classList.contains(Wr)}_getInnerElement(h){return h.matches(fp)?h:oe.findOne(fp,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const m=Hr.getOrCreateInstance(this);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}})}}U.on(document,UP,ky,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),d(this)||Hr.getOrCreateInstance(this).show()}),U.on(window,$P,()=>{for(const _ of oe.find(HP))Hr.getOrCreateInstance(_)}),E(Hr);const js=".bs.toast",qP=`mouseover${js}`,YP=`mouseout${js}`,KP=`focusin${js}`,QP=`focusout${js}`,GP=`hide${js}`,XP=`hidden${js}`,JP=`show${js}`,ZP=`shown${js}`,xy="hide",th="show",nh="showing",eA={animation:"boolean",autohide:"boolean",delay:"number"},tA={animation:!0,autohide:!0,delay:5e3};class Ol extends it{constructor(h,m){super(h,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return tA}static get DefaultType(){return eA}static get NAME(){return"toast"}show(){U.trigger(this._element,JP).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(xy),y(this._element),this._element.classList.add(th,nh),this._queueCallback(()=>{this._element.classList.remove(nh),U.trigger(this._element,ZP),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(U.trigger(this._element,GP).defaultPrevented||(this._element.classList.add(nh),this._queueCallback(()=>{this._element.classList.add(xy),this._element.classList.remove(nh,th),U.trigger(this._element,XP)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(th),super.dispose()}isShown(){return this._element.classList.contains(th)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,m){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const T=h.relatedTarget;this._element===T||this._element.contains(T)||this._maybeScheduleHide()}_setListeners(){U.on(this._element,qP,h=>this._onInteraction(h,!0)),U.on(this._element,YP,h=>this._onInteraction(h,!1)),U.on(this._element,KP,h=>this._onInteraction(h,!0)),U.on(this._element,QP,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const m=Ol.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h](this)}})}}return Ro(Ol),E(Ol),{Alert:$i,Button:zi,Carousel:qi,Collapse:nn,Dropdown:bt,Modal:Br,Offcanvas:es,Popover:eh,ScrollSpy:Ml,Tab:Hr,Toast:Ol,Tooltip:$r}})})(c4);FI(document.getElementById("root")).render(I.jsx(OT.StrictMode,{children:I.jsx(jR,{children:I.jsx(u4,{})})}));
